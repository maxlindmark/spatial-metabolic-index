<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Max Lindmark">
<meta name="dcterms.date" content="2023-04-28">

<title>Collate CPUE data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="01_collate_cpue_data_exchange_files/libs/clipboard/clipboard.min.js"></script>
<script src="01_collate_cpue_data_exchange_files/libs/quarto-html/quarto.js"></script>
<script src="01_collate_cpue_data_exchange_files/libs/quarto-html/popper.min.js"></script>
<script src="01_collate_cpue_data_exchange_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="01_collate_cpue_data_exchange_files/libs/quarto-html/anchor.min.js"></script>
<link href="01_collate_cpue_data_exchange_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="01_collate_cpue_data_exchange_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="01_collate_cpue_data_exchange_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="01_collate_cpue_data_exchange_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="01_collate_cpue_data_exchange_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Collate CPUE data</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Max Lindmark </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 28, 2023</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="intro" class="level1">
<h1>Intro</h1>
<p>In this script, I load exchange data from datras and calculate catch of cod and flounder in unit kg/km^2 (with TVL gear) by size group, by correcting for gear dimensions, sweeplength and trawl speed, following Orio et al 2017.</p>
<section id="load-libraries" class="level2">
<h2 class="anchored" data-anchor-id="load-libraries">Load libraries</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidylog)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RCurl)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(icesDatras)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapdata)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgdal)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgeos)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(chron)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lattice)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ncdf4)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(marmap)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mapplots)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geosphere)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelr)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>world <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">"medium"</span>, <span class="at">returnclass =</span> <span class="st">"sf"</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Source code for map plots</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="fu">source_url</span>(<span class="st">"https://raw.githubusercontent.com/maxlindmark/spatial-metabolic-index/main/R/functions/map-plot.R"</span>)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Source code for lon lat to utm</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="fu">source_url</span>(<span class="st">"https://raw.githubusercontent.com/maxlindmark/spatial-metabolic-index/main/R/functions/lon-lat-utm.R"</span>)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_plot</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="read-data" class="level2">
<h2 class="anchored" data-anchor-id="read-data">Read data</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data were read in from getDATRAS on 2022.09.06</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Read HH data</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># bits_hh &lt;- getDATRAS(record = "HH", survey = "BITS", years = 1991:2020, quarters = c(1, 4))</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># write.csv(bits_hh, "data/DATRAS_exchange/bits_hh.csv")</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>bits_hh <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/DATRAS_exchange/bits_hh.csv"</span>) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Year <span class="sc">&gt;</span> <span class="dv">1992</span>) <span class="co"># To match covariates</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Read HL data</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># bits_hl &lt;- getDATRAS(record = "HL", survey = "BITS", years = 1991:2020, quarters = c(1, 4))</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># write.csv(bits_hl, "data/DATRAS_exchange/bits_hl.csv")</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>bits_hl <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/DATRAS_exchange/bits_hl.csv"</span>) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Year <span class="sc">&gt;</span> <span class="dv">1992</span>) <span class="co"># To match covariates</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Read CA data</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co"># bits_ca &lt;- getDATRAS(record = "CA", survey = "BITS", years = 1991:2020, quarters = c(1, 4))</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># write.csv(bits_ca, "data/DATRAS_exchange/bits_ca.csv")</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>bits_ca <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/DATRAS_exchange/bits_ca.csv"</span>) <span class="sc">|&gt;</span> <span class="fu">filter</span>(Year <span class="sc">&gt;</span> <span class="dv">1992</span>) <span class="co"># To match covariates</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Read gear standardization data </span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>sweep <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/gear_standardization/sweep_9116.csv"</span>, <span class="at">sep =</span> <span class="st">";"</span>, <span class="at">dec =</span> <span class="st">","</span>, <span class="at">fileEncoding =</span> <span class="st">"latin1"</span>)</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>sweep <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/gear_standardization/sweep_9118_ml.csv"</span>, <span class="at">sep =</span> <span class="st">";"</span>, <span class="at">fileEncoding =</span> <span class="st">"latin1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="standardize-catch-data" class="level2">
<h2 class="anchored" data-anchor-id="standardize-catch-data">Standardize catch data</h2>
<section id="standardize-ships" class="level4">
<h4 class="anchored" data-anchor-id="standardize-ships">Standardize ships</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Before creating a a new ID, make sure that countries and ships names use the same format</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(sweep<span class="sc">$</span>Ship))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "26HF" "ATL"  "ATLD" "BAL"  "BALL" "BPE"  "CEV"  "CLP"  "CLV"  "COML"</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] "DAN2" "DANS" "DAR"  "GDY"  "HAF"  "KOH"  "KOOT" "MON"  "MONL" "SOL" </span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [21] "SOL2" "VSH"  "ZBA"</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(bits_hh<span class="sc">$</span>Ship))</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "06JR" "06S1" "06SL" "26D4" "26HF" "26HI" "67BC" "77AR" "77MA" "77SE"</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] "AA36" "ESLF" "ESOR" "ESTM" "LAIZ" "LTDA" "RUEK" "RUJB" "RUNT" "RUS6"</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(bits_hl<span class="sc">$</span>Ship))</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "06JR" "06S1" "06SL" "26D4" "26HF" "26HI" "67BC" "77AR" "77MA" "77SE"</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [11] "AA36" "ESLF" "ESOR" "ESTM" "LAIZ" "LTDA" "RUEK" "RUJB" "RUNT" "RUS6"</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Change back to the old Ship name standard...</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co"># https://vocab.ices.dk/?ref=315</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co"># https://vocab.ices.dk/?ref=315</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Assumptions:</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co"># SOL is Solea on ICES links above, and SOL1 is the older one of the two SOLs (1 and 2)</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co"># DAN is Dana</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co"># sweep |&gt; filter(Ship == "DANS") |&gt; distinct(Year, Country)</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co"># sweep |&gt; filter(Ship == "DAN2") |&gt; distinct(Year)</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co"># bits_hh |&gt; filter(Ship == "67BC") |&gt; distinct(Year, Country)</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co"># sweep |&gt; filter(Ship == "DAN2") |&gt; distinct(Year)</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co"># bits_hh |&gt; filter(Ship == "26D4") |&gt; distinct(Year) # Strange that 26DF doesn't extend far back. Which ship did the Danes use? Ok, I have no Danish data that old.</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co"># bits_hh |&gt; filter(Country == "DK") |&gt; distinct(Year)</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>bits_hh <span class="ot">&lt;-</span> bits_hh <span class="sc">|&gt;</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Ship2 =</span> <span class="fu">fct_recode</span>(Ship,</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"SOL"</span> <span class="ot">=</span> <span class="st">"06S1"</span>, </span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"SOL2"</span> <span class="ot">=</span> <span class="st">"06SL"</span>,</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"DAN2"</span> <span class="ot">=</span> <span class="st">"26D4"</span>,</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"HAF"</span> <span class="ot">=</span> <span class="st">"26HF"</span>,</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"HAF"</span> <span class="ot">=</span> <span class="st">"26HI"</span>,</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"HAF"</span> <span class="ot">=</span> <span class="st">"67BC"</span>,</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"BAL"</span> <span class="ot">=</span> <span class="st">"67BC"</span>,</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"ARG"</span> <span class="ot">=</span> <span class="st">"77AR"</span>,</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"77SE"</span> <span class="ot">=</span> <span class="st">"77SE"</span>,</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"AA36"</span> <span class="ot">=</span> <span class="st">"AA36"</span>,</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"KOOT"</span> <span class="ot">=</span> <span class="st">"ESLF"</span>,</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"KOH"</span> <span class="ot">=</span> <span class="st">"ESTM"</span>,</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"DAR"</span> <span class="ot">=</span> <span class="st">"LTDA"</span>,</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"ATLD"</span> <span class="ot">=</span> <span class="st">"RUJB"</span>,</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"ATL"</span> <span class="ot">=</span> <span class="st">"RUNT"</span>), </span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">Ship2 =</span> <span class="fu">as.character</span>(Ship2)) <span class="sc">|&gt;</span> </span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Ship3 =</span> <span class="fu">ifelse</span>(Country <span class="sc">==</span> <span class="st">"LV"</span> <span class="sc">&amp;</span> Ship2 <span class="sc">==</span> <span class="st">"BAL"</span>, <span class="st">"BALL"</span>, Ship2))</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>bits_hl <span class="ot">&lt;-</span> bits_hl <span class="sc">|&gt;</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Ship2 =</span> <span class="fu">fct_recode</span>(Ship,</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"SOL"</span> <span class="ot">=</span> <span class="st">"06S1"</span>, </span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"SOL2"</span> <span class="ot">=</span> <span class="st">"06SL"</span>,</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"DAN2"</span> <span class="ot">=</span> <span class="st">"26D4"</span>,</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"HAF"</span> <span class="ot">=</span> <span class="st">"26HF"</span>,</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"HAF"</span> <span class="ot">=</span> <span class="st">"26HI"</span>,</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"HAF"</span> <span class="ot">=</span> <span class="st">"67BC"</span>,</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"BAL"</span> <span class="ot">=</span> <span class="st">"67BC"</span>,</span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"ARG"</span> <span class="ot">=</span> <span class="st">"77AR"</span>,</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"77SE"</span> <span class="ot">=</span> <span class="st">"77SE"</span>,</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"AA36"</span> <span class="ot">=</span> <span class="st">"AA36"</span>,</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"KOOT"</span> <span class="ot">=</span> <span class="st">"ESLF"</span>,</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"KOH"</span> <span class="ot">=</span> <span class="st">"ESTM"</span>,</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"DAR"</span> <span class="ot">=</span> <span class="st">"LTDA"</span>,</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"ATLD"</span> <span class="ot">=</span> <span class="st">"RUJB"</span>,</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"ATL"</span> <span class="ot">=</span> <span class="st">"RUNT"</span>), </span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>         <span class="at">Ship2 =</span> <span class="fu">as.character</span>(Ship2)) <span class="sc">|&gt;</span> </span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Ship3 =</span> <span class="fu">ifelse</span>(Country <span class="sc">==</span> <span class="st">"LV"</span> <span class="sc">&amp;</span> Ship2 <span class="sc">==</span> <span class="st">"BAL"</span>, <span class="st">"BALL"</span>, Ship2))</span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>bits_ca <span class="ot">&lt;-</span> bits_ca <span class="sc">|&gt;</span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Ship2 =</span> <span class="fu">fct_recode</span>(Ship,</span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"SOL"</span> <span class="ot">=</span> <span class="st">"06S1"</span>, </span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"SOL2"</span> <span class="ot">=</span> <span class="st">"06SL"</span>,</span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"DAN2"</span> <span class="ot">=</span> <span class="st">"26D4"</span>,</span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"HAF"</span> <span class="ot">=</span> <span class="st">"26HF"</span>,</span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"HAF"</span> <span class="ot">=</span> <span class="st">"26HI"</span>,</span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"HAF"</span> <span class="ot">=</span> <span class="st">"67BC"</span>,</span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"BAL"</span> <span class="ot">=</span> <span class="st">"67BC"</span>,</span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"ARG"</span> <span class="ot">=</span> <span class="st">"77AR"</span>,</span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"77SE"</span> <span class="ot">=</span> <span class="st">"77SE"</span>,</span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"AA36"</span> <span class="ot">=</span> <span class="st">"AA36"</span>,</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"KOOT"</span> <span class="ot">=</span> <span class="st">"ESLF"</span>,</span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"KOH"</span> <span class="ot">=</span> <span class="st">"ESTM"</span>,</span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"DAR"</span> <span class="ot">=</span> <span class="st">"LTDA"</span>,</span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"ATLD"</span> <span class="ot">=</span> <span class="st">"RUJB"</span>,</span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"ATL"</span> <span class="ot">=</span> <span class="st">"RUNT"</span>), </span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>         <span class="at">Ship2 =</span> <span class="fu">as.character</span>(Ship2)) <span class="sc">|&gt;</span> </span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Ship3 =</span> <span class="fu">ifelse</span>(Country <span class="sc">==</span> <span class="st">"LV"</span> <span class="sc">&amp;</span> Ship2 <span class="sc">==</span> <span class="st">"BAL"</span>, <span class="st">"BALL"</span>, Ship2))</span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Ok, which ships are missing in the exchange data?</span></span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(bits_hh<span class="sc">$</span>Ship3)[<span class="sc">!</span><span class="fu">unique</span>(bits_hh<span class="sc">$</span>Ship3) <span class="sc">%in%</span> <span class="fu">unique</span>(sweep<span class="sc">$</span>Ship)]</span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "LAIZ" "AA36" "06JR" "ARG"  "RUEK" "RUS6" "77MA" "77SE" "ESOR"</span></span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a><span class="co"># Swedish Ships and unidentified ships are NOT in the Sweep data</span></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(sweep<span class="sc">$</span>Ship3)[<span class="sc">!</span><span class="fu">unique</span>(sweep<span class="sc">$</span>Ship3) <span class="sc">%in%</span> <span class="fu">unique</span>(bits_hh<span class="sc">$</span>Ship3)]</span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; NULL</span></span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a><span class="co"># But all Sweep Ships are in the exchange data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="standardize-countries" class="level4">
<h4 class="anchored" data-anchor-id="standardize-countries">Standardize countries</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now check which country codes are used</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(sweep<span class="sc">$</span>Country))</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "DEN" "EST" "GFR" "LAT" "LTU" "POL" "RUS" "SWE"</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(bits_hh<span class="sc">$</span>Country))</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "DE" "DK" "EE" "LT" "LV" "PL" "RU" "SE"</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># https://www.nationsonline.org/oneworld/country_code_list.htm#E</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>bits_hh <span class="ot">&lt;-</span> bits_hh <span class="sc">|&gt;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Country =</span> <span class="fu">fct_recode</span>(Country,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"DEN"</span> <span class="ot">=</span> <span class="st">"DK"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"EST"</span> <span class="ot">=</span> <span class="st">"EE"</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"GFR"</span> <span class="ot">=</span> <span class="st">"DE"</span>,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"LAT"</span> <span class="ot">=</span> <span class="st">"LV"</span>,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"LTU"</span> <span class="ot">=</span> <span class="st">"LT"</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"POL"</span> <span class="ot">=</span> <span class="st">"PL"</span>,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"RUS"</span> <span class="ot">=</span> <span class="st">"RU"</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"SWE"</span> <span class="ot">=</span> <span class="st">"SE"</span>),</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">Country =</span> <span class="fu">as.character</span>(Country))</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>bits_hl <span class="ot">&lt;-</span> bits_hl <span class="sc">|&gt;</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Country =</span> <span class="fu">fct_recode</span>(Country,</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"DEN"</span> <span class="ot">=</span> <span class="st">"DK"</span>,</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"EST"</span> <span class="ot">=</span> <span class="st">"EE"</span>,</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"GFR"</span> <span class="ot">=</span> <span class="st">"DE"</span>,</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"LAT"</span> <span class="ot">=</span> <span class="st">"LV"</span>,</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"LTU"</span> <span class="ot">=</span> <span class="st">"LT"</span>,</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"POL"</span> <span class="ot">=</span> <span class="st">"PL"</span>,</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"RUS"</span> <span class="ot">=</span> <span class="st">"RU"</span>,</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"SWE"</span> <span class="ot">=</span> <span class="st">"SE"</span>),</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">Country =</span> <span class="fu">as.character</span>(Country))</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>bits_ca <span class="ot">&lt;-</span> bits_ca <span class="sc">|&gt;</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Country =</span> <span class="fu">fct_recode</span>(Country,</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"DEN"</span> <span class="ot">=</span> <span class="st">"DK"</span>,</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"EST"</span> <span class="ot">=</span> <span class="st">"EE"</span>,</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"GFR"</span> <span class="ot">=</span> <span class="st">"DE"</span>,</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"LAT"</span> <span class="ot">=</span> <span class="st">"LV"</span>,</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"LTU"</span> <span class="ot">=</span> <span class="st">"LT"</span>,</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"POL"</span> <span class="ot">=</span> <span class="st">"PL"</span>,</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"RUS"</span> <span class="ot">=</span> <span class="st">"RU"</span>,</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"SWE"</span> <span class="ot">=</span> <span class="st">"SE"</span>),</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>         <span class="at">Country =</span> <span class="fu">as.character</span>(Country))</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Gear? Are they the same?</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(bits_hh<span class="sc">$</span>Gear))</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "DT"  "ESB" "EXP" "FOT" "GOV" "GRT" "H20" "HAK" "LBT" "LPT" "P20" "PEL"</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] "SON" "TVL" "TVS"</span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(bits_hl<span class="sc">$</span>Gear))</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "DT"  "ESB" "EXP" "FOT" "GOV" "GRT" "H20" "HAK" "LBT" "P20" "PEL" "SON"</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] "TVL" "TVS"</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(sweep<span class="sc">$</span>Gear))</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "CAM" "CHP" "DT"  "EGY" "ESB" "EXP" "GRT" "H20" "HAK" "LBT" "LPT" "P20"</span></span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] "PEL" "SON" "TVL" "TVS"</span></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Which gears are NOT in the sweep data?</span></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(bits_hl<span class="sc">$</span>Gear)[<span class="sc">!</span><span class="fu">unique</span>(bits_hl<span class="sc">$</span>Gear) <span class="sc">%in%</span> <span class="fu">unique</span>(sweep<span class="sc">$</span>Gear)] </span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "GOV" "FOT"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-a-simple-haul-id-that-works-across-all-exchange-data" class="level4">
<h4 class="anchored" data-anchor-id="create-a-simple-haul-id-that-works-across-all-exchange-data">Create a simple haul ID that works across all exchange data</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create ID column</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>bits_ca <span class="ot">&lt;-</span> bits_ca <span class="sc">|&gt;</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">IDx =</span> <span class="fu">paste</span>(Year, Quarter, Country, Ship, Gear, StNo, HaulNo, <span class="at">sep =</span> <span class="st">"."</span>))</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>bits_hl <span class="ot">&lt;-</span> bits_hl <span class="sc">|&gt;</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">IDx =</span> <span class="fu">paste</span>(Year, Quarter, Country, Ship, Gear, StNo, HaulNo, <span class="at">sep =</span> <span class="st">"."</span>))</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>bits_hh <span class="ot">&lt;-</span> bits_hh <span class="sc">|&gt;</span> </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">IDx =</span> <span class="fu">paste</span>(Year, Quarter, Country, Ship, Gear, StNo, HaulNo, <span class="at">sep =</span> <span class="st">"."</span>))</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Works like a haul-id</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>bits_hh <span class="sc">|&gt;</span> <span class="fu">group_by</span>(IDx) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="fu">distinct</span>(n)</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       n</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;int&gt;</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-the-same-unique-haul-id-in-the-cpue-data-that-i-have-in-the-sweep-file" class="level4">
<h4 class="anchored" data-anchor-id="create-the-same-unique-haul-id-in-the-cpue-data-that-i-have-in-the-sweep-file">Create the same unique haul-ID in the cpue data that I have in the sweep-file</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>bits_hl <span class="ot">&lt;-</span> bits_hl <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">haul.id =</span> <span class="fu">paste</span>(Year, Quarter, Country, Ship3, Gear, StNo, HaulNo, <span class="at">sep =</span> <span class="st">":"</span>)) </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>bits_hh <span class="ot">&lt;-</span> bits_hh <span class="sc">|&gt;</span> </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">haul.id =</span> <span class="fu">paste</span>(Year, Quarter, Country, Ship3, Gear, StNo, HaulNo, <span class="at">sep =</span> <span class="st">":"</span>)) </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>bits_hh <span class="sc">|&gt;</span> <span class="fu">group_by</span>(haul.id) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="fu">distinct</span>(n)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       n</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;int&gt;</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="clean-datras-exchange-data" class="level4">
<h4 class="anchored" data-anchor-id="clean-datras-exchange-data">Clean DATRAS EXCHANGE data</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select just valid, additional and no oxygen hauls</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>bits_hh <span class="ot">&lt;-</span> bits_hh <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter(!Country == "SWE") |&gt; # I'll deal with Sweden later...</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(HaulVal <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"A"</span>,<span class="st">"N"</span>,<span class="st">"V"</span>))</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Add ICES rectangle</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>bits_hh<span class="sc">$</span>Rect <span class="ot">&lt;-</span> mapplots<span class="sc">::</span><span class="fu">ices.rect2</span>(<span class="at">lon =</span> bits_hh<span class="sc">$</span>ShootLong, <span class="at">lat =</span> bits_hh<span class="sc">$</span>ShootLat)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Add ICES subdivisions</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>shape <span class="ot">&lt;-</span> <span class="fu">shapefile</span>(<span class="st">"data/ICES_StatRec_mapto_ICES_Areas/StatRec_map_Areas_Full_20170124.shp"</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>pts <span class="ot">&lt;-</span> <span class="fu">SpatialPoints</span>(<span class="fu">cbind</span>(bits_hh<span class="sc">$</span>ShootLong, bits_hh<span class="sc">$</span>ShootLat), </span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>                     <span class="at">proj4string =</span> <span class="fu">CRS</span>(<span class="fu">proj4string</span>(shape)))</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>bits_hh<span class="sc">$</span>sub_div <span class="ot">&lt;-</span> <span class="fu">over</span>(pts, shape)<span class="sc">$</span>Area_27</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename subdivisions to the more common names and do some more filtering (by sub div and area)</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(bits_hh<span class="sc">$</span>sub_div))</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "3.a.20"   "3.a.21"   "3.b.23"   "3.c.22"   "3.d.24"   "3.d.25"  </span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] "3.d.26"   "3.d.27"   "3.d.28.1" "3.d.28.2" "3.d.29"</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>bits_hh <span class="ot">&lt;-</span> bits_hh <span class="sc">|&gt;</span> </span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sub_div =</span> <span class="fu">factor</span>(sub_div),</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">sub_div =</span> <span class="fu">fct_recode</span>(sub_div,</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"20"</span> <span class="ot">=</span> <span class="st">"3.a.20"</span>,</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"21"</span> <span class="ot">=</span> <span class="st">"3.a.21"</span>,</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"22"</span> <span class="ot">=</span> <span class="st">"3.c.22"</span>,</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"23"</span> <span class="ot">=</span> <span class="st">"3.b.23"</span>,</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"24"</span> <span class="ot">=</span> <span class="st">"3.d.24"</span>,</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"25"</span> <span class="ot">=</span> <span class="st">"3.d.25"</span>,</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"26"</span> <span class="ot">=</span> <span class="st">"3.d.26"</span>,</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"27"</span> <span class="ot">=</span> <span class="st">"3.d.27"</span>,</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"28"</span> <span class="ot">=</span> <span class="st">"3.d.28.1"</span>,</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"28"</span> <span class="ot">=</span> <span class="st">"3.d.28.2"</span>,</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"29"</span> <span class="ot">=</span> <span class="st">"3.d.29"</span>),</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">sub_div =</span> <span class="fu">as.character</span>(sub_div)) </span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Now add the fishing line information from the sweep file (we need that later</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a><span class="co"># to standardize based on gear geometry). We add in the the HH data and then</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a><span class="co"># transfer it to the other exchange data files when left_joining.</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Check which Fishing lines I have in the sweep data:</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>fishing_line <span class="ot">&lt;-</span> sweep <span class="sc">|&gt;</span> <span class="fu">group_by</span>(Gear) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(Fishing.line)</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>bits_hh <span class="ot">&lt;-</span> <span class="fu">left_join</span>(bits_hh, fishing_line)</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a><span class="co"># sweep |&gt; group_by(Gear) |&gt; distinct(Fishing.line)</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a><span class="co"># bits_hh |&gt; group_by(Gear) |&gt; distinct(Fishing.line)</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>bits_hh<span class="sc">$</span>Fishing.line <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(bits_hh<span class="sc">$</span>Fishing.line)</span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Which gears do now have fishing line?</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>bits_hh<span class="sc">$</span>Fishing.line[<span class="fu">is.na</span>(bits_hh<span class="sc">$</span>Fishing.line)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">9</span></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>bits_hh <span class="sc">|&gt;</span> <span class="fu">filter</span>(Fishing.line <span class="sc">==</span> <span class="sc">-</span><span class="dv">9</span>) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(Gear)</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Gear</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  GRT</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  FOT</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  GOV</span></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   DT</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  LPT</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  ESB</span></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  EXP</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  HAK</span></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a><span class="co"># 1  GRT</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a><span class="co"># 2  CAM</span></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a><span class="co"># 3  EXP</span></span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a><span class="co"># 4  FOT</span></span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a><span class="co"># 5  GOV</span></span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a><span class="co"># 6  EGY</span></span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a><span class="co"># 7   DT</span></span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a><span class="co"># 8  ESB</span></span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a><span class="co"># 9  HAK</span></span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a><span class="co"># FROM the index files (Orio, "Research Östersjön 2")</span></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a><span class="co"># FOT has 83</span></span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a><span class="co"># GOV has 160</span></span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a><span class="co"># ESB ??</span></span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a><span class="co"># GRT ??</span></span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a><span class="co"># Rest are unknown and likely not used by Swedish data (therefore their correction</span></span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a><span class="co"># factors my be in the sweep file)</span></span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a><span class="co"># Add these values:</span></span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>bits_hh <span class="ot">&lt;-</span> bits_hh <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Fishing.line =</span> <span class="fu">ifelse</span>(Gear <span class="sc">==</span> <span class="st">"FOT"</span>, <span class="dv">83</span>, Fishing.line))</span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a>bits_hh <span class="ot">&lt;-</span> bits_hh <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Fishing.line =</span> <span class="fu">ifelse</span>(Gear <span class="sc">==</span> <span class="st">"GOV"</span>, <span class="dv">160</span>, Fishing.line))</span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a><span class="co"># Now select the hauls in the HH data when subsetting the HL data</span></span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a>bits_hl <span class="ot">&lt;-</span> bits_hl <span class="sc">|&gt;</span></span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(haul.id <span class="sc">%in%</span> bits_hh<span class="sc">$</span>haul.id)</span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a><span class="co"># Match columns from the HH data to the HL and CA data</span></span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(bits_hh<span class="sc">$</span>sub_div))</span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "20" "21" "22" "23" "24" "25" "26" "27" "28" "29"</span></span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">colnames</span>(bits_hh))</span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] "BotCurDir"         "BotCurSpeed"       "BotSal"           </span></span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [4] "BotTemp"           "Buoyancy"          "BySpecRecCode"    </span></span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [7] "CodendMesh"        "Country"           "DataType"         </span></span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [10] "DateofCalculation" "Day"               "DayNight"         </span></span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [13] "Depth"             "DepthStratum"      "Distance"         </span></span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16] "DoorSpread"        "DoorSurface"       "DoorType"         </span></span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [19] "DoorWgt"           "Fishing.line"      "Gear"             </span></span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [22] "GearEx"            "GroundSpeed"       "haul.id"          </span></span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [25] "HaulDur"           "HaulLat"           "HaulLong"         </span></span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [28] "HaulNo"            "HaulVal"           "HydroStNo"        </span></span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [31] "IDx"               "KiteDim"           "MaxTrawlDepth"    </span></span>
<span id="cb7-102"><a href="#cb7-102" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [34] "MinTrawlDepth"     "Month"             "Netopening"       </span></span>
<span id="cb7-103"><a href="#cb7-103" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [37] "PelSampType"       "Quarter"           "RecordType"       </span></span>
<span id="cb7-104"><a href="#cb7-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [40] "Rect"              "Rigging"           "SecchiDepth"      </span></span>
<span id="cb7-105"><a href="#cb7-105" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [43] "Ship"              "Ship2"             "Ship3"            </span></span>
<span id="cb7-106"><a href="#cb7-106" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [46] "ShootLat"          "ShootLong"         "SpeedWater"       </span></span>
<span id="cb7-107"><a href="#cb7-107" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [49] "StatRec"           "StdSpecRecCode"    "StNo"             </span></span>
<span id="cb7-108"><a href="#cb7-108" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [52] "sub_div"           "SurCurDir"         "SurCurSpeed"      </span></span>
<span id="cb7-109"><a href="#cb7-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [55] "SurSal"            "SurTemp"           "Survey"           </span></span>
<span id="cb7-110"><a href="#cb7-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [58] "SweepLngt"         "SwellDir"          "SwellHeight"      </span></span>
<span id="cb7-111"><a href="#cb7-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [61] "ThClineDepth"      "ThermoCline"       "Tickler"          </span></span>
<span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [64] "TidePhase"         "TideSpeed"         "TimeShot"         </span></span>
<span id="cb7-113"><a href="#cb7-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [67] "TowDir"            "Turbidity"         "WarpDen"          </span></span>
<span id="cb7-114"><a href="#cb7-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [70] "Warpdia"           "Warplngt"          "WgtGroundRope"    </span></span>
<span id="cb7-115"><a href="#cb7-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [73] "WindDir"           "WindSpeed"         "WingSpread"       </span></span>
<span id="cb7-116"><a href="#cb7-116" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [76] "X"                 "Year"</span></span>
<span id="cb7-117"><a href="#cb7-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-118"><a href="#cb7-118" aria-hidden="true" tabindex="-1"></a><span class="co"># No NAs for the variables going in to the stomach haul ID</span></span>
<span id="cb7-119"><a href="#cb7-119" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(<span class="fu">is.na</span>(bits_hh <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(Year, Quarter, Month, Country, Rect, HaulNo)))</span>
<span id="cb7-120"><a href="#cb7-120" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       Year Quarter Month Country  Rect HaulNo</span></span>
<span id="cb7-121"><a href="#cb7-121" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1,] FALSE   FALSE FALSE   FALSE FALSE  FALSE</span></span>
<span id="cb7-122"><a href="#cb7-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-123"><a href="#cb7-123" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(bits_hh<span class="sc">$</span>Country)</span>
<span id="cb7-124"><a href="#cb7-124" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "LAT" "POL" "DEN" "GFR" "SWE" "RUS" "EST" "LTU"</span></span>
<span id="cb7-125"><a href="#cb7-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-126"><a href="#cb7-126" aria-hidden="true" tabindex="-1"></a><span class="co"># MAKE SURE THE COUNTRY CODE IS THE SAME! FOR NOW I DON*T USE COUNTRY 2</span></span>
<span id="cb7-127"><a href="#cb7-127" aria-hidden="true" tabindex="-1"></a>bits_hh <span class="ot">&lt;-</span> bits_hh <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Country2 =</span> <span class="cn">NA</span>,</span>
<span id="cb7-128"><a href="#cb7-128" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Country2 =</span> <span class="fu">ifelse</span>(Country <span class="sc">==</span> <span class="st">"LAT"</span>, <span class="st">"LV"</span>, Country2),</span>
<span id="cb7-129"><a href="#cb7-129" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Country2 =</span> <span class="fu">ifelse</span>(Country <span class="sc">==</span> <span class="st">"POL"</span>, <span class="st">"PL"</span>, Country2),</span>
<span id="cb7-130"><a href="#cb7-130" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Country2 =</span> <span class="fu">ifelse</span>(Country <span class="sc">==</span> <span class="st">"SWE"</span>, <span class="st">"SE"</span>, Country2),</span>
<span id="cb7-131"><a href="#cb7-131" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Country2 =</span> <span class="fu">ifelse</span>(Country <span class="sc">==</span> <span class="st">"DEN"</span>, <span class="st">"DK"</span>, Country2))</span>
<span id="cb7-132"><a href="#cb7-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-133"><a href="#cb7-133" aria-hidden="true" tabindex="-1"></a>bits_hh_merge <span class="ot">&lt;-</span> bits_hh <span class="sc">|&gt;</span> </span>
<span id="cb7-134"><a href="#cb7-134" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id_haul_stomach =</span> <span class="fu">paste</span>(Year, Quarter, Month, Country, Rect, HaulNo, <span class="at">sep =</span> <span class="st">"."</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb7-135"><a href="#cb7-135" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(sub_div, Rect, HaulVal, StdSpecRecCode, BySpecRecCode, Fishing.line, Month,</span>
<span id="cb7-136"><a href="#cb7-136" aria-hidden="true" tabindex="-1"></a>                DataType, HaulDur, GroundSpeed, haul.id, IDx, ShootLat, ShootLong, id_haul_stomach)</span>
<span id="cb7-137"><a href="#cb7-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-138"><a href="#cb7-138" aria-hidden="true" tabindex="-1"></a>bits_hl <span class="ot">&lt;-</span> <span class="fu">left_join</span>(dplyr<span class="sc">::</span><span class="fu">select</span>(bits_hl, <span class="sc">-</span>haul.id), bits_hh_merge, <span class="at">by =</span> <span class="st">"IDx"</span>)</span>
<span id="cb7-139"><a href="#cb7-139" aria-hidden="true" tabindex="-1"></a>bits_ca <span class="ot">&lt;-</span> <span class="fu">left_join</span>(bits_ca, bits_hh_merge, <span class="at">by =</span> <span class="st">"IDx"</span>)</span>
<span id="cb7-140"><a href="#cb7-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-141"><a href="#cb7-141" aria-hidden="true" tabindex="-1"></a><span class="co"># Now filter the subdivisions I want from all data sets</span></span>
<span id="cb7-142"><a href="#cb7-142" aria-hidden="true" tabindex="-1"></a>bits_hh <span class="ot">&lt;-</span> bits_hh <span class="sc">|&gt;</span> <span class="fu">filter</span>(sub_div <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">24</span>, <span class="dv">25</span>, <span class="dv">26</span>, <span class="dv">27</span>, <span class="dv">28</span>))</span>
<span id="cb7-143"><a href="#cb7-143" aria-hidden="true" tabindex="-1"></a>bits_hl <span class="ot">&lt;-</span> bits_hl <span class="sc">|&gt;</span> <span class="fu">filter</span>(sub_div <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">24</span>, <span class="dv">25</span>, <span class="dv">26</span>, <span class="dv">27</span>, <span class="dv">28</span>))</span>
<span id="cb7-144"><a href="#cb7-144" aria-hidden="true" tabindex="-1"></a>bits_ca <span class="ot">&lt;-</span> bits_ca <span class="sc">|&gt;</span> <span class="fu">filter</span>(sub_div <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">24</span>, <span class="dv">25</span>, <span class="dv">26</span>, <span class="dv">27</span>, <span class="dv">28</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>bits_hl <span class="sc">|&gt;</span> <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2016</span> <span class="sc">&amp;</span> Quarter <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> Month <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> Country <span class="sc">==</span> <span class="st">"SWE"</span> <span class="sc">&amp;</span> Rect <span class="sc">==</span> <span class="st">"39G4"</span>) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(HaulNo)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter: removed 820,236 rows (&gt;99%), 144 rows remaining</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; distinct: removed 143 rows (99%), one row remaining</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   HaulNo</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="filter-species" class="level4">
<h4 class="anchored" data-anchor-id="filter-species">Filter species</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>bits_hl <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#filter(SpecCodeType == "W") |&gt; </span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, SpecCode) <span class="sc">|&gt;</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SpecCode) <span class="sc">|&gt;</span> </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">sum</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">2000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> SpecCode,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"126417"</span>, <span class="st">"161722"</span>), <span class="st">"herring"</span>, species),</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"126425"</span>, <span class="st">"161789"</span>), <span class="st">"sprat"</span>, species),</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"126438"</span>, <span class="st">"164758"</span>), <span class="st">"whiting"</span>, species),</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"126450"</span>, <span class="st">"164748"</span>), <span class="st">"fourbeard_rockling"</span>, species),</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"126736"</span>), <span class="st">"smelt"</span>, species),</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"127123"</span>), <span class="st">"eelpout"</span>, species),</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"127139"</span>, <span class="st">"172881"</span>), <span class="st">"dab"</span>, species),</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"127143"</span>, <span class="st">"172902"</span>), <span class="st">"plaice"</span>, species),</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"127141"</span>, <span class="st">"172894"</span>), <span class="st">"flounder"</span>, species),</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"127149"</span>, <span class="st">"616195"</span>), <span class="st">"turbot"</span>, species),</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"127203"</span>), <span class="st">"shorthorn_sculpin"</span>, species),</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"126436"</span>, <span class="st">"164712"</span>), <span class="st">"cod"</span>, species)</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="fu">reorder</span>(species, <span class="fu">desc</span>(n)), n), <span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span> </span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">size =</span> <span class="dv">11</span>)) <span class="sc">+</span> </span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>)</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: 2 grouping variables (haul.id, SpecCode)</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; summarise: now 67,133 rows and 3 columns, one group variable remaining (haul.id)</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ungroup: no grouping variables</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: one grouping variable (SpecCode)</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; summarise: now 186 rows and 2 columns, ungrouped</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter: removed 165 rows (89%), 21 rows remaining</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: new variable 'species' (character) with 12 unique values and 0% NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/test-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Based on this plot, and species we have metabolic index parameters for, we will go ahead with the following species:</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Cod, flounder, plaice, dab</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot some species in space!</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>bits_hl <span class="sc">|&gt;</span> </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="cn">NA</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"126436"</span>, <span class="st">"164712"</span>), <span class="st">"cod"</span>, species),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"127141"</span>, <span class="st">"172894"</span>), <span class="st">"flounder"</span>, species),</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"127143"</span>, <span class="st">"172902"</span>), <span class="st">"plaice"</span>, species),</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="fu">ifelse</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"127139"</span>, <span class="st">"172881"</span>), <span class="st">"dab"</span>, species)) <span class="sc">|&gt;</span> </span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(species) <span class="sc">|&gt;</span> </span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, haul.id, ShootLong, ShootLat, species) <span class="sc">|&gt;</span> </span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">tot_no =</span> <span class="fu">sum</span>(TotalNo)) <span class="sc">|&gt;</span> </span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tot_no <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ShootLong <span class="sc">&gt;</span> <span class="fl">13.5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(ShootLong, ShootLat, <span class="at">color =</span> <span class="fu">log</span>(tot_no))) <span class="sc">+</span> </span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(species <span class="sc">~</span> Year)</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: new variable 'species' (character) with 5 unique values and 45% NA</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; drop_na: removed 365,289 rows (45%), 455,091 rows remaining</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: 5 grouping variables (Year, haul.id, ShootLong, ShootLat, species)</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; summarise: now 28,108 rows and 6 columns, 4 group variables remaining (Year, haul.id, ShootLong, ShootLat)</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter (grouped): removed 6 rows (&lt;1%), 28,102 rows remaining</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter (grouped): removed 3,468 rows (12%), 24,634 rows remaining</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/test-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>hlcod <span class="ot">&lt;-</span> bits_hl <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"126436"</span>, <span class="st">"164712"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Species =</span> <span class="st">"Gadus morhua"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>hlfle <span class="ot">&lt;-</span> bits_hl <span class="sc">|&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"127141"</span>, <span class="st">"172894"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Species =</span> <span class="st">"Platichthys flesus"</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>hlpla <span class="ot">&lt;-</span> bits_hl <span class="sc">|&gt;</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"127143"</span>, <span class="st">"172902"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Species =</span> <span class="st">"Pleuronectes platessa"</span>)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>hldab <span class="ot">&lt;-</span> bits_hl <span class="sc">|&gt;</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"127139"</span>, <span class="st">"172881"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Species =</span> <span class="st">"Limanda limanda"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="prepare-to-add-0-catches" class="level4">
<h4 class="anchored" data-anchor-id="prepare-to-add-0-catches">Prepare to add 0 catches</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find common columns in the HH and HL data (here already subset by species)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>comcol <span class="ot">&lt;-</span> <span class="fu">intersect</span>(<span class="fu">names</span>(hlcod), <span class="fu">names</span>(bits_hh))</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># What is the proportion of zero-catch hauls?</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Here we don't have zero catches</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>hlcod <span class="sc">|&gt;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(HLNoAtLngt)) <span class="sc">|&gt;</span> </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(zero_catch)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   zero_catch</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;     </span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 N</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Cod: Add 0s and then remove lines with SpecVal = 0 (first NA because we don't have a match in the HH, then make them 0 later)</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>hlcod0 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(hlcod, bits_hh[, comcol], <span class="at">by =</span> comcol)</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="co"># No zeroes yet</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>hlcod0 <span class="sc">|&gt;</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(HLNoAtLngt)) <span class="sc">|&gt;</span> </span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(zero_catch) </span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   zero_catch</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;lgl&gt;     </span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 NA</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>hlcod0<span class="sc">$</span>SpecVal[<span class="fu">is.na</span>(hlcod0<span class="sc">$</span>SpecVal)] <span class="ot">&lt;-</span> <span class="st">"zeroCatch"</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>hlcod0<span class="sc">$</span>SpecVal <span class="ot">&lt;-</span> <span class="fu">factor</span>(hlcod0<span class="sc">$</span>SpecVal)</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>hlcod0 <span class="ot">&lt;-</span> hlcod0 <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span>SpecVal <span class="sc">==</span> <span class="st">"0"</span>)</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Add species again after merge</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>hlcod0<span class="sc">$</span>Species <span class="ot">&lt;-</span> <span class="st">"Gadus morhua"</span></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Flounder: Add 0s, remove them if StdSpecRecCode !=1 and then remove lines with SpecVal = 0</span></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>hlfle0 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(hlfle, bits_hh[, comcol], <span class="at">by =</span> comcol)</span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>hlfle0 <span class="ot">&lt;-</span> hlfle0[<span class="sc">!</span>(<span class="fu">is.na</span>(hlfle0<span class="sc">$</span>Species) <span class="sc">&amp;</span> hlfle0<span class="sc">$</span>StdSpecRecCode <span class="sc">!=</span> <span class="dv">1</span>), ] </span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>hlfle0<span class="sc">$</span>SpecVal[<span class="fu">is.na</span>(hlfle0<span class="sc">$</span>SpecVal)] <span class="ot">&lt;-</span> <span class="st">"zeroCatch"</span></span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>hlfle0<span class="sc">$</span>SpecVal <span class="ot">&lt;-</span> <span class="fu">factor</span>(hlfle0<span class="sc">$</span>SpecVal)</span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>hlfle0 <span class="ot">&lt;-</span> hlfle0 <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span>SpecVal <span class="sc">==</span> <span class="st">"0"</span>)</span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>hlfle0<span class="sc">$</span>Species<span class="ot">&lt;-</span><span class="st">"Platichthys flesus"</span></span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Plaice: Add 0s, remove them if StdSpecRecCode !=1 and then remove lines with SpecVal = 0</span></span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a>hlpla0 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(hlpla, bits_hh[, comcol], <span class="at">by =</span> comcol)</span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a>hlpla0 <span class="ot">&lt;-</span> hlpla0[<span class="sc">!</span>(<span class="fu">is.na</span>(hlpla0<span class="sc">$</span>Species) <span class="sc">&amp;</span> hlpla0<span class="sc">$</span>StdSpecRecCode <span class="sc">!=</span> <span class="dv">1</span>), ] </span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a>hlpla0<span class="sc">$</span>SpecVal[<span class="fu">is.na</span>(hlpla0<span class="sc">$</span>SpecVal)] <span class="ot">&lt;-</span> <span class="st">"zeroCatch"</span></span>
<span id="cb12-59"><a href="#cb12-59" aria-hidden="true" tabindex="-1"></a>hlpla0<span class="sc">$</span>SpecVal <span class="ot">&lt;-</span> <span class="fu">factor</span>(hlpla0<span class="sc">$</span>SpecVal)</span>
<span id="cb12-60"><a href="#cb12-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-61"><a href="#cb12-61" aria-hidden="true" tabindex="-1"></a>hlpla0 <span class="ot">&lt;-</span> hlpla0 <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span>SpecVal <span class="sc">==</span> <span class="st">"0"</span>)</span>
<span id="cb12-62"><a href="#cb12-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-63"><a href="#cb12-63" aria-hidden="true" tabindex="-1"></a>hlpla0<span class="sc">$</span>Species<span class="ot">&lt;-</span><span class="st">"Pleuronectes platessa"</span></span>
<span id="cb12-64"><a href="#cb12-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-65"><a href="#cb12-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Dab: Add 0s, remove them if StdSpecRecCode !=1 and then remove lines with SpecVal = 0</span></span>
<span id="cb12-66"><a href="#cb12-66" aria-hidden="true" tabindex="-1"></a>hldab0 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(hldab, bits_hh[, comcol], <span class="at">by =</span> comcol)</span>
<span id="cb12-67"><a href="#cb12-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-68"><a href="#cb12-68" aria-hidden="true" tabindex="-1"></a>hldab0 <span class="ot">&lt;-</span> hldab0[<span class="sc">!</span>(<span class="fu">is.na</span>(hldab0<span class="sc">$</span>Species) <span class="sc">&amp;</span> hldab0<span class="sc">$</span>StdSpecRecCode <span class="sc">!=</span> <span class="dv">1</span>), ] </span>
<span id="cb12-69"><a href="#cb12-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-70"><a href="#cb12-70" aria-hidden="true" tabindex="-1"></a>hldab0<span class="sc">$</span>SpecVal[<span class="fu">is.na</span>(hldab0<span class="sc">$</span>SpecVal)] <span class="ot">&lt;-</span> <span class="st">"zeroCatch"</span></span>
<span id="cb12-71"><a href="#cb12-71" aria-hidden="true" tabindex="-1"></a>hldab0<span class="sc">$</span>SpecVal <span class="ot">&lt;-</span> <span class="fu">factor</span>(hldab0<span class="sc">$</span>SpecVal)</span>
<span id="cb12-72"><a href="#cb12-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-73"><a href="#cb12-73" aria-hidden="true" tabindex="-1"></a>hldab0 <span class="ot">&lt;-</span> hldab0 <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span>SpecVal <span class="sc">==</span> <span class="st">"0"</span>)</span>
<span id="cb12-74"><a href="#cb12-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-75"><a href="#cb12-75" aria-hidden="true" tabindex="-1"></a>hldab0<span class="sc">$</span>Species<span class="ot">&lt;-</span><span class="st">"Limanda limanda"</span></span>
<span id="cb12-76"><a href="#cb12-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-77"><a href="#cb12-77" aria-hidden="true" tabindex="-1"></a><span class="co"># Check number of hauls per species</span></span>
<span id="cb12-78"><a href="#cb12-78" aria-hidden="true" tabindex="-1"></a>hlcod0 <span class="sc">|&gt;</span> <span class="fu">distinct</span>(haul.id) <span class="sc">|&gt;</span> <span class="fu">nrow</span>()</span>
<span id="cb12-79"><a href="#cb12-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 12254</span></span>
<span id="cb12-80"><a href="#cb12-80" aria-hidden="true" tabindex="-1"></a>hlfle0 <span class="sc">|&gt;</span> <span class="fu">distinct</span>(haul.id) <span class="sc">|&gt;</span> <span class="fu">nrow</span>()</span>
<span id="cb12-81"><a href="#cb12-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 12016</span></span>
<span id="cb12-82"><a href="#cb12-82" aria-hidden="true" tabindex="-1"></a>hlpla0 <span class="sc">|&gt;</span> <span class="fu">distinct</span>(haul.id) <span class="sc">|&gt;</span> <span class="fu">nrow</span>()</span>
<span id="cb12-83"><a href="#cb12-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 11547</span></span>
<span id="cb12-84"><a href="#cb12-84" aria-hidden="true" tabindex="-1"></a>hldab0 <span class="sc">|&gt;</span> <span class="fu">distinct</span>(haul.id) <span class="sc">|&gt;</span> <span class="fu">nrow</span>()</span>
<span id="cb12-85"><a href="#cb12-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 11477</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-unstandardized-cpue-for-specval1.-if-datatypec-then-cpueunhlnoatlngt-if-datatyper-then-cpueunhlnoatlngthauldur60-if-datatypes-then-cpueunhlnoatlngtsubfactorhauldur60.-if-specvalzerocatch-then-cpueun0-if-specval4-we-need-to-decide-no-length-measurements-only-total-catch.-note-that-here-we-also-add-zero-cpue-if-specvalzerocatch." class="level4">
<h4 class="anchored" data-anchor-id="create-unstandardized-cpue-for-specval1.-if-datatypec-then-cpueunhlnoatlngt-if-datatyper-then-cpueunhlnoatlngthauldur60-if-datatypes-then-cpueunhlnoatlngtsubfactorhauldur60.-if-specvalzerocatch-then-cpueun0-if-specval4-we-need-to-decide-no-length-measurements-only-total-catch.-note-that-here-we-also-add-zero-cpue-if-specvalzerocatch.">Create (unstandardized) CPUE for <code>SpecVal=1</code>. If <code>DataType=C</code> then <code>CPUEun=HLNoAtLngt</code>, if <code>DataType=R</code> then <code>CPUEun=HLNoAtLngt/(HaulDur/60)</code>, if <code>DataType=S</code> then <code>CPUEun=(HLNoAtLngt*SubFactor)/(HaulDur/60)</code>. If <code>SpecVal="zeroCatch"</code> then <code>CPUEun=0</code>, if <code>SpecVal=4</code> we need to decide (no length measurements, only total catch). Note that here we also add zero CPUE if <code>SpecVal=="zeroCatch"</code>.</h4>
<p>Then I will sum for the same haul the CPUE of the same length classes if they were sampled with different subfactors or with different sexes.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cod</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>hlcod0 <span class="ot">&lt;-</span> hlcod0 <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEun =</span> <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">&amp;</span> DataType <span class="sc">==</span> <span class="st">"C"</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                         HLNoAtLngt,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>                         </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">&amp;</span> DataType <span class="sc">==</span> <span class="st">"R"</span>,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>                                HLNoAtLngt<span class="sc">/</span>(HaulDur<span class="sc">/</span><span class="dv">60</span>),</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>                                </span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>                                <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">&amp;</span> DataType <span class="sc">==</span> <span class="st">"S"</span>,</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>                                       (HLNoAtLngt<span class="sc">*</span>SubFactor)<span class="sc">/</span>(HaulDur<span class="sc">/</span><span class="dv">60</span>),</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>                                       </span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>                                       <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"zeroCatch"</span>, <span class="dv">0</span>, <span class="cn">NA</span>)))))</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot and fill by zero catch</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>hlcod0 <span class="sc">|&gt;</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 10,268 × 3</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    haul.id                     Year CPUEun_haul</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                      &lt;int&gt;       &lt;dbl&gt;</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 1993:1:DEN:DAN2:GRT:105:45  1993          37</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 1993:1:DEN:DAN2:GRT:106:46  1993           2</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 1993:1:DEN:DAN2:GRT:107:47  1993          34</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 1993:1:DEN:DAN2:GRT:108:48  1993           5</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 1993:1:DEN:DAN2:GRT:109:49  1993          24</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 1993:1:DEN:DAN2:GRT:110:50  1993          40</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 1993:1:DEN:DAN2:GRT:112:51  1993          32</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 1993:1:DEN:DAN2:GRT:113:52  1993          12</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 1993:1:DEN:DAN2:GRT:114:53  1993          16</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1993:1:DEN:DAN2:GRT:115:54  1993           9</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 10,258 more rows</span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>hlcod0 <span class="sc">|&gt;</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, zero_catch) <span class="sc">|&gt;</span> </span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> n, <span class="at">fill =</span> zero_catch)) <span class="sc">+</span></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Some rows have multiple rows per combination of length class and haul id (i suppose often because it's split by sex), so we need to sum it up </span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>hlcod0 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="fu">distinct</span>(n)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 1</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       n</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;int&gt;</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     1</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     2</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>hlcod0 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="fu">filter</span>(n <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">20</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         X RecordType Survey Quarter Country Ship Gear SweepLngt GearEx DoorType</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  205495         HL   BITS       1     RUS RUJB  HAK        NA   &lt;NA&gt;       NA</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  300422         HL   BITS       4     EST ESLF  TVS        NA   &lt;NA&gt;       NA</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  300423         HL   BITS       4     EST ESLF  TVS        NA   &lt;NA&gt;       NA</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  325369         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  325375         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  326062         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  326064         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  326065         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  326066         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 326067         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 326068         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12 326069         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13 326071         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14 326073         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15 326077         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16 326079         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17 326080         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18 326082         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19 326083         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20 326085         HL   BITS       4     DEN 26D4  TVL        NA      R       NA</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    StNo HaulNo Year SpecCodeType SpecCode SpecVal  Sex TotalNo CatIdentifier</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  &lt;NA&gt;     10 1998            T   164712       4 &lt;NA&gt;      -9             1</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    14     14 2000            T   164712       1    M       2             1</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    14     14 2000            T   164712       1    F       4             1</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    63     31 2001            T   164712       1    M       5             1</span></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    63     31 2001            T   164712       1    F       7             1</span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    83     37 2001            T   164712       1    M      21             1</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7    83     37 2001            T   164712       1    M      21             1</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8    83     37 2001            T   164712       1    M      21             1</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9    83     37 2001            T   164712       1    M      21             1</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10   83     37 2001            T   164712       1    M      21             1</span></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11   83     37 2001            T   164712       1    M      21             1</span></span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12   83     37 2001            T   164712       1    M      21             1</span></span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13   83     37 2001            T   164712       1    M      21             1</span></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14   83     37 2001            T   164712       1    M      21             1</span></span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15   83     37 2001            T   164712       1    F      42             1</span></span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16   83     37 2001            T   164712       1    F      42             1</span></span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17   83     37 2001            T   164712       1    F      42             1</span></span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18   83     37 2001            T   164712       1    F      42             1</span></span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19   83     37 2001            T   164712       1    F      42             1</span></span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20   83     37 2001            T   164712       1    F      42             1</span></span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    NoMeas SubFactor SubWgt CatCatchWgt LngtCode LngtClass HLNoAtLngt DevStage</span></span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      NA         1     NA          NA     &lt;NA&gt;        NA         -9     &lt;NA&gt;</span></span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2       3         1     NA          32        1        35          2     &lt;NA&gt;</span></span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3       3         1     NA          32        1        35          2     &lt;NA&gt;</span></span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4       5         1     NA        3142        1        22          2     &lt;NA&gt;</span></span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5       7         1     NA        3142        1        22          1     &lt;NA&gt;</span></span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6      21         1     NA       64261        1        22          1     &lt;NA&gt;</span></span>
<span id="cb14-59"><a href="#cb14-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7      21         1     NA       64261        1        38          2     &lt;NA&gt;</span></span>
<span id="cb14-60"><a href="#cb14-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8      21         1     NA       64261        1        39          2     &lt;NA&gt;</span></span>
<span id="cb14-61"><a href="#cb14-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9      21         1     NA       64261        1        41          1     &lt;NA&gt;</span></span>
<span id="cb14-62"><a href="#cb14-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     21         1     NA       64261        1        42          1     &lt;NA&gt;</span></span>
<span id="cb14-63"><a href="#cb14-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11     21         1     NA       64261        1        44          2     &lt;NA&gt;</span></span>
<span id="cb14-64"><a href="#cb14-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12     21         1     NA       64261        1        45          4     &lt;NA&gt;</span></span>
<span id="cb14-65"><a href="#cb14-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13     21         1     NA       64261        1        48          2     &lt;NA&gt;</span></span>
<span id="cb14-66"><a href="#cb14-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14     21         1     NA       64261        1        52          1     &lt;NA&gt;</span></span>
<span id="cb14-67"><a href="#cb14-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15     42         1     NA       64261        1        22          1     &lt;NA&gt;</span></span>
<span id="cb14-68"><a href="#cb14-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16     42         1     NA       64261        1        38          2     &lt;NA&gt;</span></span>
<span id="cb14-69"><a href="#cb14-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17     42         1     NA       64261        1        39          2     &lt;NA&gt;</span></span>
<span id="cb14-70"><a href="#cb14-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18     42         1     NA       64261        1        41          1     &lt;NA&gt;</span></span>
<span id="cb14-71"><a href="#cb14-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19     42         1     NA       64261        1        42          4     &lt;NA&gt;</span></span>
<span id="cb14-72"><a href="#cb14-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20     42         1     NA       64261        1        44          3     &lt;NA&gt;</span></span>
<span id="cb14-73"><a href="#cb14-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    LenMeasType DateofCalculation Valid_Aphia Ship2 Ship3</span></span>
<span id="cb14-74"><a href="#cb14-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           NA          20140617      126436  ATLD  ATLD</span></span>
<span id="cb14-75"><a href="#cb14-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           NA          20131112      126436  KOOT  KOOT</span></span>
<span id="cb14-76"><a href="#cb14-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           NA          20131112      126436  KOOT  KOOT</span></span>
<span id="cb14-77"><a href="#cb14-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-78"><a href="#cb14-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-79"><a href="#cb14-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-80"><a href="#cb14-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7           NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-81"><a href="#cb14-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8           NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-82"><a href="#cb14-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9           NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-83"><a href="#cb14-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10          NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-84"><a href="#cb14-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11          NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-85"><a href="#cb14-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12          NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-86"><a href="#cb14-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13          NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-87"><a href="#cb14-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14          NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-88"><a href="#cb14-88" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15          NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-89"><a href="#cb14-89" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16          NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-90"><a href="#cb14-90" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17          NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-91"><a href="#cb14-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18          NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-92"><a href="#cb14-92" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19          NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-93"><a href="#cb14-93" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20          NA          20131113      126436  DAN2  DAN2</span></span>
<span id="cb14-94"><a href="#cb14-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                          IDx sub_div Rect HaulVal StdSpecRecCode BySpecRecCode</span></span>
<span id="cb14-95"><a href="#cb14-95" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  1998.1.RUS.RUJB.HAK.NA.10      26 38G9       V              1             1</span></span>
<span id="cb14-96"><a href="#cb14-96" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  2000.4.EST.ESLF.TVS.14.14      28 45H1       V              1             1</span></span>
<span id="cb14-97"><a href="#cb14-97" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  2000.4.EST.ESLF.TVS.14.14      28 45H1       V              1             1</span></span>
<span id="cb14-98"><a href="#cb14-98" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  2001.4.DEN.26D4.TVL.63.31      26 39G8       V              1             1</span></span>
<span id="cb14-99"><a href="#cb14-99" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  2001.4.DEN.26D4.TVL.63.31      26 39G8       V              1             1</span></span>
<span id="cb14-100"><a href="#cb14-100" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  2001.4.DEN.26D4.TVL.83.37      26 40G8       V              1             1</span></span>
<span id="cb14-101"><a href="#cb14-101" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  2001.4.DEN.26D4.TVL.83.37      26 40G8       V              1             1</span></span>
<span id="cb14-102"><a href="#cb14-102" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  2001.4.DEN.26D4.TVL.83.37      26 40G8       V              1             1</span></span>
<span id="cb14-103"><a href="#cb14-103" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  2001.4.DEN.26D4.TVL.83.37      26 40G8       V              1             1</span></span>
<span id="cb14-104"><a href="#cb14-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 2001.4.DEN.26D4.TVL.83.37      26 40G8       V              1             1</span></span>
<span id="cb14-105"><a href="#cb14-105" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 2001.4.DEN.26D4.TVL.83.37      26 40G8       V              1             1</span></span>
<span id="cb14-106"><a href="#cb14-106" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12 2001.4.DEN.26D4.TVL.83.37      26 40G8       V              1             1</span></span>
<span id="cb14-107"><a href="#cb14-107" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13 2001.4.DEN.26D4.TVL.83.37      26 40G8       V              1             1</span></span>
<span id="cb14-108"><a href="#cb14-108" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14 2001.4.DEN.26D4.TVL.83.37      26 40G8       V              1             1</span></span>
<span id="cb14-109"><a href="#cb14-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15 2001.4.DEN.26D4.TVL.83.37      26 40G8       V              1             1</span></span>
<span id="cb14-110"><a href="#cb14-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16 2001.4.DEN.26D4.TVL.83.37      26 40G8       V              1             1</span></span>
<span id="cb14-111"><a href="#cb14-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17 2001.4.DEN.26D4.TVL.83.37      26 40G8       V              1             1</span></span>
<span id="cb14-112"><a href="#cb14-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18 2001.4.DEN.26D4.TVL.83.37      26 40G8       V              1             1</span></span>
<span id="cb14-113"><a href="#cb14-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19 2001.4.DEN.26D4.TVL.83.37      26 40G8       V              1             1</span></span>
<span id="cb14-114"><a href="#cb14-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20 2001.4.DEN.26D4.TVL.83.37      26 40G8       V              1             1</span></span>
<span id="cb14-115"><a href="#cb14-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Fishing.line Month DataType HaulDur GroundSpeed                   haul.id</span></span>
<span id="cb14-116"><a href="#cb14-116" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         -9.00     3        C      30         3.8 1998:1:RUS:ATLD:HAK:NA:10</span></span>
<span id="cb14-117"><a href="#cb14-117" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         33.22    11        C      30         3.0 2000:4:EST:KOOT:TVS:14:14</span></span>
<span id="cb14-118"><a href="#cb14-118" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         33.22    11        C      30         3.0 2000:4:EST:KOOT:TVS:14:14</span></span>
<span id="cb14-119"><a href="#cb14-119" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         63.46    11        R      30         3.0 2001:4:DEN:DAN2:TVL:63:31</span></span>
<span id="cb14-120"><a href="#cb14-120" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         63.46    11        R      30         3.0 2001:4:DEN:DAN2:TVL:63:31</span></span>
<span id="cb14-121"><a href="#cb14-121" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6         63.46    11        R      31         3.1 2001:4:DEN:DAN2:TVL:83:37</span></span>
<span id="cb14-122"><a href="#cb14-122" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7         63.46    11        R      31         3.1 2001:4:DEN:DAN2:TVL:83:37</span></span>
<span id="cb14-123"><a href="#cb14-123" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8         63.46    11        R      31         3.1 2001:4:DEN:DAN2:TVL:83:37</span></span>
<span id="cb14-124"><a href="#cb14-124" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9         63.46    11        R      31         3.1 2001:4:DEN:DAN2:TVL:83:37</span></span>
<span id="cb14-125"><a href="#cb14-125" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10        63.46    11        R      31         3.1 2001:4:DEN:DAN2:TVL:83:37</span></span>
<span id="cb14-126"><a href="#cb14-126" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11        63.46    11        R      31         3.1 2001:4:DEN:DAN2:TVL:83:37</span></span>
<span id="cb14-127"><a href="#cb14-127" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12        63.46    11        R      31         3.1 2001:4:DEN:DAN2:TVL:83:37</span></span>
<span id="cb14-128"><a href="#cb14-128" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13        63.46    11        R      31         3.1 2001:4:DEN:DAN2:TVL:83:37</span></span>
<span id="cb14-129"><a href="#cb14-129" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14        63.46    11        R      31         3.1 2001:4:DEN:DAN2:TVL:83:37</span></span>
<span id="cb14-130"><a href="#cb14-130" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15        63.46    11        R      31         3.1 2001:4:DEN:DAN2:TVL:83:37</span></span>
<span id="cb14-131"><a href="#cb14-131" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16        63.46    11        R      31         3.1 2001:4:DEN:DAN2:TVL:83:37</span></span>
<span id="cb14-132"><a href="#cb14-132" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17        63.46    11        R      31         3.1 2001:4:DEN:DAN2:TVL:83:37</span></span>
<span id="cb14-133"><a href="#cb14-133" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18        63.46    11        R      31         3.1 2001:4:DEN:DAN2:TVL:83:37</span></span>
<span id="cb14-134"><a href="#cb14-134" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19        63.46    11        R      31         3.1 2001:4:DEN:DAN2:TVL:83:37</span></span>
<span id="cb14-135"><a href="#cb14-135" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20        63.46    11        R      31         3.1 2001:4:DEN:DAN2:TVL:83:37</span></span>
<span id="cb14-136"><a href="#cb14-136" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ShootLat ShootLong       id_haul_stomach      Species   CPUEun n</span></span>
<span id="cb14-137"><a href="#cb14-137" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   54.6333   19.6500  1998.1.3.RUS.38G9.10 Gadus morhua       NA 2</span></span>
<span id="cb14-138"><a href="#cb14-138" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   58.0167   21.0833 2000.4.11.EST.45H1.14 Gadus morhua 2.000000 2</span></span>
<span id="cb14-139"><a href="#cb14-139" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   58.0167   21.0833 2000.4.11.EST.45H1.14 Gadus morhua 2.000000 2</span></span>
<span id="cb14-140"><a href="#cb14-140" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   55.4699   18.3116 2001.4.11.DEN.39G8.31 Gadus morhua 4.000000 2</span></span>
<span id="cb14-141"><a href="#cb14-141" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   55.4699   18.3116 2001.4.11.DEN.39G8.31 Gadus morhua 2.000000 2</span></span>
<span id="cb14-142"><a href="#cb14-142" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   55.6627   18.0414 2001.4.11.DEN.40G8.37 Gadus morhua 1.935484 2</span></span>
<span id="cb14-143"><a href="#cb14-143" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   55.6627   18.0414 2001.4.11.DEN.40G8.37 Gadus morhua 3.870968 2</span></span>
<span id="cb14-144"><a href="#cb14-144" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8   55.6627   18.0414 2001.4.11.DEN.40G8.37 Gadus morhua 3.870968 2</span></span>
<span id="cb14-145"><a href="#cb14-145" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9   55.6627   18.0414 2001.4.11.DEN.40G8.37 Gadus morhua 1.935484 2</span></span>
<span id="cb14-146"><a href="#cb14-146" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  55.6627   18.0414 2001.4.11.DEN.40G8.37 Gadus morhua 1.935484 2</span></span>
<span id="cb14-147"><a href="#cb14-147" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11  55.6627   18.0414 2001.4.11.DEN.40G8.37 Gadus morhua 3.870968 2</span></span>
<span id="cb14-148"><a href="#cb14-148" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12  55.6627   18.0414 2001.4.11.DEN.40G8.37 Gadus morhua 7.741935 2</span></span>
<span id="cb14-149"><a href="#cb14-149" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13  55.6627   18.0414 2001.4.11.DEN.40G8.37 Gadus morhua 3.870968 2</span></span>
<span id="cb14-150"><a href="#cb14-150" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14  55.6627   18.0414 2001.4.11.DEN.40G8.37 Gadus morhua 1.935484 2</span></span>
<span id="cb14-151"><a href="#cb14-151" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15  55.6627   18.0414 2001.4.11.DEN.40G8.37 Gadus morhua 1.935484 2</span></span>
<span id="cb14-152"><a href="#cb14-152" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16  55.6627   18.0414 2001.4.11.DEN.40G8.37 Gadus morhua 3.870968 2</span></span>
<span id="cb14-153"><a href="#cb14-153" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17  55.6627   18.0414 2001.4.11.DEN.40G8.37 Gadus morhua 3.870968 2</span></span>
<span id="cb14-154"><a href="#cb14-154" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18  55.6627   18.0414 2001.4.11.DEN.40G8.37 Gadus morhua 1.935484 2</span></span>
<span id="cb14-155"><a href="#cb14-155" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19  55.6627   18.0414 2001.4.11.DEN.40G8.37 Gadus morhua 7.741935 2</span></span>
<span id="cb14-156"><a href="#cb14-156" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20  55.6627   18.0414 2001.4.11.DEN.40G8.37 Gadus morhua 5.806452 2</span></span>
<span id="cb14-157"><a href="#cb14-157" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> hlcod0 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="fu">filter</span>(n <span class="sc">==</span> <span class="dv">2</span>)</span>
<span id="cb14-158"><a href="#cb14-158" aria-hidden="true" tabindex="-1"></a>test_id <span class="ot">&lt;-</span> test<span class="sc">$</span>haul.id[<span class="dv">2</span>]</span>
<span id="cb14-159"><a href="#cb14-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-160"><a href="#cb14-160" aria-hidden="true" tabindex="-1"></a>hlcodL <span class="ot">&lt;-</span> hlcod0 <span class="sc">|&gt;</span> </span>
<span id="cb14-161"><a href="#cb14-161" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> </span>
<span id="cb14-162"><a href="#cb14-162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEun =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span></span>
<span id="cb14-163"><a href="#cb14-163" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb14-164"><a href="#cb14-164" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id3 =</span> <span class="fu">paste</span>(haul.id, LngtClass)) <span class="sc">|&gt;</span> </span>
<span id="cb14-165"><a href="#cb14-165" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id3, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb14-166"><a href="#cb14-166" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>X, <span class="sc">-</span>id3) <span class="co"># Clean up a bit</span></span>
<span id="cb14-167"><a href="#cb14-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-168"><a href="#cb14-168" aria-hidden="true" tabindex="-1"></a><span class="co"># Check with an ID</span></span>
<span id="cb14-169"><a href="#cb14-169" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(hlcod0, haul.id <span class="sc">==</span> test_id)</span>
<span id="cb14-170"><a href="#cb14-170" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        X RecordType Survey Quarter Country Ship Gear SweepLngt GearEx DoorType</span></span>
<span id="cb14-171"><a href="#cb14-171" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 300422         HL   BITS       4     EST ESLF  TVS        NA   &lt;NA&gt;       NA</span></span>
<span id="cb14-172"><a href="#cb14-172" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 300423         HL   BITS       4     EST ESLF  TVS        NA   &lt;NA&gt;       NA</span></span>
<span id="cb14-173"><a href="#cb14-173" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 300424         HL   BITS       4     EST ESLF  TVS        NA   &lt;NA&gt;       NA</span></span>
<span id="cb14-174"><a href="#cb14-174" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   4998         HH   BITS       4     EST ESLF  TVS        NA   &lt;NA&gt;       NA</span></span>
<span id="cb14-175"><a href="#cb14-175" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   StNo HaulNo Year SpecCodeType SpecCode   SpecVal  Sex TotalNo CatIdentifier</span></span>
<span id="cb14-176"><a href="#cb14-176" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   14     14 2000            T   164712         1    M       2             1</span></span>
<span id="cb14-177"><a href="#cb14-177" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   14     14 2000            T   164712         1    F       4             1</span></span>
<span id="cb14-178"><a href="#cb14-178" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   14     14 2000            T   164712         1    F       4             1</span></span>
<span id="cb14-179"><a href="#cb14-179" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   14     14 2000         &lt;NA&gt;       NA zeroCatch &lt;NA&gt;      NA            NA</span></span>
<span id="cb14-180"><a href="#cb14-180" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   NoMeas SubFactor SubWgt CatCatchWgt LngtCode LngtClass HLNoAtLngt DevStage</span></span>
<span id="cb14-181"><a href="#cb14-181" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      3         1     NA          32        1        35          2     &lt;NA&gt;</span></span>
<span id="cb14-182"><a href="#cb14-182" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2      3         1     NA          32        1        35          2     &lt;NA&gt;</span></span>
<span id="cb14-183"><a href="#cb14-183" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3      3         1     NA          32        1        39          2     &lt;NA&gt;</span></span>
<span id="cb14-184"><a href="#cb14-184" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     NA        NA     NA          NA     &lt;NA&gt;        NA         NA     &lt;NA&gt;</span></span>
<span id="cb14-185"><a href="#cb14-185" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   LenMeasType DateofCalculation Valid_Aphia Ship2 Ship3</span></span>
<span id="cb14-186"><a href="#cb14-186" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          NA          20131112      126436  KOOT  KOOT</span></span>
<span id="cb14-187"><a href="#cb14-187" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          NA          20131112      126436  KOOT  KOOT</span></span>
<span id="cb14-188"><a href="#cb14-188" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          NA          20131112      126436  KOOT  KOOT</span></span>
<span id="cb14-189"><a href="#cb14-189" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          NA          20220301          NA  KOOT  KOOT</span></span>
<span id="cb14-190"><a href="#cb14-190" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                         IDx sub_div Rect HaulVal StdSpecRecCode BySpecRecCode</span></span>
<span id="cb14-191"><a href="#cb14-191" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 2000.4.EST.ESLF.TVS.14.14      28 45H1       V              1             1</span></span>
<span id="cb14-192"><a href="#cb14-192" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 2000.4.EST.ESLF.TVS.14.14      28 45H1       V              1             1</span></span>
<span id="cb14-193"><a href="#cb14-193" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 2000.4.EST.ESLF.TVS.14.14      28 45H1       V              1             1</span></span>
<span id="cb14-194"><a href="#cb14-194" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 2000.4.EST.ESLF.TVS.14.14      28 45H1       V              1             1</span></span>
<span id="cb14-195"><a href="#cb14-195" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Fishing.line Month DataType HaulDur GroundSpeed                   haul.id</span></span>
<span id="cb14-196"><a href="#cb14-196" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1        33.22    11        C      30           3 2000:4:EST:KOOT:TVS:14:14</span></span>
<span id="cb14-197"><a href="#cb14-197" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2        33.22    11        C      30           3 2000:4:EST:KOOT:TVS:14:14</span></span>
<span id="cb14-198"><a href="#cb14-198" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3        33.22    11        C      30           3 2000:4:EST:KOOT:TVS:14:14</span></span>
<span id="cb14-199"><a href="#cb14-199" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4        33.22    11        C      30           3 2000:4:EST:KOOT:TVS:14:14</span></span>
<span id="cb14-200"><a href="#cb14-200" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ShootLat ShootLong       id_haul_stomach      Species CPUEun</span></span>
<span id="cb14-201"><a href="#cb14-201" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  58.0167   21.0833 2000.4.11.EST.45H1.14 Gadus morhua      2</span></span>
<span id="cb14-202"><a href="#cb14-202" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  58.0167   21.0833 2000.4.11.EST.45H1.14 Gadus morhua      2</span></span>
<span id="cb14-203"><a href="#cb14-203" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  58.0167   21.0833 2000.4.11.EST.45H1.14 Gadus morhua      2</span></span>
<span id="cb14-204"><a href="#cb14-204" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  58.0167   21.0833                  &lt;NA&gt; Gadus morhua      0</span></span>
<span id="cb14-205"><a href="#cb14-205" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(hlcodL, haul.id <span class="sc">==</span> test_id) <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>()</span>
<span id="cb14-206"><a href="#cb14-206" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   RecordType Survey Quarter Country Ship Gear SweepLngt GearEx DoorType StNo</span></span>
<span id="cb14-207"><a href="#cb14-207" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         HL   BITS       4     EST ESLF  TVS        NA   &lt;NA&gt;       NA   14</span></span>
<span id="cb14-208"><a href="#cb14-208" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         HL   BITS       4     EST ESLF  TVS        NA   &lt;NA&gt;       NA   14</span></span>
<span id="cb14-209"><a href="#cb14-209" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         HH   BITS       4     EST ESLF  TVS        NA   &lt;NA&gt;       NA   14</span></span>
<span id="cb14-210"><a href="#cb14-210" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   HaulNo Year SpecCodeType SpecCode   SpecVal  Sex TotalNo CatIdentifier NoMeas</span></span>
<span id="cb14-211"><a href="#cb14-211" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     14 2000            T   164712         1    M       2             1      3</span></span>
<span id="cb14-212"><a href="#cb14-212" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     14 2000            T   164712         1    F       4             1      3</span></span>
<span id="cb14-213"><a href="#cb14-213" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     14 2000         &lt;NA&gt;       NA zeroCatch &lt;NA&gt;      NA            NA     NA</span></span>
<span id="cb14-214"><a href="#cb14-214" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   SubFactor SubWgt CatCatchWgt LngtCode LngtClass HLNoAtLngt DevStage</span></span>
<span id="cb14-215"><a href="#cb14-215" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         1     NA          32        1        35          2     &lt;NA&gt;</span></span>
<span id="cb14-216"><a href="#cb14-216" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         1     NA          32        1        39          2     &lt;NA&gt;</span></span>
<span id="cb14-217"><a href="#cb14-217" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3        NA     NA          NA     &lt;NA&gt;        NA         NA     &lt;NA&gt;</span></span>
<span id="cb14-218"><a href="#cb14-218" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   LenMeasType DateofCalculation Valid_Aphia Ship2 Ship3</span></span>
<span id="cb14-219"><a href="#cb14-219" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          NA          20131112      126436  KOOT  KOOT</span></span>
<span id="cb14-220"><a href="#cb14-220" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          NA          20131112      126436  KOOT  KOOT</span></span>
<span id="cb14-221"><a href="#cb14-221" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          NA          20220301          NA  KOOT  KOOT</span></span>
<span id="cb14-222"><a href="#cb14-222" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                         IDx sub_div Rect HaulVal StdSpecRecCode BySpecRecCode</span></span>
<span id="cb14-223"><a href="#cb14-223" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 2000.4.EST.ESLF.TVS.14.14      28 45H1       V              1             1</span></span>
<span id="cb14-224"><a href="#cb14-224" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 2000.4.EST.ESLF.TVS.14.14      28 45H1       V              1             1</span></span>
<span id="cb14-225"><a href="#cb14-225" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 2000.4.EST.ESLF.TVS.14.14      28 45H1       V              1             1</span></span>
<span id="cb14-226"><a href="#cb14-226" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Fishing.line Month DataType HaulDur GroundSpeed                   haul.id</span></span>
<span id="cb14-227"><a href="#cb14-227" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1        33.22    11        C      30           3 2000:4:EST:KOOT:TVS:14:14</span></span>
<span id="cb14-228"><a href="#cb14-228" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2        33.22    11        C      30           3 2000:4:EST:KOOT:TVS:14:14</span></span>
<span id="cb14-229"><a href="#cb14-229" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3        33.22    11        C      30           3 2000:4:EST:KOOT:TVS:14:14</span></span>
<span id="cb14-230"><a href="#cb14-230" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ShootLat ShootLong       id_haul_stomach      Species CPUEun</span></span>
<span id="cb14-231"><a href="#cb14-231" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  58.0167   21.0833 2000.4.11.EST.45H1.14 Gadus morhua      4</span></span>
<span id="cb14-232"><a href="#cb14-232" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  58.0167   21.0833 2000.4.11.EST.45H1.14 Gadus morhua      2</span></span>
<span id="cb14-233"><a href="#cb14-233" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  58.0167   21.0833                  &lt;NA&gt; Gadus morhua      0</span></span>
<span id="cb14-234"><a href="#cb14-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-235"><a href="#cb14-235" aria-hidden="true" tabindex="-1"></a><span class="co"># Do we still have 0 catches?</span></span>
<span id="cb14-236"><a href="#cb14-236" aria-hidden="true" tabindex="-1"></a>hlcodL <span class="sc">|&gt;</span></span>
<span id="cb14-237"><a href="#cb14-237" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb14-238"><a href="#cb14-238" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb14-239"><a href="#cb14-239" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb14-240"><a href="#cb14-240" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb14-241"><a href="#cb14-241" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 10,268 × 3</span></span>
<span id="cb14-242"><a href="#cb14-242" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    haul.id                     Year CPUEun_haul</span></span>
<span id="cb14-243"><a href="#cb14-243" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                      &lt;int&gt;       &lt;dbl&gt;</span></span>
<span id="cb14-244"><a href="#cb14-244" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 1993:1:DEN:DAN2:GRT:105:45  1993          37</span></span>
<span id="cb14-245"><a href="#cb14-245" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 1993:1:DEN:DAN2:GRT:106:46  1993           2</span></span>
<span id="cb14-246"><a href="#cb14-246" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 1993:1:DEN:DAN2:GRT:107:47  1993          34</span></span>
<span id="cb14-247"><a href="#cb14-247" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 1993:1:DEN:DAN2:GRT:108:48  1993           5</span></span>
<span id="cb14-248"><a href="#cb14-248" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 1993:1:DEN:DAN2:GRT:109:49  1993          24</span></span>
<span id="cb14-249"><a href="#cb14-249" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 1993:1:DEN:DAN2:GRT:110:50  1993          40</span></span>
<span id="cb14-250"><a href="#cb14-250" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 1993:1:DEN:DAN2:GRT:112:51  1993          32</span></span>
<span id="cb14-251"><a href="#cb14-251" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 1993:1:DEN:DAN2:GRT:113:52  1993          12</span></span>
<span id="cb14-252"><a href="#cb14-252" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 1993:1:DEN:DAN2:GRT:114:53  1993          16</span></span>
<span id="cb14-253"><a href="#cb14-253" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1993:1:DEN:DAN2:GRT:115:54  1993           9</span></span>
<span id="cb14-254"><a href="#cb14-254" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 10,258 more rows</span></span>
<span id="cb14-255"><a href="#cb14-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-256"><a href="#cb14-256" aria-hidden="true" tabindex="-1"></a>hlcodL <span class="sc">|&gt;</span></span>
<span id="cb14-257"><a href="#cb14-257" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb14-258"><a href="#cb14-258" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb14-259"><a href="#cb14-259" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb14-260"><a href="#cb14-260" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb14-261"><a href="#cb14-261" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, zero_catch) <span class="sc">|&gt;</span> </span>
<span id="cb14-262"><a href="#cb14-262" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb14-263"><a href="#cb14-263" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> n, <span class="at">fill =</span> zero_catch)) <span class="sc">+</span></span>
<span id="cb14-264"><a href="#cb14-264" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-11-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Flounder</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>hlfle0 <span class="ot">&lt;-</span> hlfle0 <span class="sc">|&gt;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEun =</span> <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">&amp;</span> DataType <span class="sc">==</span> <span class="st">"C"</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                         HLNoAtLngt,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                         </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">&amp;</span> DataType <span class="sc">==</span> <span class="st">"R"</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>                                HLNoAtLngt<span class="sc">/</span>(HaulDur<span class="sc">/</span><span class="dv">60</span>),</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>                                </span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>                                <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">&amp;</span> DataType <span class="sc">==</span> <span class="st">"S"</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>                                       (HLNoAtLngt<span class="sc">*</span>SubFactor)<span class="sc">/</span>(HaulDur<span class="sc">/</span><span class="dv">60</span>),</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>                                       </span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>                                       <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"zeroCatch"</span>, <span class="dv">0</span>, <span class="cn">NA</span>)))))</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot and fill by zero catch</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>hlfle0 <span class="sc">|&gt;</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 10,013 × 3</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    haul.id                     Year CPUEun_haul</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                      &lt;int&gt;       &lt;dbl&gt;</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 1993:1:DEN:DAN2:GRT:105:45  1993        2500</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 1993:1:DEN:DAN2:GRT:106:46  1993           8</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 1993:1:DEN:DAN2:GRT:107:47  1993          26</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 1993:1:DEN:DAN2:GRT:108:48  1993          34</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 1993:1:DEN:DAN2:GRT:109:49  1993           8</span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 1993:1:DEN:DAN2:GRT:110:50  1993           8</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 1993:1:DEN:DAN2:GRT:114:53  1993           1</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 1993:1:DEN:DAN2:GRT:115:54  1993           3</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 1993:1:DEN:DAN2:GRT:117:56  1993         729</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1993:1:DEN:DAN2:GRT:11:6    1993          11</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 10,003 more rows</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>hlfle0 <span class="sc">|&gt;</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, zero_catch) <span class="sc">|&gt;</span> </span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> n, <span class="at">fill =</span> zero_catch)) <span class="sc">+</span></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-11-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Some rows have multiple rows per combination of length class and haul id (i suppose often because it's split by sex), so we need to sum it up </span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>hlfle0 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="fu">distinct</span>(n)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 1</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       n</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;int&gt;</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     1</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     2</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     3</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>hlfle0 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="fu">filter</span>(n <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">20</span>)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        X RecordType Survey Quarter Country Ship Gear SweepLngt GearEx DoorType</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  98168         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  98169         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  98374         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  98375         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  98378         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  98379         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  98380         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  98383         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  98582         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 98584         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 98585         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12 98586         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13 98587         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14 98588         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15 98589         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16 98590         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17 98591         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18 98592         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19 98593         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20 98594         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    StNo HaulNo Year SpecCodeType SpecCode SpecVal Sex TotalNo CatIdentifier</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    25      3 1995            W   127141       1   M       8             1</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    25      3 1995            W   127141       1   F       6             1</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    27      6 1995            W   127141       1   M      18             1</span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    27      6 1995            W   127141       1   M      18             1</span></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    27      6 1995            W   127141       1   M      18             1</span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    27      6 1995            W   127141       1   F      24             1</span></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7    27      6 1995            W   127141       1   F      24             1</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8    27      6 1995            W   127141       1   F      24             1</span></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9    32     31 1995            W   127141       1   M      38             1</span></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10   32     31 1995            W   127141       1   M      38             1</span></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11   32     31 1995            W   127141       1   M      38             1</span></span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12   32     31 1995            W   127141       1   M      38             1</span></span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13   32     31 1995            W   127141       1   M      38             1</span></span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14   32     31 1995            W   127141       1   M      38             1</span></span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15   32     31 1995            W   127141       1   M      38             1</span></span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16   32     31 1995            W   127141       1   F      36             1</span></span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17   32     31 1995            W   127141       1   F      36             1</span></span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18   32     31 1995            W   127141       1   F      36             1</span></span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19   32     31 1995            W   127141       1   F      36             1</span></span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20   32     31 1995            W   127141       1   F      36             1</span></span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    NoMeas SubFactor SubWgt CatCatchWgt LngtCode LngtClass HLNoAtLngt DevStage</span></span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1       7         1     NA          36        1        28          2     &lt;NA&gt;</span></span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2       7         1     NA          36        1        28          2     &lt;NA&gt;</span></span>
<span id="cb16-56"><a href="#cb16-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3      21         1     NA          64        1        20          2     &lt;NA&gt;</span></span>
<span id="cb16-57"><a href="#cb16-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4      21         1     NA          64        1        21          6     &lt;NA&gt;</span></span>
<span id="cb16-58"><a href="#cb16-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5      21         1     NA          64        1        26          2     &lt;NA&gt;</span></span>
<span id="cb16-59"><a href="#cb16-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6      21         1     NA          64        1        20          4     &lt;NA&gt;</span></span>
<span id="cb16-60"><a href="#cb16-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7      21         1     NA          64        1        21          4     &lt;NA&gt;</span></span>
<span id="cb16-61"><a href="#cb16-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8      21         1     NA          64        1        26          2     &lt;NA&gt;</span></span>
<span id="cb16-62"><a href="#cb16-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9      37         1     NA         217        1        24          2     &lt;NA&gt;</span></span>
<span id="cb16-63"><a href="#cb16-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     37         1     NA         217        1        26          2     &lt;NA&gt;</span></span>
<span id="cb16-64"><a href="#cb16-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11     37         1     NA         217        1        27          8     &lt;NA&gt;</span></span>
<span id="cb16-65"><a href="#cb16-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12     37         1     NA         217        1        28          4     &lt;NA&gt;</span></span>
<span id="cb16-66"><a href="#cb16-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13     37         1     NA         217        1        29          2     &lt;NA&gt;</span></span>
<span id="cb16-67"><a href="#cb16-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14     37         1     NA         217        1        31          2     &lt;NA&gt;</span></span>
<span id="cb16-68"><a href="#cb16-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15     37         1     NA         217        1        34          4     &lt;NA&gt;</span></span>
<span id="cb16-69"><a href="#cb16-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16     37         1     NA         217        1        24          2     &lt;NA&gt;</span></span>
<span id="cb16-70"><a href="#cb16-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17     37         1     NA         217        1        26          4     &lt;NA&gt;</span></span>
<span id="cb16-71"><a href="#cb16-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18     37         1     NA         217        1        27          4     &lt;NA&gt;</span></span>
<span id="cb16-72"><a href="#cb16-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19     37         1     NA         217        1        28          6     &lt;NA&gt;</span></span>
<span id="cb16-73"><a href="#cb16-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20     37         1     NA         217        1        29          6     &lt;NA&gt;</span></span>
<span id="cb16-74"><a href="#cb16-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    LenMeasType DateofCalculation Valid_Aphia Ship2 Ship3</span></span>
<span id="cb16-75"><a href="#cb16-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-76"><a href="#cb16-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-77"><a href="#cb16-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-78"><a href="#cb16-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-79"><a href="#cb16-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-80"><a href="#cb16-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-81"><a href="#cb16-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7           NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-82"><a href="#cb16-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8           NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-83"><a href="#cb16-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9           NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-84"><a href="#cb16-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-85"><a href="#cb16-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-86"><a href="#cb16-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-87"><a href="#cb16-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-88"><a href="#cb16-88" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-89"><a href="#cb16-89" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-90"><a href="#cb16-90" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-91"><a href="#cb16-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-92"><a href="#cb16-92" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-93"><a href="#cb16-93" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-94"><a href="#cb16-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-95"><a href="#cb16-95" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                          IDx sub_div Rect HaulVal StdSpecRecCode BySpecRecCode</span></span>
<span id="cb16-96"><a href="#cb16-96" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-97"><a href="#cb16-97" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-98"><a href="#cb16-98" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb16-99"><a href="#cb16-99" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb16-100"><a href="#cb16-100" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb16-101"><a href="#cb16-101" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb16-102"><a href="#cb16-102" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb16-103"><a href="#cb16-103" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8   1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb16-104"><a href="#cb16-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb16-105"><a href="#cb16-105" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb16-106"><a href="#cb16-106" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb16-107"><a href="#cb16-107" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12 1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb16-108"><a href="#cb16-108" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13 1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb16-109"><a href="#cb16-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14 1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb16-110"><a href="#cb16-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15 1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb16-111"><a href="#cb16-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16 1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb16-112"><a href="#cb16-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17 1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb16-113"><a href="#cb16-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18 1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb16-114"><a href="#cb16-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19 1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb16-115"><a href="#cb16-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20 1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb16-116"><a href="#cb16-116" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Fishing.line Month DataType HaulDur GroundSpeed                  haul.id</span></span>
<span id="cb16-117"><a href="#cb16-117" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1            36     2        C      30         4.0  1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-118"><a href="#cb16-118" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2            36     2        C      30         4.0  1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-119"><a href="#cb16-119" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3            36     2        C      30         3.6  1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb16-120"><a href="#cb16-120" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4            36     2        C      30         3.6  1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb16-121"><a href="#cb16-121" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5            36     2        C      30         3.6  1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb16-122"><a href="#cb16-122" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6            36     2        C      30         3.6  1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb16-123"><a href="#cb16-123" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7            36     2        C      30         3.6  1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb16-124"><a href="#cb16-124" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8            36     2        C      30         3.6  1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb16-125"><a href="#cb16-125" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9            36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb16-126"><a href="#cb16-126" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10           36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb16-127"><a href="#cb16-127" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11           36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb16-128"><a href="#cb16-128" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12           36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb16-129"><a href="#cb16-129" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13           36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb16-130"><a href="#cb16-130" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14           36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb16-131"><a href="#cb16-131" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15           36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb16-132"><a href="#cb16-132" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16           36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb16-133"><a href="#cb16-133" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17           36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb16-134"><a href="#cb16-134" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18           36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb16-135"><a href="#cb16-135" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19           36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb16-136"><a href="#cb16-136" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20           36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb16-137"><a href="#cb16-137" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ShootLat ShootLong      id_haul_stomach            Species CPUEun n</span></span>
<span id="cb16-138"><a href="#cb16-138" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   54.7167      13.1  1995.1.2.GFR.38G3.3 Platichthys flesus      2 2</span></span>
<span id="cb16-139"><a href="#cb16-139" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   54.7167      13.1  1995.1.2.GFR.38G3.3 Platichthys flesus      2 2</span></span>
<span id="cb16-140"><a href="#cb16-140" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   54.5167      13.8  1995.1.2.GFR.38G3.6 Platichthys flesus      2 2</span></span>
<span id="cb16-141"><a href="#cb16-141" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   54.5167      13.8  1995.1.2.GFR.38G3.6 Platichthys flesus      6 2</span></span>
<span id="cb16-142"><a href="#cb16-142" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   54.5167      13.8  1995.1.2.GFR.38G3.6 Platichthys flesus      2 2</span></span>
<span id="cb16-143"><a href="#cb16-143" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   54.5167      13.8  1995.1.2.GFR.38G3.6 Platichthys flesus      4 2</span></span>
<span id="cb16-144"><a href="#cb16-144" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   54.5167      13.8  1995.1.2.GFR.38G3.6 Platichthys flesus      4 2</span></span>
<span id="cb16-145"><a href="#cb16-145" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8   54.5167      13.8  1995.1.2.GFR.38G3.6 Platichthys flesus      2 2</span></span>
<span id="cb16-146"><a href="#cb16-146" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9   54.7333      13.4 1995.1.2.GFR.38G3.31 Platichthys flesus      2 2</span></span>
<span id="cb16-147"><a href="#cb16-147" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  54.7333      13.4 1995.1.2.GFR.38G3.31 Platichthys flesus      2 2</span></span>
<span id="cb16-148"><a href="#cb16-148" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11  54.7333      13.4 1995.1.2.GFR.38G3.31 Platichthys flesus      8 2</span></span>
<span id="cb16-149"><a href="#cb16-149" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12  54.7333      13.4 1995.1.2.GFR.38G3.31 Platichthys flesus      4 2</span></span>
<span id="cb16-150"><a href="#cb16-150" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13  54.7333      13.4 1995.1.2.GFR.38G3.31 Platichthys flesus      2 2</span></span>
<span id="cb16-151"><a href="#cb16-151" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14  54.7333      13.4 1995.1.2.GFR.38G3.31 Platichthys flesus      2 2</span></span>
<span id="cb16-152"><a href="#cb16-152" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15  54.7333      13.4 1995.1.2.GFR.38G3.31 Platichthys flesus      4 2</span></span>
<span id="cb16-153"><a href="#cb16-153" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16  54.7333      13.4 1995.1.2.GFR.38G3.31 Platichthys flesus      2 2</span></span>
<span id="cb16-154"><a href="#cb16-154" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17  54.7333      13.4 1995.1.2.GFR.38G3.31 Platichthys flesus      4 2</span></span>
<span id="cb16-155"><a href="#cb16-155" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18  54.7333      13.4 1995.1.2.GFR.38G3.31 Platichthys flesus      4 2</span></span>
<span id="cb16-156"><a href="#cb16-156" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19  54.7333      13.4 1995.1.2.GFR.38G3.31 Platichthys flesus      6 2</span></span>
<span id="cb16-157"><a href="#cb16-157" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20  54.7333      13.4 1995.1.2.GFR.38G3.31 Platichthys flesus      6 2</span></span>
<span id="cb16-158"><a href="#cb16-158" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> hlfle0 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="fu">filter</span>(n <span class="sc">==</span> <span class="dv">2</span>)</span>
<span id="cb16-159"><a href="#cb16-159" aria-hidden="true" tabindex="-1"></a>test_id <span class="ot">&lt;-</span> test<span class="sc">$</span>haul.id[<span class="dv">2</span>]</span>
<span id="cb16-160"><a href="#cb16-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-161"><a href="#cb16-161" aria-hidden="true" tabindex="-1"></a>hlfleL <span class="ot">&lt;-</span> hlfle0 <span class="sc">|&gt;</span> </span>
<span id="cb16-162"><a href="#cb16-162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> </span>
<span id="cb16-163"><a href="#cb16-163" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEun =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span></span>
<span id="cb16-164"><a href="#cb16-164" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb16-165"><a href="#cb16-165" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id3 =</span> <span class="fu">paste</span>(haul.id, LngtClass)) <span class="sc">|&gt;</span> </span>
<span id="cb16-166"><a href="#cb16-166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id3, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-167"><a href="#cb16-167" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>X, <span class="sc">-</span>id3) <span class="co"># Clean up a bit</span></span>
<span id="cb16-168"><a href="#cb16-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-169"><a href="#cb16-169" aria-hidden="true" tabindex="-1"></a><span class="co"># Check with an ID</span></span>
<span id="cb16-170"><a href="#cb16-170" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(hlfle0, haul.id <span class="sc">==</span> test_id)</span>
<span id="cb16-171"><a href="#cb16-171" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       X RecordType Survey Quarter Country Ship Gear SweepLngt GearEx DoorType</span></span>
<span id="cb16-172"><a href="#cb16-172" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 98165         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-173"><a href="#cb16-173" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 98166         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-174"><a href="#cb16-174" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 98167         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-175"><a href="#cb16-175" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 98168         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-176"><a href="#cb16-176" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 98169         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-177"><a href="#cb16-177" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 98170         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-178"><a href="#cb16-178" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 98171         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-179"><a href="#cb16-179" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  1873         HH   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb16-180"><a href="#cb16-180" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   StNo HaulNo Year SpecCodeType SpecCode   SpecVal  Sex TotalNo CatIdentifier</span></span>
<span id="cb16-181"><a href="#cb16-181" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   25      3 1995            W   127141         1    M       8             1</span></span>
<span id="cb16-182"><a href="#cb16-182" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   25      3 1995            W   127141         1    M       8             1</span></span>
<span id="cb16-183"><a href="#cb16-183" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   25      3 1995            W   127141         1    M       8             1</span></span>
<span id="cb16-184"><a href="#cb16-184" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   25      3 1995            W   127141         1    M       8             1</span></span>
<span id="cb16-185"><a href="#cb16-185" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   25      3 1995            W   127141         1    F       6             1</span></span>
<span id="cb16-186"><a href="#cb16-186" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   25      3 1995            W   127141         1    F       6             1</span></span>
<span id="cb16-187"><a href="#cb16-187" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   25      3 1995            W   127141         1    F       6             1</span></span>
<span id="cb16-188"><a href="#cb16-188" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8   25      3 1995         &lt;NA&gt;       NA zeroCatch &lt;NA&gt;      NA            NA</span></span>
<span id="cb16-189"><a href="#cb16-189" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   NoMeas SubFactor SubWgt CatCatchWgt LngtCode LngtClass HLNoAtLngt DevStage</span></span>
<span id="cb16-190"><a href="#cb16-190" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      7         1     NA          36        1        22          2     &lt;NA&gt;</span></span>
<span id="cb16-191"><a href="#cb16-191" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2      7         1     NA          36        1        24          2     &lt;NA&gt;</span></span>
<span id="cb16-192"><a href="#cb16-192" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3      7         1     NA          36        1        27          2     &lt;NA&gt;</span></span>
<span id="cb16-193"><a href="#cb16-193" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4      7         1     NA          36        1        28          2     &lt;NA&gt;</span></span>
<span id="cb16-194"><a href="#cb16-194" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5      7         1     NA          36        1        28          2     &lt;NA&gt;</span></span>
<span id="cb16-195"><a href="#cb16-195" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6      7         1     NA          36        1        29          2     &lt;NA&gt;</span></span>
<span id="cb16-196"><a href="#cb16-196" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7      7         1     NA          36        1        30          2     &lt;NA&gt;</span></span>
<span id="cb16-197"><a href="#cb16-197" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8     NA        NA     NA          NA     &lt;NA&gt;        NA         NA     &lt;NA&gt;</span></span>
<span id="cb16-198"><a href="#cb16-198" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   LenMeasType DateofCalculation Valid_Aphia Ship2 Ship3</span></span>
<span id="cb16-199"><a href="#cb16-199" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-200"><a href="#cb16-200" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-201"><a href="#cb16-201" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-202"><a href="#cb16-202" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-203"><a href="#cb16-203" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-204"><a href="#cb16-204" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-205"><a href="#cb16-205" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-206"><a href="#cb16-206" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8          NA          20220223          NA   SOL   SOL</span></span>
<span id="cb16-207"><a href="#cb16-207" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                        IDx sub_div Rect HaulVal StdSpecRecCode BySpecRecCode</span></span>
<span id="cb16-208"><a href="#cb16-208" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-209"><a href="#cb16-209" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-210"><a href="#cb16-210" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-211"><a href="#cb16-211" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-212"><a href="#cb16-212" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-213"><a href="#cb16-213" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-214"><a href="#cb16-214" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-215"><a href="#cb16-215" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-216"><a href="#cb16-216" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Fishing.line Month DataType HaulDur GroundSpeed                 haul.id</span></span>
<span id="cb16-217"><a href="#cb16-217" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           36     2        C      30           4 1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-218"><a href="#cb16-218" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           36     2        C      30           4 1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-219"><a href="#cb16-219" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           36     2        C      30           4 1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-220"><a href="#cb16-220" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           36     2        C      30           4 1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-221"><a href="#cb16-221" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           36     2        C      30           4 1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-222"><a href="#cb16-222" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           36     2        C      30           4 1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-223"><a href="#cb16-223" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7           36     2        C      30           4 1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-224"><a href="#cb16-224" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8           36     2        C      30           4 1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-225"><a href="#cb16-225" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ShootLat ShootLong     id_haul_stomach            Species CPUEun</span></span>
<span id="cb16-226"><a href="#cb16-226" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  54.7167      13.1 1995.1.2.GFR.38G3.3 Platichthys flesus      2</span></span>
<span id="cb16-227"><a href="#cb16-227" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  54.7167      13.1 1995.1.2.GFR.38G3.3 Platichthys flesus      2</span></span>
<span id="cb16-228"><a href="#cb16-228" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  54.7167      13.1 1995.1.2.GFR.38G3.3 Platichthys flesus      2</span></span>
<span id="cb16-229"><a href="#cb16-229" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  54.7167      13.1 1995.1.2.GFR.38G3.3 Platichthys flesus      2</span></span>
<span id="cb16-230"><a href="#cb16-230" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  54.7167      13.1 1995.1.2.GFR.38G3.3 Platichthys flesus      2</span></span>
<span id="cb16-231"><a href="#cb16-231" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  54.7167      13.1 1995.1.2.GFR.38G3.3 Platichthys flesus      2</span></span>
<span id="cb16-232"><a href="#cb16-232" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  54.7167      13.1 1995.1.2.GFR.38G3.3 Platichthys flesus      2</span></span>
<span id="cb16-233"><a href="#cb16-233" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  54.7167      13.1                &lt;NA&gt; Platichthys flesus      0</span></span>
<span id="cb16-234"><a href="#cb16-234" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(hlfleL, haul.id <span class="sc">==</span> test_id) <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>()</span>
<span id="cb16-235"><a href="#cb16-235" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   RecordType Survey Quarter Country Ship Gear SweepLngt GearEx DoorType StNo</span></span>
<span id="cb16-236"><a href="#cb16-236" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   25</span></span>
<span id="cb16-237"><a href="#cb16-237" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   25</span></span>
<span id="cb16-238"><a href="#cb16-238" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   25</span></span>
<span id="cb16-239"><a href="#cb16-239" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   25</span></span>
<span id="cb16-240"><a href="#cb16-240" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   25</span></span>
<span id="cb16-241"><a href="#cb16-241" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   25</span></span>
<span id="cb16-242"><a href="#cb16-242" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7         HH   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   25</span></span>
<span id="cb16-243"><a href="#cb16-243" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   HaulNo Year SpecCodeType SpecCode   SpecVal  Sex TotalNo CatIdentifier NoMeas</span></span>
<span id="cb16-244"><a href="#cb16-244" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      3 1995            W   127141         1    M       8             1      7</span></span>
<span id="cb16-245"><a href="#cb16-245" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2      3 1995            W   127141         1    M       8             1      7</span></span>
<span id="cb16-246"><a href="#cb16-246" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3      3 1995            W   127141         1    M       8             1      7</span></span>
<span id="cb16-247"><a href="#cb16-247" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4      3 1995            W   127141         1    M       8             1      7</span></span>
<span id="cb16-248"><a href="#cb16-248" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5      3 1995            W   127141         1    F       6             1      7</span></span>
<span id="cb16-249"><a href="#cb16-249" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6      3 1995            W   127141         1    F       6             1      7</span></span>
<span id="cb16-250"><a href="#cb16-250" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7      3 1995         &lt;NA&gt;       NA zeroCatch &lt;NA&gt;      NA            NA     NA</span></span>
<span id="cb16-251"><a href="#cb16-251" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   SubFactor SubWgt CatCatchWgt LngtCode LngtClass HLNoAtLngt DevStage</span></span>
<span id="cb16-252"><a href="#cb16-252" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         1     NA          36        1        22          2     &lt;NA&gt;</span></span>
<span id="cb16-253"><a href="#cb16-253" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         1     NA          36        1        24          2     &lt;NA&gt;</span></span>
<span id="cb16-254"><a href="#cb16-254" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         1     NA          36        1        27          2     &lt;NA&gt;</span></span>
<span id="cb16-255"><a href="#cb16-255" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         1     NA          36        1        28          2     &lt;NA&gt;</span></span>
<span id="cb16-256"><a href="#cb16-256" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         1     NA          36        1        29          2     &lt;NA&gt;</span></span>
<span id="cb16-257"><a href="#cb16-257" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6         1     NA          36        1        30          2     &lt;NA&gt;</span></span>
<span id="cb16-258"><a href="#cb16-258" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7        NA     NA          NA     &lt;NA&gt;        NA         NA     &lt;NA&gt;</span></span>
<span id="cb16-259"><a href="#cb16-259" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   LenMeasType DateofCalculation Valid_Aphia Ship2 Ship3</span></span>
<span id="cb16-260"><a href="#cb16-260" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-261"><a href="#cb16-261" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-262"><a href="#cb16-262" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-263"><a href="#cb16-263" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-264"><a href="#cb16-264" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-265"><a href="#cb16-265" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          NA          20190207      127141   SOL   SOL</span></span>
<span id="cb16-266"><a href="#cb16-266" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7          NA          20220223          NA   SOL   SOL</span></span>
<span id="cb16-267"><a href="#cb16-267" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                        IDx sub_div Rect HaulVal StdSpecRecCode BySpecRecCode</span></span>
<span id="cb16-268"><a href="#cb16-268" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-269"><a href="#cb16-269" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-270"><a href="#cb16-270" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-271"><a href="#cb16-271" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-272"><a href="#cb16-272" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-273"><a href="#cb16-273" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-274"><a href="#cb16-274" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 1995.1.GFR.06S1.H20.25.3      24 38G3       V              1             1</span></span>
<span id="cb16-275"><a href="#cb16-275" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Fishing.line Month DataType HaulDur GroundSpeed                 haul.id</span></span>
<span id="cb16-276"><a href="#cb16-276" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           36     2        C      30           4 1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-277"><a href="#cb16-277" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           36     2        C      30           4 1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-278"><a href="#cb16-278" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           36     2        C      30           4 1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-279"><a href="#cb16-279" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           36     2        C      30           4 1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-280"><a href="#cb16-280" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           36     2        C      30           4 1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-281"><a href="#cb16-281" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           36     2        C      30           4 1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-282"><a href="#cb16-282" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7           36     2        C      30           4 1995:1:GFR:SOL:H20:25:3</span></span>
<span id="cb16-283"><a href="#cb16-283" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ShootLat ShootLong     id_haul_stomach            Species CPUEun</span></span>
<span id="cb16-284"><a href="#cb16-284" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  54.7167      13.1 1995.1.2.GFR.38G3.3 Platichthys flesus      2</span></span>
<span id="cb16-285"><a href="#cb16-285" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  54.7167      13.1 1995.1.2.GFR.38G3.3 Platichthys flesus      2</span></span>
<span id="cb16-286"><a href="#cb16-286" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  54.7167      13.1 1995.1.2.GFR.38G3.3 Platichthys flesus      2</span></span>
<span id="cb16-287"><a href="#cb16-287" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  54.7167      13.1 1995.1.2.GFR.38G3.3 Platichthys flesus      4</span></span>
<span id="cb16-288"><a href="#cb16-288" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  54.7167      13.1 1995.1.2.GFR.38G3.3 Platichthys flesus      2</span></span>
<span id="cb16-289"><a href="#cb16-289" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  54.7167      13.1 1995.1.2.GFR.38G3.3 Platichthys flesus      2</span></span>
<span id="cb16-290"><a href="#cb16-290" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  54.7167      13.1                &lt;NA&gt; Platichthys flesus      0</span></span>
<span id="cb16-291"><a href="#cb16-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-292"><a href="#cb16-292" aria-hidden="true" tabindex="-1"></a><span class="co"># Do we still have 0 catches?</span></span>
<span id="cb16-293"><a href="#cb16-293" aria-hidden="true" tabindex="-1"></a>hlfleL <span class="sc">|&gt;</span></span>
<span id="cb16-294"><a href="#cb16-294" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb16-295"><a href="#cb16-295" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb16-296"><a href="#cb16-296" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb16-297"><a href="#cb16-297" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb16-298"><a href="#cb16-298" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 10,013 × 3</span></span>
<span id="cb16-299"><a href="#cb16-299" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    haul.id                     Year CPUEun_haul</span></span>
<span id="cb16-300"><a href="#cb16-300" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                      &lt;int&gt;       &lt;dbl&gt;</span></span>
<span id="cb16-301"><a href="#cb16-301" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 1993:1:DEN:DAN2:GRT:105:45  1993        2500</span></span>
<span id="cb16-302"><a href="#cb16-302" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 1993:1:DEN:DAN2:GRT:106:46  1993           8</span></span>
<span id="cb16-303"><a href="#cb16-303" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 1993:1:DEN:DAN2:GRT:107:47  1993          26</span></span>
<span id="cb16-304"><a href="#cb16-304" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 1993:1:DEN:DAN2:GRT:108:48  1993          34</span></span>
<span id="cb16-305"><a href="#cb16-305" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 1993:1:DEN:DAN2:GRT:109:49  1993           8</span></span>
<span id="cb16-306"><a href="#cb16-306" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 1993:1:DEN:DAN2:GRT:110:50  1993           8</span></span>
<span id="cb16-307"><a href="#cb16-307" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 1993:1:DEN:DAN2:GRT:114:53  1993           1</span></span>
<span id="cb16-308"><a href="#cb16-308" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 1993:1:DEN:DAN2:GRT:115:54  1993           3</span></span>
<span id="cb16-309"><a href="#cb16-309" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 1993:1:DEN:DAN2:GRT:117:56  1993         729</span></span>
<span id="cb16-310"><a href="#cb16-310" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1993:1:DEN:DAN2:GRT:11:6    1993          11</span></span>
<span id="cb16-311"><a href="#cb16-311" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 10,003 more rows</span></span>
<span id="cb16-312"><a href="#cb16-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-313"><a href="#cb16-313" aria-hidden="true" tabindex="-1"></a>hlfleL <span class="sc">|&gt;</span></span>
<span id="cb16-314"><a href="#cb16-314" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb16-315"><a href="#cb16-315" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb16-316"><a href="#cb16-316" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb16-317"><a href="#cb16-317" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb16-318"><a href="#cb16-318" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, zero_catch) <span class="sc">|&gt;</span> </span>
<span id="cb16-319"><a href="#cb16-319" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb16-320"><a href="#cb16-320" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> n, <span class="at">fill =</span> zero_catch)) <span class="sc">+</span></span>
<span id="cb16-321"><a href="#cb16-321" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-11-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plaice</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>hlpla0 <span class="ot">&lt;-</span> hlpla0 <span class="sc">|&gt;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEun =</span> <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">&amp;</span> DataType <span class="sc">==</span> <span class="st">"C"</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>                         HLNoAtLngt,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>                         </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">&amp;</span> DataType <span class="sc">==</span> <span class="st">"R"</span>,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>                                HLNoAtLngt<span class="sc">/</span>(HaulDur<span class="sc">/</span><span class="dv">60</span>),</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>                                </span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>                                <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">&amp;</span> DataType <span class="sc">==</span> <span class="st">"S"</span>,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>                                       (HLNoAtLngt<span class="sc">*</span>SubFactor)<span class="sc">/</span>(HaulDur<span class="sc">/</span><span class="dv">60</span>),</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>                                       </span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>                                       <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"zeroCatch"</span>, <span class="dv">0</span>, <span class="cn">NA</span>)))))</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot and fill by zero catch</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>hlpla0 <span class="sc">|&gt;</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5,568 × 3</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    haul.id                     Year CPUEun_haul</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                      &lt;int&gt;       &lt;dbl&gt;</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 1993:1:DEN:DAN2:GRT:11:6    1993           3</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 1993:1:DEN:DAN2:GRT:13:7    1993           1</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 1993:1:DEN:DAN2:GRT:146:68  1993           1</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 1993:1:DEN:DAN2:GRT:160:70  1993           2</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 1993:1:DEN:DAN2:GRT:161:71  1993           2</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 1993:1:DEN:DAN2:GRT:17:9    1993           1</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 1993:1:DEN:DAN2:GRT:23:12   1993           1</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 1993:1:DEN:DAN2:GRT:45:21   1993           2</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 1993:1:DEN:DAN2:GRT:48:22   1993           1</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1993:1:DEN:DAN2:GRT:55:26   1993           3</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 5,558 more rows</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>hlpla0 <span class="sc">|&gt;</span></span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, zero_catch) <span class="sc">|&gt;</span> </span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> n, <span class="at">fill =</span> zero_catch)) <span class="sc">+</span></span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-11-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Some rows have multiple rows per combination of length class and haul id (i suppose often because it's split by sex), so we need to sum it up </span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>hlpla0 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="fu">distinct</span>(n)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 1</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       n</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;int&gt;</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     1</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     2</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>hlpla0 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="fu">filter</span>(n <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">20</span>)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         X RecordType Survey Quarter Country Ship Gear SweepLngt GearEx DoorType</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   99640         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   99642         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  100042         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  100044         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  100318         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  100320         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  100322         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  100324         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  100325         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 100326         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 100327         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12 100329         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13 100543         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14 100545         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15 100673         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16 100674         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17 100675         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18 100676         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19 100677         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20 100678         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    StNo HaulNo Year SpecCodeType SpecCode SpecVal Sex TotalNo CatIdentifier</span></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    39     49 1995            W   127143       1   M       8             1</span></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    39     49 1995            W   127143       1   F      18             1</span></span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    42     35 1995            W   127143       1   M       2             1</span></span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    42     35 1995            W   127143       1   F       6             1</span></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    44     39 1995            W   127143       1   M     112             1</span></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    44     39 1995            W   127143       1   M     112             1</span></span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7    44     39 1995            W   127143       1   M     112             1</span></span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8    44     39 1995            W   127143       1   M     112             1</span></span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9    44     39 1995            W   127143       1   F      24             1</span></span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10   44     39 1995            W   127143       1   F      24             1</span></span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11   44     39 1995            W   127143       1   F      24             1</span></span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12   44     39 1995            W   127143       1   F      24             1</span></span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13   45     45 1995            W   127143       1   M     147             1</span></span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14   45     45 1995            W   127143       1   F      18             1</span></span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15   46     59 1995            W   127143       1   M      72             1</span></span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16   46     59 1995            W   127143       1   M      72             1</span></span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17   46     59 1995            W   127143       1   M      72             1</span></span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18   46     59 1995            W   127143       1   M      72             1</span></span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19   46     59 1995            W   127143       1   M      72             1</span></span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20   46     59 1995            W   127143       1   M      72             1</span></span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    NoMeas SubFactor SubWgt CatCatchWgt LngtCode LngtClass HLNoAtLngt DevStage</span></span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      13         1     NA          61        1        28          2     &lt;NA&gt;</span></span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2      13         1     NA          61        1        28          4     &lt;NA&gt;</span></span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3       4         1     NA          18        1        27          2     &lt;NA&gt;</span></span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4       4         1     NA          18        1        27          2     &lt;NA&gt;</span></span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5      68         1     NA         312        1        26         12     &lt;NA&gt;</span></span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6      68         1     NA         312        1        28         12     &lt;NA&gt;</span></span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7      68         1     NA         312        1        30          6     &lt;NA&gt;</span></span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8      68         1     NA         312        1        34          2     &lt;NA&gt;</span></span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9      68         1     NA         312        1        26          2     &lt;NA&gt;</span></span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     68         1     NA         312        1        28          4     &lt;NA&gt;</span></span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11     68         1     NA         312        1        30          4     &lt;NA&gt;</span></span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12     68         1     NA         312        1        34          6     &lt;NA&gt;</span></span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13     17         1     NA         317        1        30          9     &lt;NA&gt;</span></span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14     17         1     NA         317        1        30          9     &lt;NA&gt;</span></span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15     50         1     NA         208        1        26         14     &lt;NA&gt;</span></span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16     50         1     NA         208        1        27         16     &lt;NA&gt;</span></span>
<span id="cb18-69"><a href="#cb18-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17     50         1     NA         208        1        28          8     &lt;NA&gt;</span></span>
<span id="cb18-70"><a href="#cb18-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18     50         1     NA         208        1        29          4     &lt;NA&gt;</span></span>
<span id="cb18-71"><a href="#cb18-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19     50         1     NA         208        1        30          4     &lt;NA&gt;</span></span>
<span id="cb18-72"><a href="#cb18-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20     50         1     NA         208        1        31          2     &lt;NA&gt;</span></span>
<span id="cb18-73"><a href="#cb18-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    LenMeasType DateofCalculation Valid_Aphia Ship2 Ship3</span></span>
<span id="cb18-74"><a href="#cb18-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-75"><a href="#cb18-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-76"><a href="#cb18-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-77"><a href="#cb18-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-78"><a href="#cb18-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-79"><a href="#cb18-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-80"><a href="#cb18-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-81"><a href="#cb18-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-82"><a href="#cb18-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-83"><a href="#cb18-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-84"><a href="#cb18-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-85"><a href="#cb18-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-86"><a href="#cb18-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-87"><a href="#cb18-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-88"><a href="#cb18-88" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-89"><a href="#cb18-89" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-90"><a href="#cb18-90" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-91"><a href="#cb18-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-92"><a href="#cb18-92" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-93"><a href="#cb18-93" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-94"><a href="#cb18-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                          IDx sub_div Rect HaulVal StdSpecRecCode BySpecRecCode</span></span>
<span id="cb18-95"><a href="#cb18-95" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-96"><a href="#cb18-96" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-97"><a href="#cb18-97" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  1995.1.GFR.06S1.H20.42.35      24 38G3       V              3             1</span></span>
<span id="cb18-98"><a href="#cb18-98" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  1995.1.GFR.06S1.H20.42.35      24 38G3       V              3             1</span></span>
<span id="cb18-99"><a href="#cb18-99" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  1995.1.GFR.06S1.H20.44.39      24 39G3       V              1             1</span></span>
<span id="cb18-100"><a href="#cb18-100" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  1995.1.GFR.06S1.H20.44.39      24 39G3       V              1             1</span></span>
<span id="cb18-101"><a href="#cb18-101" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  1995.1.GFR.06S1.H20.44.39      24 39G3       V              1             1</span></span>
<span id="cb18-102"><a href="#cb18-102" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  1995.1.GFR.06S1.H20.44.39      24 39G3       V              1             1</span></span>
<span id="cb18-103"><a href="#cb18-103" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  1995.1.GFR.06S1.H20.44.39      24 39G3       V              1             1</span></span>
<span id="cb18-104"><a href="#cb18-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1995.1.GFR.06S1.H20.44.39      24 39G3       V              1             1</span></span>
<span id="cb18-105"><a href="#cb18-105" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 1995.1.GFR.06S1.H20.44.39      24 39G3       V              1             1</span></span>
<span id="cb18-106"><a href="#cb18-106" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12 1995.1.GFR.06S1.H20.44.39      24 39G3       V              1             1</span></span>
<span id="cb18-107"><a href="#cb18-107" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13 1995.1.GFR.06S1.H20.45.45      24 39G3       V              1             1</span></span>
<span id="cb18-108"><a href="#cb18-108" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14 1995.1.GFR.06S1.H20.45.45      24 39G3       V              1             1</span></span>
<span id="cb18-109"><a href="#cb18-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15 1995.1.GFR.06S1.H20.46.59      24 39G4       V              1             1</span></span>
<span id="cb18-110"><a href="#cb18-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16 1995.1.GFR.06S1.H20.46.59      24 39G4       V              1             1</span></span>
<span id="cb18-111"><a href="#cb18-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17 1995.1.GFR.06S1.H20.46.59      24 39G4       V              1             1</span></span>
<span id="cb18-112"><a href="#cb18-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18 1995.1.GFR.06S1.H20.46.59      24 39G4       V              1             1</span></span>
<span id="cb18-113"><a href="#cb18-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19 1995.1.GFR.06S1.H20.46.59      24 39G4       V              1             1</span></span>
<span id="cb18-114"><a href="#cb18-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20 1995.1.GFR.06S1.H20.46.59      24 39G4       V              1             1</span></span>
<span id="cb18-115"><a href="#cb18-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Fishing.line Month DataType HaulDur GroundSpeed                  haul.id</span></span>
<span id="cb18-116"><a href="#cb18-116" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1            36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-117"><a href="#cb18-117" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2            36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-118"><a href="#cb18-118" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3            36     2        C      30         3.6 1995:1:GFR:SOL:H20:42:35</span></span>
<span id="cb18-119"><a href="#cb18-119" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4            36     2        C      30         3.6 1995:1:GFR:SOL:H20:42:35</span></span>
<span id="cb18-120"><a href="#cb18-120" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5            36     2        C      30         4.2 1995:1:GFR:SOL:H20:44:39</span></span>
<span id="cb18-121"><a href="#cb18-121" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6            36     2        C      30         4.2 1995:1:GFR:SOL:H20:44:39</span></span>
<span id="cb18-122"><a href="#cb18-122" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7            36     2        C      30         4.2 1995:1:GFR:SOL:H20:44:39</span></span>
<span id="cb18-123"><a href="#cb18-123" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8            36     2        C      30         4.2 1995:1:GFR:SOL:H20:44:39</span></span>
<span id="cb18-124"><a href="#cb18-124" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9            36     2        C      30         4.2 1995:1:GFR:SOL:H20:44:39</span></span>
<span id="cb18-125"><a href="#cb18-125" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10           36     2        C      30         4.2 1995:1:GFR:SOL:H20:44:39</span></span>
<span id="cb18-126"><a href="#cb18-126" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11           36     2        C      30         4.2 1995:1:GFR:SOL:H20:44:39</span></span>
<span id="cb18-127"><a href="#cb18-127" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12           36     2        C      30         4.2 1995:1:GFR:SOL:H20:44:39</span></span>
<span id="cb18-128"><a href="#cb18-128" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13           36     2        C      31         3.8 1995:1:GFR:SOL:H20:45:45</span></span>
<span id="cb18-129"><a href="#cb18-129" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14           36     2        C      31         3.8 1995:1:GFR:SOL:H20:45:45</span></span>
<span id="cb18-130"><a href="#cb18-130" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15           36     2        C      30         3.8 1995:1:GFR:SOL:H20:46:59</span></span>
<span id="cb18-131"><a href="#cb18-131" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16           36     2        C      30         3.8 1995:1:GFR:SOL:H20:46:59</span></span>
<span id="cb18-132"><a href="#cb18-132" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17           36     2        C      30         3.8 1995:1:GFR:SOL:H20:46:59</span></span>
<span id="cb18-133"><a href="#cb18-133" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18           36     2        C      30         3.8 1995:1:GFR:SOL:H20:46:59</span></span>
<span id="cb18-134"><a href="#cb18-134" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19           36     2        C      30         3.8 1995:1:GFR:SOL:H20:46:59</span></span>
<span id="cb18-135"><a href="#cb18-135" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20           36     2        C      30         3.8 1995:1:GFR:SOL:H20:46:59</span></span>
<span id="cb18-136"><a href="#cb18-136" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ShootLat ShootLong      id_haul_stomach               Species CPUEun n</span></span>
<span id="cb18-137"><a href="#cb18-137" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      2 2</span></span>
<span id="cb18-138"><a href="#cb18-138" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      4 2</span></span>
<span id="cb18-139"><a href="#cb18-139" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   54.9167     13.10 1995.1.2.GFR.38G3.35 Pleuronectes platessa      2 2</span></span>
<span id="cb18-140"><a href="#cb18-140" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   54.9167     13.10 1995.1.2.GFR.38G3.35 Pleuronectes platessa      2 2</span></span>
<span id="cb18-141"><a href="#cb18-141" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   55.0333     13.40 1995.1.2.GFR.39G3.39 Pleuronectes platessa     12 2</span></span>
<span id="cb18-142"><a href="#cb18-142" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   55.0333     13.40 1995.1.2.GFR.39G3.39 Pleuronectes platessa     12 2</span></span>
<span id="cb18-143"><a href="#cb18-143" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   55.0333     13.40 1995.1.2.GFR.39G3.39 Pleuronectes platessa      6 2</span></span>
<span id="cb18-144"><a href="#cb18-144" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8   55.0333     13.40 1995.1.2.GFR.39G3.39 Pleuronectes platessa      2 2</span></span>
<span id="cb18-145"><a href="#cb18-145" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9   55.0333     13.40 1995.1.2.GFR.39G3.39 Pleuronectes platessa      2 2</span></span>
<span id="cb18-146"><a href="#cb18-146" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  55.0333     13.40 1995.1.2.GFR.39G3.39 Pleuronectes platessa      4 2</span></span>
<span id="cb18-147"><a href="#cb18-147" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11  55.0333     13.40 1995.1.2.GFR.39G3.39 Pleuronectes platessa      4 2</span></span>
<span id="cb18-148"><a href="#cb18-148" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12  55.0333     13.40 1995.1.2.GFR.39G3.39 Pleuronectes platessa      6 2</span></span>
<span id="cb18-149"><a href="#cb18-149" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13  55.0667     13.75 1995.1.2.GFR.39G3.45 Pleuronectes platessa      9 2</span></span>
<span id="cb18-150"><a href="#cb18-150" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14  55.0667     13.75 1995.1.2.GFR.39G3.45 Pleuronectes platessa      9 2</span></span>
<span id="cb18-151"><a href="#cb18-151" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15  55.1500     14.20 1995.1.2.GFR.39G4.59 Pleuronectes platessa     14 2</span></span>
<span id="cb18-152"><a href="#cb18-152" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16  55.1500     14.20 1995.1.2.GFR.39G4.59 Pleuronectes platessa     16 2</span></span>
<span id="cb18-153"><a href="#cb18-153" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17  55.1500     14.20 1995.1.2.GFR.39G4.59 Pleuronectes platessa      8 2</span></span>
<span id="cb18-154"><a href="#cb18-154" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18  55.1500     14.20 1995.1.2.GFR.39G4.59 Pleuronectes platessa      4 2</span></span>
<span id="cb18-155"><a href="#cb18-155" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19  55.1500     14.20 1995.1.2.GFR.39G4.59 Pleuronectes platessa      4 2</span></span>
<span id="cb18-156"><a href="#cb18-156" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20  55.1500     14.20 1995.1.2.GFR.39G4.59 Pleuronectes platessa      2 2</span></span>
<span id="cb18-157"><a href="#cb18-157" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> hlpla0 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="fu">filter</span>(n <span class="sc">==</span> <span class="dv">2</span>)</span>
<span id="cb18-158"><a href="#cb18-158" aria-hidden="true" tabindex="-1"></a>test_id <span class="ot">&lt;-</span> test<span class="sc">$</span>haul.id[<span class="dv">2</span>]</span>
<span id="cb18-159"><a href="#cb18-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-160"><a href="#cb18-160" aria-hidden="true" tabindex="-1"></a>hlplaL <span class="ot">&lt;-</span> hlpla0 <span class="sc">|&gt;</span> </span>
<span id="cb18-161"><a href="#cb18-161" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> </span>
<span id="cb18-162"><a href="#cb18-162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEun =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span></span>
<span id="cb18-163"><a href="#cb18-163" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb18-164"><a href="#cb18-164" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id3 =</span> <span class="fu">paste</span>(haul.id, LngtClass)) <span class="sc">|&gt;</span> </span>
<span id="cb18-165"><a href="#cb18-165" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id3, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-166"><a href="#cb18-166" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>X, <span class="sc">-</span>id3) <span class="co"># Clean up a bit</span></span>
<span id="cb18-167"><a href="#cb18-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-168"><a href="#cb18-168" aria-hidden="true" tabindex="-1"></a><span class="co"># Check with an ID</span></span>
<span id="cb18-169"><a href="#cb18-169" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(hlpla0, haul.id <span class="sc">==</span> test_id)</span>
<span id="cb18-170"><a href="#cb18-170" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        X RecordType Survey Quarter Country Ship Gear SweepLngt GearEx DoorType</span></span>
<span id="cb18-171"><a href="#cb18-171" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  99637         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-172"><a href="#cb18-172" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  99638         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-173"><a href="#cb18-173" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  99639         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-174"><a href="#cb18-174" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  99640         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-175"><a href="#cb18-175" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  99641         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-176"><a href="#cb18-176" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  99642         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-177"><a href="#cb18-177" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  99643         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-178"><a href="#cb18-178" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  99644         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-179"><a href="#cb18-179" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  99645         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-180"><a href="#cb18-180" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  1887         HH   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb18-181"><a href="#cb18-181" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    StNo HaulNo Year SpecCodeType SpecCode   SpecVal  Sex TotalNo CatIdentifier</span></span>
<span id="cb18-182"><a href="#cb18-182" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    39     49 1995            W   127143         1    M       8             1</span></span>
<span id="cb18-183"><a href="#cb18-183" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    39     49 1995            W   127143         1    M       8             1</span></span>
<span id="cb18-184"><a href="#cb18-184" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    39     49 1995            W   127143         1    M       8             1</span></span>
<span id="cb18-185"><a href="#cb18-185" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    39     49 1995            W   127143         1    M       8             1</span></span>
<span id="cb18-186"><a href="#cb18-186" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    39     49 1995            W   127143         1    F      18             1</span></span>
<span id="cb18-187"><a href="#cb18-187" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    39     49 1995            W   127143         1    F      18             1</span></span>
<span id="cb18-188"><a href="#cb18-188" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7    39     49 1995            W   127143         1    F      18             1</span></span>
<span id="cb18-189"><a href="#cb18-189" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8    39     49 1995            W   127143         1    F      18             1</span></span>
<span id="cb18-190"><a href="#cb18-190" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9    39     49 1995            W   127143         1    F      18             1</span></span>
<span id="cb18-191"><a href="#cb18-191" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10   39     49 1995         &lt;NA&gt;       NA zeroCatch &lt;NA&gt;      NA            NA</span></span>
<span id="cb18-192"><a href="#cb18-192" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    NoMeas SubFactor SubWgt CatCatchWgt LngtCode LngtClass HLNoAtLngt DevStage</span></span>
<span id="cb18-193"><a href="#cb18-193" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      13         1     NA          61        1        23          2     &lt;NA&gt;</span></span>
<span id="cb18-194"><a href="#cb18-194" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2      13         1     NA          61        1        25          2     &lt;NA&gt;</span></span>
<span id="cb18-195"><a href="#cb18-195" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3      13         1     NA          61        1        26          2     &lt;NA&gt;</span></span>
<span id="cb18-196"><a href="#cb18-196" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4      13         1     NA          61        1        28          2     &lt;NA&gt;</span></span>
<span id="cb18-197"><a href="#cb18-197" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5      13         1     NA          61        1        27          2     &lt;NA&gt;</span></span>
<span id="cb18-198"><a href="#cb18-198" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6      13         1     NA          61        1        28          4     &lt;NA&gt;</span></span>
<span id="cb18-199"><a href="#cb18-199" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7      13         1     NA          61        1        31          6     &lt;NA&gt;</span></span>
<span id="cb18-200"><a href="#cb18-200" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8      13         1     NA          61        1        32          2     &lt;NA&gt;</span></span>
<span id="cb18-201"><a href="#cb18-201" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9      13         1     NA          61        1        33          4     &lt;NA&gt;</span></span>
<span id="cb18-202"><a href="#cb18-202" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     NA        NA     NA          NA     &lt;NA&gt;        NA         NA     &lt;NA&gt;</span></span>
<span id="cb18-203"><a href="#cb18-203" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    LenMeasType DateofCalculation Valid_Aphia Ship2 Ship3</span></span>
<span id="cb18-204"><a href="#cb18-204" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-205"><a href="#cb18-205" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-206"><a href="#cb18-206" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-207"><a href="#cb18-207" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-208"><a href="#cb18-208" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-209"><a href="#cb18-209" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-210"><a href="#cb18-210" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-211"><a href="#cb18-211" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-212"><a href="#cb18-212" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9           NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-213"><a href="#cb18-213" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10          NA          20220223          NA   SOL   SOL</span></span>
<span id="cb18-214"><a href="#cb18-214" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                          IDx sub_div Rect HaulVal StdSpecRecCode BySpecRecCode</span></span>
<span id="cb18-215"><a href="#cb18-215" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-216"><a href="#cb18-216" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-217"><a href="#cb18-217" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-218"><a href="#cb18-218" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-219"><a href="#cb18-219" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-220"><a href="#cb18-220" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-221"><a href="#cb18-221" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-222"><a href="#cb18-222" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-223"><a href="#cb18-223" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-224"><a href="#cb18-224" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-225"><a href="#cb18-225" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Fishing.line Month DataType HaulDur GroundSpeed                  haul.id</span></span>
<span id="cb18-226"><a href="#cb18-226" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1            36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-227"><a href="#cb18-227" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2            36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-228"><a href="#cb18-228" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3            36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-229"><a href="#cb18-229" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4            36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-230"><a href="#cb18-230" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5            36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-231"><a href="#cb18-231" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6            36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-232"><a href="#cb18-232" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7            36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-233"><a href="#cb18-233" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8            36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-234"><a href="#cb18-234" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9            36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-235"><a href="#cb18-235" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10           36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-236"><a href="#cb18-236" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ShootLat ShootLong      id_haul_stomach               Species CPUEun</span></span>
<span id="cb18-237"><a href="#cb18-237" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      2</span></span>
<span id="cb18-238"><a href="#cb18-238" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      2</span></span>
<span id="cb18-239"><a href="#cb18-239" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      2</span></span>
<span id="cb18-240"><a href="#cb18-240" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      2</span></span>
<span id="cb18-241"><a href="#cb18-241" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      2</span></span>
<span id="cb18-242"><a href="#cb18-242" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      4</span></span>
<span id="cb18-243"><a href="#cb18-243" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      6</span></span>
<span id="cb18-244"><a href="#cb18-244" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8   54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      2</span></span>
<span id="cb18-245"><a href="#cb18-245" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9   54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      4</span></span>
<span id="cb18-246"><a href="#cb18-246" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  54.9667     13.85                 &lt;NA&gt; Pleuronectes platessa      0</span></span>
<span id="cb18-247"><a href="#cb18-247" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(hlplaL, haul.id <span class="sc">==</span> test_id) <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>()</span>
<span id="cb18-248"><a href="#cb18-248" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   RecordType Survey Quarter Country Ship Gear SweepLngt GearEx DoorType StNo</span></span>
<span id="cb18-249"><a href="#cb18-249" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   39</span></span>
<span id="cb18-250"><a href="#cb18-250" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   39</span></span>
<span id="cb18-251"><a href="#cb18-251" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   39</span></span>
<span id="cb18-252"><a href="#cb18-252" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   39</span></span>
<span id="cb18-253"><a href="#cb18-253" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   39</span></span>
<span id="cb18-254"><a href="#cb18-254" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   39</span></span>
<span id="cb18-255"><a href="#cb18-255" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   39</span></span>
<span id="cb18-256"><a href="#cb18-256" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   39</span></span>
<span id="cb18-257"><a href="#cb18-257" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9         HH   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   39</span></span>
<span id="cb18-258"><a href="#cb18-258" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   HaulNo Year SpecCodeType SpecCode   SpecVal  Sex TotalNo CatIdentifier NoMeas</span></span>
<span id="cb18-259"><a href="#cb18-259" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     49 1995            W   127143         1    M       8             1     13</span></span>
<span id="cb18-260"><a href="#cb18-260" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     49 1995            W   127143         1    M       8             1     13</span></span>
<span id="cb18-261"><a href="#cb18-261" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     49 1995            W   127143         1    M       8             1     13</span></span>
<span id="cb18-262"><a href="#cb18-262" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     49 1995            W   127143         1    M       8             1     13</span></span>
<span id="cb18-263"><a href="#cb18-263" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5     49 1995            W   127143         1    F      18             1     13</span></span>
<span id="cb18-264"><a href="#cb18-264" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6     49 1995            W   127143         1    F      18             1     13</span></span>
<span id="cb18-265"><a href="#cb18-265" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7     49 1995            W   127143         1    F      18             1     13</span></span>
<span id="cb18-266"><a href="#cb18-266" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8     49 1995            W   127143         1    F      18             1     13</span></span>
<span id="cb18-267"><a href="#cb18-267" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9     49 1995         &lt;NA&gt;       NA zeroCatch &lt;NA&gt;      NA            NA     NA</span></span>
<span id="cb18-268"><a href="#cb18-268" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   SubFactor SubWgt CatCatchWgt LngtCode LngtClass HLNoAtLngt DevStage</span></span>
<span id="cb18-269"><a href="#cb18-269" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         1     NA          61        1        23          2     &lt;NA&gt;</span></span>
<span id="cb18-270"><a href="#cb18-270" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         1     NA          61        1        25          2     &lt;NA&gt;</span></span>
<span id="cb18-271"><a href="#cb18-271" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         1     NA          61        1        26          2     &lt;NA&gt;</span></span>
<span id="cb18-272"><a href="#cb18-272" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         1     NA          61        1        28          2     &lt;NA&gt;</span></span>
<span id="cb18-273"><a href="#cb18-273" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         1     NA          61        1        27          2     &lt;NA&gt;</span></span>
<span id="cb18-274"><a href="#cb18-274" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6         1     NA          61        1        31          6     &lt;NA&gt;</span></span>
<span id="cb18-275"><a href="#cb18-275" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7         1     NA          61        1        32          2     &lt;NA&gt;</span></span>
<span id="cb18-276"><a href="#cb18-276" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8         1     NA          61        1        33          4     &lt;NA&gt;</span></span>
<span id="cb18-277"><a href="#cb18-277" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9        NA     NA          NA     &lt;NA&gt;        NA         NA     &lt;NA&gt;</span></span>
<span id="cb18-278"><a href="#cb18-278" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   LenMeasType DateofCalculation Valid_Aphia Ship2 Ship3</span></span>
<span id="cb18-279"><a href="#cb18-279" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-280"><a href="#cb18-280" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-281"><a href="#cb18-281" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-282"><a href="#cb18-282" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-283"><a href="#cb18-283" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-284"><a href="#cb18-284" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-285"><a href="#cb18-285" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-286"><a href="#cb18-286" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8          NA          20190207      127143   SOL   SOL</span></span>
<span id="cb18-287"><a href="#cb18-287" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9          NA          20220223          NA   SOL   SOL</span></span>
<span id="cb18-288"><a href="#cb18-288" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                         IDx sub_div Rect HaulVal StdSpecRecCode BySpecRecCode</span></span>
<span id="cb18-289"><a href="#cb18-289" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-290"><a href="#cb18-290" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-291"><a href="#cb18-291" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-292"><a href="#cb18-292" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-293"><a href="#cb18-293" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-294"><a href="#cb18-294" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-295"><a href="#cb18-295" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-296"><a href="#cb18-296" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8 1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-297"><a href="#cb18-297" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9 1995.1.GFR.06S1.H20.39.49      24 38G3       V              1             1</span></span>
<span id="cb18-298"><a href="#cb18-298" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Fishing.line Month DataType HaulDur GroundSpeed                  haul.id</span></span>
<span id="cb18-299"><a href="#cb18-299" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-300"><a href="#cb18-300" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-301"><a href="#cb18-301" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-302"><a href="#cb18-302" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-303"><a href="#cb18-303" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-304"><a href="#cb18-304" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-305"><a href="#cb18-305" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7           36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-306"><a href="#cb18-306" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8           36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-307"><a href="#cb18-307" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9           36     2        C      30         3.4 1995:1:GFR:SOL:H20:39:49</span></span>
<span id="cb18-308"><a href="#cb18-308" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ShootLat ShootLong      id_haul_stomach               Species CPUEun</span></span>
<span id="cb18-309"><a href="#cb18-309" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      2</span></span>
<span id="cb18-310"><a href="#cb18-310" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      2</span></span>
<span id="cb18-311"><a href="#cb18-311" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      2</span></span>
<span id="cb18-312"><a href="#cb18-312" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      6</span></span>
<span id="cb18-313"><a href="#cb18-313" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      2</span></span>
<span id="cb18-314"><a href="#cb18-314" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      6</span></span>
<span id="cb18-315"><a href="#cb18-315" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      2</span></span>
<span id="cb18-316"><a href="#cb18-316" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  54.9667     13.85 1995.1.2.GFR.38G3.49 Pleuronectes platessa      4</span></span>
<span id="cb18-317"><a href="#cb18-317" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  54.9667     13.85                 &lt;NA&gt; Pleuronectes platessa      0</span></span>
<span id="cb18-318"><a href="#cb18-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-319"><a href="#cb18-319" aria-hidden="true" tabindex="-1"></a><span class="co"># Do we still have 0 catches?</span></span>
<span id="cb18-320"><a href="#cb18-320" aria-hidden="true" tabindex="-1"></a>hlplaL <span class="sc">|&gt;</span></span>
<span id="cb18-321"><a href="#cb18-321" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb18-322"><a href="#cb18-322" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb18-323"><a href="#cb18-323" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb18-324"><a href="#cb18-324" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb18-325"><a href="#cb18-325" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5,568 × 3</span></span>
<span id="cb18-326"><a href="#cb18-326" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    haul.id                     Year CPUEun_haul</span></span>
<span id="cb18-327"><a href="#cb18-327" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                      &lt;int&gt;       &lt;dbl&gt;</span></span>
<span id="cb18-328"><a href="#cb18-328" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 1993:1:DEN:DAN2:GRT:11:6    1993           3</span></span>
<span id="cb18-329"><a href="#cb18-329" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 1993:1:DEN:DAN2:GRT:13:7    1993           1</span></span>
<span id="cb18-330"><a href="#cb18-330" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 1993:1:DEN:DAN2:GRT:146:68  1993           1</span></span>
<span id="cb18-331"><a href="#cb18-331" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 1993:1:DEN:DAN2:GRT:160:70  1993           2</span></span>
<span id="cb18-332"><a href="#cb18-332" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 1993:1:DEN:DAN2:GRT:161:71  1993           2</span></span>
<span id="cb18-333"><a href="#cb18-333" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 1993:1:DEN:DAN2:GRT:17:9    1993           1</span></span>
<span id="cb18-334"><a href="#cb18-334" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 1993:1:DEN:DAN2:GRT:23:12   1993           1</span></span>
<span id="cb18-335"><a href="#cb18-335" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 1993:1:DEN:DAN2:GRT:45:21   1993           2</span></span>
<span id="cb18-336"><a href="#cb18-336" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 1993:1:DEN:DAN2:GRT:48:22   1993           1</span></span>
<span id="cb18-337"><a href="#cb18-337" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1993:1:DEN:DAN2:GRT:55:26   1993           3</span></span>
<span id="cb18-338"><a href="#cb18-338" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 5,558 more rows</span></span>
<span id="cb18-339"><a href="#cb18-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-340"><a href="#cb18-340" aria-hidden="true" tabindex="-1"></a>hlplaL <span class="sc">|&gt;</span></span>
<span id="cb18-341"><a href="#cb18-341" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb18-342"><a href="#cb18-342" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb18-343"><a href="#cb18-343" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb18-344"><a href="#cb18-344" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb18-345"><a href="#cb18-345" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, zero_catch) <span class="sc">|&gt;</span> </span>
<span id="cb18-346"><a href="#cb18-346" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb18-347"><a href="#cb18-347" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> n, <span class="at">fill =</span> zero_catch)) <span class="sc">+</span></span>
<span id="cb18-348"><a href="#cb18-348" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-11-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Dab</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>hldab0 <span class="ot">&lt;-</span> hldab0 <span class="sc">|&gt;</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEun =</span> <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">&amp;</span> DataType <span class="sc">==</span> <span class="st">"C"</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>                         HLNoAtLngt,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>                         </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">&amp;</span> DataType <span class="sc">==</span> <span class="st">"R"</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>                                HLNoAtLngt<span class="sc">/</span>(HaulDur<span class="sc">/</span><span class="dv">60</span>),</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>                                </span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>                                <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">&amp;</span> DataType <span class="sc">==</span> <span class="st">"S"</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>                                       (HLNoAtLngt<span class="sc">*</span>SubFactor)<span class="sc">/</span>(HaulDur<span class="sc">/</span><span class="dv">60</span>),</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>                                       </span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>                                       <span class="fu">ifelse</span>(SpecVal <span class="sc">==</span> <span class="st">"zeroCatch"</span>, <span class="dv">0</span>, <span class="cn">NA</span>)))))</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot and fill by zero catch</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>hldab0 <span class="sc">|&gt;</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1,930 × 3</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    haul.id                     Year CPUEun_haul</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                      &lt;int&gt;       &lt;dbl&gt;</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 1993:1:DEN:DAN2:GRT:11:6    1993           5</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 1993:1:DEN:DAN2:GRT:13:7    1993           1</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 1993:1:DEN:DAN2:GRT:14:8    1993           1</span></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 1993:1:DEN:DAN2:GRT:161:71  1993           1</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 1993:1:DEN:DAN2:GRT:162:72  1993           1</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 1993:1:DEN:DAN2:GRT:17:9    1993           1</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 1993:1:DEN:DAN2:GRT:1:1     1993           2</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 1993:1:DEN:DAN2:GRT:3:2     1993           4</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 1993:1:DEN:DAN2:GRT:4:3     1993           3</span></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1993:1:DEN:DAN2:GRT:52:24   1993           1</span></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 1,920 more rows</span></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>hldab0 <span class="sc">|&gt;</span></span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, zero_catch) <span class="sc">|&gt;</span> </span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> n, <span class="at">fill =</span> zero_catch)) <span class="sc">+</span></span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-11-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Some rows have multiple rows per combination of length class and haul id (i suppose often because it's split by sex), so we need to sum it up </span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>hldab0 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="fu">distinct</span>(n)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 1</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       n</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;int&gt;</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     1</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     2</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     3</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>hldab0 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="fu">filter</span>(n <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">20</span>)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         X RecordType Survey Quarter Country Ship Gear SweepLngt GearEx DoorType</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   98413         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   98414         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   98415         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   98416         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   98631         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   98632         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   98633         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8   98637         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9   98638         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  98639         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11  98726         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12  98727         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13  98728         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14  98730         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15  98731         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16  98733         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17 100025         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18 100026         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19 100027         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20 100030         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    StNo HaulNo Year SpecCodeType SpecCode SpecVal Sex TotalNo CatIdentifier</span></span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    27      6 1995            W   127139       1   M      10             1</span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    27      6 1995            W   127139       1   M      10             1</span></span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    27      6 1995            W   127139       1   F       4             1</span></span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4    27      6 1995            W   127139       1   F       4             1</span></span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5    32     31 1995            W   127139       1   M      24             1</span></span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6    32     31 1995            W   127139       1   M      24             1</span></span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7    32     31 1995            W   127139       1   M      24             1</span></span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8    32     31 1995            W   127139       1   F      12             1</span></span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9    32     31 1995            W   127139       1   F      12             1</span></span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10   32     31 1995            W   127139       1   F      12             1</span></span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11   33     29 1995            W   127139       1   M      20             1</span></span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12   33     29 1995            W   127139       1   M      20             1</span></span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13   33     29 1995            W   127139       1   M      20             1</span></span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14   33     29 1995            W   127139       1   F      20             1</span></span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15   33     29 1995            W   127139       1   F      20             1</span></span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16   33     29 1995            W   127139       1   F      20             1</span></span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17   42     35 1995            W   127139       1   M      38             1</span></span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18   42     35 1995            W   127139       1   M      38             1</span></span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19   42     35 1995            W   127139       1   M      38             1</span></span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20   42     35 1995            W   127139       1   M      38             1</span></span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    NoMeas SubFactor SubWgt CatCatchWgt LngtCode LngtClass HLNoAtLngt DevStage</span></span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1       7         1     NA           7        1        16          2     &lt;NA&gt;</span></span>
<span id="cb20-55"><a href="#cb20-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2       7         1     NA           7        1        17          4     &lt;NA&gt;</span></span>
<span id="cb20-56"><a href="#cb20-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3       7         1     NA           7        1        16          2     &lt;NA&gt;</span></span>
<span id="cb20-57"><a href="#cb20-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4       7         1     NA           7        1        17          2     &lt;NA&gt;</span></span>
<span id="cb20-58"><a href="#cb20-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5      18         1     NA          24        1        16          4     &lt;NA&gt;</span></span>
<span id="cb20-59"><a href="#cb20-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6      18         1     NA          24        1        17          6     &lt;NA&gt;</span></span>
<span id="cb20-60"><a href="#cb20-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7      18         1     NA          24        1        18          2     &lt;NA&gt;</span></span>
<span id="cb20-61"><a href="#cb20-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8      18         1     NA          24        1        16          2     &lt;NA&gt;</span></span>
<span id="cb20-62"><a href="#cb20-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9      18         1     NA          24        1        17          6     &lt;NA&gt;</span></span>
<span id="cb20-63"><a href="#cb20-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     18         1     NA          24        1        18          4     &lt;NA&gt;</span></span>
<span id="cb20-64"><a href="#cb20-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11     20         1     NA          43        1        17          4     &lt;NA&gt;</span></span>
<span id="cb20-65"><a href="#cb20-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12     20         1     NA          43        1        18          2     &lt;NA&gt;</span></span>
<span id="cb20-66"><a href="#cb20-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13     20         1     NA          43        1        20          4     &lt;NA&gt;</span></span>
<span id="cb20-67"><a href="#cb20-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14     20         1     NA          43        1        17          4     &lt;NA&gt;</span></span>
<span id="cb20-68"><a href="#cb20-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15     20         1     NA          43        1        18          4     &lt;NA&gt;</span></span>
<span id="cb20-69"><a href="#cb20-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16     20         1     NA          43        1        20          4     &lt;NA&gt;</span></span>
<span id="cb20-70"><a href="#cb20-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17     29         1     NA          82        1        18          4     &lt;NA&gt;</span></span>
<span id="cb20-71"><a href="#cb20-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18     29         1     NA          82        1        19          2     &lt;NA&gt;</span></span>
<span id="cb20-72"><a href="#cb20-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19     29         1     NA          82        1        20          2     &lt;NA&gt;</span></span>
<span id="cb20-73"><a href="#cb20-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20     29         1     NA          82        1        25          6     &lt;NA&gt;</span></span>
<span id="cb20-74"><a href="#cb20-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    LenMeasType DateofCalculation Valid_Aphia Ship2 Ship3</span></span>
<span id="cb20-75"><a href="#cb20-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-76"><a href="#cb20-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-77"><a href="#cb20-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-78"><a href="#cb20-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-79"><a href="#cb20-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-80"><a href="#cb20-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-81"><a href="#cb20-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7           NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-82"><a href="#cb20-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8           NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-83"><a href="#cb20-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9           NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-84"><a href="#cb20-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-85"><a href="#cb20-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-86"><a href="#cb20-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-87"><a href="#cb20-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-88"><a href="#cb20-88" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-89"><a href="#cb20-89" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-90"><a href="#cb20-90" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-91"><a href="#cb20-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-92"><a href="#cb20-92" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-93"><a href="#cb20-93" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-94"><a href="#cb20-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-95"><a href="#cb20-95" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                          IDx sub_div Rect HaulVal StdSpecRecCode BySpecRecCode</span></span>
<span id="cb20-96"><a href="#cb20-96" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-97"><a href="#cb20-97" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-98"><a href="#cb20-98" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-99"><a href="#cb20-99" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-100"><a href="#cb20-100" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb20-101"><a href="#cb20-101" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb20-102"><a href="#cb20-102" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb20-103"><a href="#cb20-103" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb20-104"><a href="#cb20-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb20-105"><a href="#cb20-105" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1995.1.GFR.06S1.H20.32.31      24 38G3       V              1             1</span></span>
<span id="cb20-106"><a href="#cb20-106" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 1995.1.GFR.06S1.H20.33.29      24 38G3       V              1             1</span></span>
<span id="cb20-107"><a href="#cb20-107" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12 1995.1.GFR.06S1.H20.33.29      24 38G3       V              1             1</span></span>
<span id="cb20-108"><a href="#cb20-108" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13 1995.1.GFR.06S1.H20.33.29      24 38G3       V              1             1</span></span>
<span id="cb20-109"><a href="#cb20-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14 1995.1.GFR.06S1.H20.33.29      24 38G3       V              1             1</span></span>
<span id="cb20-110"><a href="#cb20-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15 1995.1.GFR.06S1.H20.33.29      24 38G3       V              1             1</span></span>
<span id="cb20-111"><a href="#cb20-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16 1995.1.GFR.06S1.H20.33.29      24 38G3       V              1             1</span></span>
<span id="cb20-112"><a href="#cb20-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17 1995.1.GFR.06S1.H20.42.35      24 38G3       V              3             1</span></span>
<span id="cb20-113"><a href="#cb20-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18 1995.1.GFR.06S1.H20.42.35      24 38G3       V              3             1</span></span>
<span id="cb20-114"><a href="#cb20-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19 1995.1.GFR.06S1.H20.42.35      24 38G3       V              3             1</span></span>
<span id="cb20-115"><a href="#cb20-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20 1995.1.GFR.06S1.H20.42.35      24 38G3       V              3             1</span></span>
<span id="cb20-116"><a href="#cb20-116" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Fishing.line Month DataType HaulDur GroundSpeed                  haul.id</span></span>
<span id="cb20-117"><a href="#cb20-117" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1            36     2        C      30         3.6  1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-118"><a href="#cb20-118" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2            36     2        C      30         3.6  1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-119"><a href="#cb20-119" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3            36     2        C      30         3.6  1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-120"><a href="#cb20-120" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4            36     2        C      30         3.6  1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-121"><a href="#cb20-121" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5            36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb20-122"><a href="#cb20-122" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6            36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb20-123"><a href="#cb20-123" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7            36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb20-124"><a href="#cb20-124" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8            36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb20-125"><a href="#cb20-125" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9            36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb20-126"><a href="#cb20-126" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10           36     2        C      30         3.6 1995:1:GFR:SOL:H20:32:31</span></span>
<span id="cb20-127"><a href="#cb20-127" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11           36     2        C      31         3.6 1995:1:GFR:SOL:H20:33:29</span></span>
<span id="cb20-128"><a href="#cb20-128" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12           36     2        C      31         3.6 1995:1:GFR:SOL:H20:33:29</span></span>
<span id="cb20-129"><a href="#cb20-129" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13           36     2        C      31         3.6 1995:1:GFR:SOL:H20:33:29</span></span>
<span id="cb20-130"><a href="#cb20-130" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14           36     2        C      31         3.6 1995:1:GFR:SOL:H20:33:29</span></span>
<span id="cb20-131"><a href="#cb20-131" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15           36     2        C      31         3.6 1995:1:GFR:SOL:H20:33:29</span></span>
<span id="cb20-132"><a href="#cb20-132" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16           36     2        C      31         3.6 1995:1:GFR:SOL:H20:33:29</span></span>
<span id="cb20-133"><a href="#cb20-133" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17           36     2        C      30         3.6 1995:1:GFR:SOL:H20:42:35</span></span>
<span id="cb20-134"><a href="#cb20-134" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18           36     2        C      30         3.6 1995:1:GFR:SOL:H20:42:35</span></span>
<span id="cb20-135"><a href="#cb20-135" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19           36     2        C      30         3.6 1995:1:GFR:SOL:H20:42:35</span></span>
<span id="cb20-136"><a href="#cb20-136" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20           36     2        C      30         3.6 1995:1:GFR:SOL:H20:42:35</span></span>
<span id="cb20-137"><a href="#cb20-137" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ShootLat ShootLong      id_haul_stomach         Species CPUEun n</span></span>
<span id="cb20-138"><a href="#cb20-138" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   54.5167     13.80  1995.1.2.GFR.38G3.6 Limanda limanda      2 2</span></span>
<span id="cb20-139"><a href="#cb20-139" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   54.5167     13.80  1995.1.2.GFR.38G3.6 Limanda limanda      4 2</span></span>
<span id="cb20-140"><a href="#cb20-140" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   54.5167     13.80  1995.1.2.GFR.38G3.6 Limanda limanda      2 2</span></span>
<span id="cb20-141"><a href="#cb20-141" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   54.5167     13.80  1995.1.2.GFR.38G3.6 Limanda limanda      2 2</span></span>
<span id="cb20-142"><a href="#cb20-142" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   54.7333     13.40 1995.1.2.GFR.38G3.31 Limanda limanda      4 2</span></span>
<span id="cb20-143"><a href="#cb20-143" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   54.7333     13.40 1995.1.2.GFR.38G3.31 Limanda limanda      6 2</span></span>
<span id="cb20-144"><a href="#cb20-144" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   54.7333     13.40 1995.1.2.GFR.38G3.31 Limanda limanda      2 2</span></span>
<span id="cb20-145"><a href="#cb20-145" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8   54.7333     13.40 1995.1.2.GFR.38G3.31 Limanda limanda      2 2</span></span>
<span id="cb20-146"><a href="#cb20-146" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9   54.7333     13.40 1995.1.2.GFR.38G3.31 Limanda limanda      6 2</span></span>
<span id="cb20-147"><a href="#cb20-147" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  54.7333     13.40 1995.1.2.GFR.38G3.31 Limanda limanda      4 2</span></span>
<span id="cb20-148"><a href="#cb20-148" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11  54.7000     13.55 1995.1.2.GFR.38G3.29 Limanda limanda      4 2</span></span>
<span id="cb20-149"><a href="#cb20-149" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12  54.7000     13.55 1995.1.2.GFR.38G3.29 Limanda limanda      2 2</span></span>
<span id="cb20-150"><a href="#cb20-150" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13  54.7000     13.55 1995.1.2.GFR.38G3.29 Limanda limanda      4 2</span></span>
<span id="cb20-151"><a href="#cb20-151" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14  54.7000     13.55 1995.1.2.GFR.38G3.29 Limanda limanda      4 2</span></span>
<span id="cb20-152"><a href="#cb20-152" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15  54.7000     13.55 1995.1.2.GFR.38G3.29 Limanda limanda      4 2</span></span>
<span id="cb20-153"><a href="#cb20-153" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16  54.7000     13.55 1995.1.2.GFR.38G3.29 Limanda limanda      4 2</span></span>
<span id="cb20-154"><a href="#cb20-154" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17  54.9167     13.10 1995.1.2.GFR.38G3.35 Limanda limanda      4 2</span></span>
<span id="cb20-155"><a href="#cb20-155" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18  54.9167     13.10 1995.1.2.GFR.38G3.35 Limanda limanda      2 2</span></span>
<span id="cb20-156"><a href="#cb20-156" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19  54.9167     13.10 1995.1.2.GFR.38G3.35 Limanda limanda      2 2</span></span>
<span id="cb20-157"><a href="#cb20-157" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20  54.9167     13.10 1995.1.2.GFR.38G3.35 Limanda limanda      6 2</span></span>
<span id="cb20-158"><a href="#cb20-158" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> hldab0 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="fu">filter</span>(n <span class="sc">==</span> <span class="dv">2</span>)</span>
<span id="cb20-159"><a href="#cb20-159" aria-hidden="true" tabindex="-1"></a>test_id <span class="ot">&lt;-</span> test<span class="sc">$</span>haul.id[<span class="dv">2</span>]</span>
<span id="cb20-160"><a href="#cb20-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-161"><a href="#cb20-161" aria-hidden="true" tabindex="-1"></a>hldabL <span class="ot">&lt;-</span> hldab0 <span class="sc">|&gt;</span> </span>
<span id="cb20-162"><a href="#cb20-162" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(LngtClass, haul.id) <span class="sc">|&gt;</span> </span>
<span id="cb20-163"><a href="#cb20-163" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEun =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span></span>
<span id="cb20-164"><a href="#cb20-164" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb20-165"><a href="#cb20-165" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id3 =</span> <span class="fu">paste</span>(haul.id, LngtClass)) <span class="sc">|&gt;</span> </span>
<span id="cb20-166"><a href="#cb20-166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id3, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb20-167"><a href="#cb20-167" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>X, <span class="sc">-</span>id3) <span class="co"># Clean up a bit</span></span>
<span id="cb20-168"><a href="#cb20-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-169"><a href="#cb20-169" aria-hidden="true" tabindex="-1"></a><span class="co"># Check with an ID</span></span>
<span id="cb20-170"><a href="#cb20-170" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(hldab0, haul.id <span class="sc">==</span> test_id)</span>
<span id="cb20-171"><a href="#cb20-171" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       X RecordType Survey Quarter Country Ship Gear SweepLngt GearEx DoorType</span></span>
<span id="cb20-172"><a href="#cb20-172" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 98411         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-173"><a href="#cb20-173" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 98412         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-174"><a href="#cb20-174" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 98413         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-175"><a href="#cb20-175" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 98414         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-176"><a href="#cb20-176" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 98415         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-177"><a href="#cb20-177" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 98416         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-178"><a href="#cb20-178" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  1926         HH   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA</span></span>
<span id="cb20-179"><a href="#cb20-179" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   StNo HaulNo Year SpecCodeType SpecCode   SpecVal  Sex TotalNo CatIdentifier</span></span>
<span id="cb20-180"><a href="#cb20-180" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   27      6 1995            W   127139         1    M      10             1</span></span>
<span id="cb20-181"><a href="#cb20-181" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   27      6 1995            W   127139         1    M      10             1</span></span>
<span id="cb20-182"><a href="#cb20-182" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   27      6 1995            W   127139         1    M      10             1</span></span>
<span id="cb20-183"><a href="#cb20-183" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   27      6 1995            W   127139         1    M      10             1</span></span>
<span id="cb20-184"><a href="#cb20-184" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   27      6 1995            W   127139         1    F       4             1</span></span>
<span id="cb20-185"><a href="#cb20-185" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   27      6 1995            W   127139         1    F       4             1</span></span>
<span id="cb20-186"><a href="#cb20-186" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   27      6 1995         &lt;NA&gt;       NA zeroCatch &lt;NA&gt;      NA            NA</span></span>
<span id="cb20-187"><a href="#cb20-187" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   NoMeas SubFactor SubWgt CatCatchWgt LngtCode LngtClass HLNoAtLngt DevStage</span></span>
<span id="cb20-188"><a href="#cb20-188" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      7         1     NA           7        1        11          2     &lt;NA&gt;</span></span>
<span id="cb20-189"><a href="#cb20-189" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2      7         1     NA           7        1        15          2     &lt;NA&gt;</span></span>
<span id="cb20-190"><a href="#cb20-190" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3      7         1     NA           7        1        16          2     &lt;NA&gt;</span></span>
<span id="cb20-191"><a href="#cb20-191" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4      7         1     NA           7        1        17          4     &lt;NA&gt;</span></span>
<span id="cb20-192"><a href="#cb20-192" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5      7         1     NA           7        1        16          2     &lt;NA&gt;</span></span>
<span id="cb20-193"><a href="#cb20-193" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6      7         1     NA           7        1        17          2     &lt;NA&gt;</span></span>
<span id="cb20-194"><a href="#cb20-194" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7     NA        NA     NA          NA     &lt;NA&gt;        NA         NA     &lt;NA&gt;</span></span>
<span id="cb20-195"><a href="#cb20-195" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   LenMeasType DateofCalculation Valid_Aphia Ship2 Ship3</span></span>
<span id="cb20-196"><a href="#cb20-196" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-197"><a href="#cb20-197" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-198"><a href="#cb20-198" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-199"><a href="#cb20-199" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-200"><a href="#cb20-200" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-201"><a href="#cb20-201" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-202"><a href="#cb20-202" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7          NA          20220223          NA   SOL   SOL</span></span>
<span id="cb20-203"><a href="#cb20-203" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                        IDx sub_div Rect HaulVal StdSpecRecCode BySpecRecCode</span></span>
<span id="cb20-204"><a href="#cb20-204" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-205"><a href="#cb20-205" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-206"><a href="#cb20-206" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-207"><a href="#cb20-207" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-208"><a href="#cb20-208" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-209"><a href="#cb20-209" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-210"><a href="#cb20-210" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7 1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-211"><a href="#cb20-211" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Fishing.line Month DataType HaulDur GroundSpeed                 haul.id</span></span>
<span id="cb20-212"><a href="#cb20-212" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           36     2        C      30         3.6 1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-213"><a href="#cb20-213" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           36     2        C      30         3.6 1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-214"><a href="#cb20-214" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           36     2        C      30         3.6 1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-215"><a href="#cb20-215" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           36     2        C      30         3.6 1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-216"><a href="#cb20-216" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           36     2        C      30         3.6 1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-217"><a href="#cb20-217" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           36     2        C      30         3.6 1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-218"><a href="#cb20-218" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7           36     2        C      30         3.6 1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-219"><a href="#cb20-219" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ShootLat ShootLong     id_haul_stomach         Species CPUEun</span></span>
<span id="cb20-220"><a href="#cb20-220" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  54.5167      13.8 1995.1.2.GFR.38G3.6 Limanda limanda      2</span></span>
<span id="cb20-221"><a href="#cb20-221" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  54.5167      13.8 1995.1.2.GFR.38G3.6 Limanda limanda      2</span></span>
<span id="cb20-222"><a href="#cb20-222" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  54.5167      13.8 1995.1.2.GFR.38G3.6 Limanda limanda      2</span></span>
<span id="cb20-223"><a href="#cb20-223" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  54.5167      13.8 1995.1.2.GFR.38G3.6 Limanda limanda      4</span></span>
<span id="cb20-224"><a href="#cb20-224" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  54.5167      13.8 1995.1.2.GFR.38G3.6 Limanda limanda      2</span></span>
<span id="cb20-225"><a href="#cb20-225" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  54.5167      13.8 1995.1.2.GFR.38G3.6 Limanda limanda      2</span></span>
<span id="cb20-226"><a href="#cb20-226" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  54.5167      13.8                &lt;NA&gt; Limanda limanda      0</span></span>
<span id="cb20-227"><a href="#cb20-227" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(hldabL, haul.id <span class="sc">==</span> test_id) <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>()</span>
<span id="cb20-228"><a href="#cb20-228" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   RecordType Survey Quarter Country Ship Gear SweepLngt GearEx DoorType StNo</span></span>
<span id="cb20-229"><a href="#cb20-229" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   27</span></span>
<span id="cb20-230"><a href="#cb20-230" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   27</span></span>
<span id="cb20-231"><a href="#cb20-231" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   27</span></span>
<span id="cb20-232"><a href="#cb20-232" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   27</span></span>
<span id="cb20-233"><a href="#cb20-233" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         HH   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   27</span></span>
<span id="cb20-234"><a href="#cb20-234" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   HaulNo Year SpecCodeType SpecCode   SpecVal  Sex TotalNo CatIdentifier NoMeas</span></span>
<span id="cb20-235"><a href="#cb20-235" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      6 1995            W   127139         1    M      10             1      7</span></span>
<span id="cb20-236"><a href="#cb20-236" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2      6 1995            W   127139         1    M      10             1      7</span></span>
<span id="cb20-237"><a href="#cb20-237" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3      6 1995            W   127139         1    M      10             1      7</span></span>
<span id="cb20-238"><a href="#cb20-238" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4      6 1995            W   127139         1    M      10             1      7</span></span>
<span id="cb20-239"><a href="#cb20-239" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5      6 1995         &lt;NA&gt;       NA zeroCatch &lt;NA&gt;      NA            NA     NA</span></span>
<span id="cb20-240"><a href="#cb20-240" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   SubFactor SubWgt CatCatchWgt LngtCode LngtClass HLNoAtLngt DevStage</span></span>
<span id="cb20-241"><a href="#cb20-241" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         1     NA           7        1        11          2     &lt;NA&gt;</span></span>
<span id="cb20-242"><a href="#cb20-242" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         1     NA           7        1        15          2     &lt;NA&gt;</span></span>
<span id="cb20-243"><a href="#cb20-243" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         1     NA           7        1        16          2     &lt;NA&gt;</span></span>
<span id="cb20-244"><a href="#cb20-244" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         1     NA           7        1        17          4     &lt;NA&gt;</span></span>
<span id="cb20-245"><a href="#cb20-245" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5        NA     NA          NA     &lt;NA&gt;        NA         NA     &lt;NA&gt;</span></span>
<span id="cb20-246"><a href="#cb20-246" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   LenMeasType DateofCalculation Valid_Aphia Ship2 Ship3</span></span>
<span id="cb20-247"><a href="#cb20-247" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-248"><a href="#cb20-248" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-249"><a href="#cb20-249" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-250"><a href="#cb20-250" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          NA          20190207      127139   SOL   SOL</span></span>
<span id="cb20-251"><a href="#cb20-251" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          NA          20220223          NA   SOL   SOL</span></span>
<span id="cb20-252"><a href="#cb20-252" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                        IDx sub_div Rect HaulVal StdSpecRecCode BySpecRecCode</span></span>
<span id="cb20-253"><a href="#cb20-253" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-254"><a href="#cb20-254" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-255"><a href="#cb20-255" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-256"><a href="#cb20-256" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-257"><a href="#cb20-257" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 1995.1.GFR.06S1.H20.27.6      24 38G3       V              1             1</span></span>
<span id="cb20-258"><a href="#cb20-258" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Fishing.line Month DataType HaulDur GroundSpeed                 haul.id</span></span>
<span id="cb20-259"><a href="#cb20-259" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           36     2        C      30         3.6 1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-260"><a href="#cb20-260" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           36     2        C      30         3.6 1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-261"><a href="#cb20-261" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           36     2        C      30         3.6 1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-262"><a href="#cb20-262" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           36     2        C      30         3.6 1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-263"><a href="#cb20-263" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           36     2        C      30         3.6 1995:1:GFR:SOL:H20:27:6</span></span>
<span id="cb20-264"><a href="#cb20-264" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ShootLat ShootLong     id_haul_stomach         Species CPUEun</span></span>
<span id="cb20-265"><a href="#cb20-265" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  54.5167      13.8 1995.1.2.GFR.38G3.6 Limanda limanda      2</span></span>
<span id="cb20-266"><a href="#cb20-266" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  54.5167      13.8 1995.1.2.GFR.38G3.6 Limanda limanda      2</span></span>
<span id="cb20-267"><a href="#cb20-267" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  54.5167      13.8 1995.1.2.GFR.38G3.6 Limanda limanda      4</span></span>
<span id="cb20-268"><a href="#cb20-268" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  54.5167      13.8 1995.1.2.GFR.38G3.6 Limanda limanda      6</span></span>
<span id="cb20-269"><a href="#cb20-269" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  54.5167      13.8                &lt;NA&gt; Limanda limanda      0</span></span>
<span id="cb20-270"><a href="#cb20-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-271"><a href="#cb20-271" aria-hidden="true" tabindex="-1"></a><span class="co"># Do we still have 0 catches?</span></span>
<span id="cb20-272"><a href="#cb20-272" aria-hidden="true" tabindex="-1"></a>hldabL <span class="sc">|&gt;</span></span>
<span id="cb20-273"><a href="#cb20-273" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb20-274"><a href="#cb20-274" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb20-275"><a href="#cb20-275" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb20-276"><a href="#cb20-276" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb20-277"><a href="#cb20-277" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1,930 × 3</span></span>
<span id="cb20-278"><a href="#cb20-278" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    haul.id                     Year CPUEun_haul</span></span>
<span id="cb20-279"><a href="#cb20-279" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                      &lt;int&gt;       &lt;dbl&gt;</span></span>
<span id="cb20-280"><a href="#cb20-280" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 1993:1:DEN:DAN2:GRT:11:6    1993           5</span></span>
<span id="cb20-281"><a href="#cb20-281" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 1993:1:DEN:DAN2:GRT:13:7    1993           1</span></span>
<span id="cb20-282"><a href="#cb20-282" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 1993:1:DEN:DAN2:GRT:14:8    1993           1</span></span>
<span id="cb20-283"><a href="#cb20-283" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 1993:1:DEN:DAN2:GRT:161:71  1993           1</span></span>
<span id="cb20-284"><a href="#cb20-284" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 1993:1:DEN:DAN2:GRT:162:72  1993           1</span></span>
<span id="cb20-285"><a href="#cb20-285" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 1993:1:DEN:DAN2:GRT:17:9    1993           1</span></span>
<span id="cb20-286"><a href="#cb20-286" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 1993:1:DEN:DAN2:GRT:1:1     1993           2</span></span>
<span id="cb20-287"><a href="#cb20-287" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 1993:1:DEN:DAN2:GRT:3:2     1993           4</span></span>
<span id="cb20-288"><a href="#cb20-288" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 1993:1:DEN:DAN2:GRT:4:3     1993           3</span></span>
<span id="cb20-289"><a href="#cb20-289" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1993:1:DEN:DAN2:GRT:52:24   1993           1</span></span>
<span id="cb20-290"><a href="#cb20-290" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 1,920 more rows</span></span>
<span id="cb20-291"><a href="#cb20-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-292"><a href="#cb20-292" aria-hidden="true" tabindex="-1"></a>hldabL <span class="sc">|&gt;</span></span>
<span id="cb20-293"><a href="#cb20-293" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year) <span class="sc">|&gt;</span></span>
<span id="cb20-294"><a href="#cb20-294" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb20-295"><a href="#cb20-295" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb20-296"><a href="#cb20-296" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb20-297"><a href="#cb20-297" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, zero_catch) <span class="sc">|&gt;</span> </span>
<span id="cb20-298"><a href="#cb20-298" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb20-299"><a href="#cb20-299" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> n, <span class="at">fill =</span> zero_catch)) <span class="sc">+</span></span>
<span id="cb20-300"><a href="#cb20-300" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-11-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="get-and-add-annual-weight-length-relationships-from-the-ca-data-so-that-i-can-calculate-cpue-in-biomass-rather-than-numbers-further-down" class="level4">
<h4 class="anchored" data-anchor-id="get-and-add-annual-weight-length-relationships-from-the-ca-data-so-that-i-can-calculate-cpue-in-biomass-rather-than-numbers-further-down">Get and add annual weight-length relationships from the CA data so that I can calculate CPUE in biomass rather than numbers further down</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cod</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>bits_ca_cod <span class="ot">&lt;-</span> bits_ca <span class="sc">|&gt;</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"164712"</span>, <span class="st">"126436"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">StNo =</span> <span class="fu">as.numeric</span>(StNo)) <span class="sc">|&gt;</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Species =</span> <span class="st">"Cod"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ID =</span> <span class="fu">paste</span>(Year, Quarter, Country, Ship, Gear, StNo, HaulNo, <span class="at">sep =</span> <span class="st">"."</span>))</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: There was 1 warning in `.fun()`.</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ In argument: `StNo = as.numeric(StNo)`.</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Caused by warning:</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ! NAs introduced by coercion</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Now I need to copy rows with NoAtLngt &gt; 1 so that 1 row = 1 ind</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co"># First make a small test</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="co"># nrow(bits_ca_cod)</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="co"># test_id &lt;- head(filter(bits_ca_cod, CANoAtLngt == 5))$ID[1]</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="co"># filter(bits_ca_cod, ID == test_id &amp; CANoAtLngt == 5)</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>bits_ca_cod <span class="ot">&lt;-</span> bits_ca_cod <span class="sc">%&gt;%</span> <span class="fu">map_df</span>(., rep, .<span class="sc">$</span>CANoAtLngt)</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a><span class="co"># head(data.frame(filter(bits_ca_cod, ID == test_id &amp; CANoAtLngt == 5)), 20)</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="co"># nrow(bits_ca_cod)</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Looks ok!</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize length and drop NA weights (need that for condition)</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>bits_ca_cod <span class="ot">&lt;-</span> bits_ca_cod <span class="sc">|&gt;</span> </span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(IndWgt) <span class="sc">|&gt;</span> </span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(LngtClass) <span class="sc">|&gt;</span> </span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(IndWgt <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> LngtClass <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span>  <span class="co"># Filter positive length and weight</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight_kg =</span> IndWgt<span class="sc">/</span><span class="dv">1000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length_cm =</span> <span class="fu">ifelse</span>(LngtCode <span class="sc">==</span> <span class="st">"."</span>, </span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>                            LngtClass<span class="sc">/</span><span class="dv">10</span>,</span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>                            LngtClass)) <span class="co"># Standardize length ((https://vocab.ices.dk/?ref=18))</span></span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bits_ca_cod, <span class="fu">aes</span>(IndWgt, length_cm)) <span class="sc">+</span></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now extract the coefficients for each year (not bothering with outliers at the moment)</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>cod_intercept <span class="ot">&lt;-</span> bits_ca_cod <span class="sc">%&gt;%</span> </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>Year) <span class="sc">|&gt;</span> </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span><span class="fu">lm</span>(<span class="fu">log</span>(IndWgt) <span class="sc">~</span> <span class="fu">log</span>(length_cm), <span class="at">data =</span> .x)) <span class="sc">|&gt;</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_df</span>(broom<span class="sc">::</span>tidy, <span class="at">.id =</span> <span class="st">'Year'</span>) <span class="sc">|&gt;</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"(Intercept)"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a =</span> <span class="fu">exp</span>(estimate)) <span class="sc">|&gt;</span> </span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.integer</span>(Year)) <span class="sc">|&gt;</span> </span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Year, a)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>cod_slope <span class="ot">&lt;-</span> bits_ca_cod <span class="sc">%&gt;%</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>Year) <span class="sc">|&gt;</span> </span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span><span class="fu">lm</span>(<span class="fu">log</span>(IndWgt) <span class="sc">~</span> <span class="fu">log</span>(length_cm), <span class="at">data =</span> .x)) <span class="sc">|&gt;</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_df</span>(broom<span class="sc">::</span>tidy, <span class="at">.id =</span> <span class="st">'Year'</span>) <span class="sc">|&gt;</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"log(length_cm)"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.integer</span>(Year)) <span class="sc">|&gt;</span> </span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"b"</span> <span class="ot">=</span> <span class="st">"estimate"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Year, b)</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(cod_intercept<span class="sc">$</span>a)</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.008358197</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(cod_slope<span class="sc">$</span>b)</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3.034025</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Flounder</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>bits_ca_fle <span class="ot">&lt;-</span> bits_ca <span class="sc">|&gt;</span> </span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"127141"</span>, <span class="st">"172894"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">StNo =</span> <span class="fu">as.numeric</span>(StNo)) <span class="sc">|&gt;</span> </span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Species =</span> <span class="st">"Flounder"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ID =</span> <span class="fu">paste</span>(Year, Quarter, Country, Ship, Gear, StNo, HaulNo, <span class="at">sep =</span> <span class="st">"."</span>))</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: There was 1 warning in `.fun()`.</span></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ℹ In argument: `StNo = as.numeric(StNo)`.</span></span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Caused by warning:</span></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ! NAs introduced by coercion</span></span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>bits_ca_fle <span class="ot">&lt;-</span> bits_ca_fle <span class="sc">%&gt;%</span> <span class="fu">map_df</span>(., rep, .<span class="sc">$</span>CANoAtLngt)</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize length and drop NA weights (need that for condition)</span></span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>bits_ca_fle <span class="ot">&lt;-</span> bits_ca_fle <span class="sc">|&gt;</span> </span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(IndWgt) <span class="sc">|&gt;</span> </span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(LngtClass) <span class="sc">|&gt;</span> </span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(IndWgt <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> LngtClass <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span>  <span class="co"># Filter positive length and weight</span></span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight_kg =</span> IndWgt<span class="sc">/</span><span class="dv">1000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length_cm =</span> <span class="fu">ifelse</span>(LngtCode <span class="sc">==</span> <span class="st">"."</span>, </span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>                            LngtClass<span class="sc">/</span><span class="dv">10</span>,</span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>                            LngtClass)) <span class="sc">|&gt;</span> <span class="co"># Standardize length ((https://vocab.ices.dk/?ref=18))</span></span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keep =</span> <span class="fu">ifelse</span>(LngtCode <span class="sc">==</span> <span class="st">"."</span> <span class="sc">&amp;</span> Year <span class="sc">==</span> <span class="dv">2008</span>, <span class="st">"N"</span>, <span class="st">"Y"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(keep <span class="sc">==</span> <span class="st">"Y"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(length_cm <span class="sc">&lt;</span> <span class="dv">70</span>)</span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-52"><a href="#cb22-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb22-53"><a href="#cb22-53" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bits_ca_fle, <span class="fu">aes</span>(IndWgt, length_cm, <span class="at">color =</span> LngtCode)) <span class="sc">+</span></span>
<span id="cb22-54"><a href="#cb22-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb22-55"><a href="#cb22-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-12-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now extract the coefficients for each year (not bothering with outliers at the moment)</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>fle_intercept <span class="ot">&lt;-</span> bits_ca_fle <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>Year) <span class="sc">|&gt;</span> </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span><span class="fu">lm</span>(<span class="fu">log</span>(IndWgt) <span class="sc">~</span> <span class="fu">log</span>(length_cm), <span class="at">data =</span> .x)) <span class="sc">|&gt;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_df</span>(broom<span class="sc">::</span>tidy, <span class="at">.id =</span> <span class="st">'Year'</span>) <span class="sc">|&gt;</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"(Intercept)"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a =</span> <span class="fu">exp</span>(estimate)) <span class="sc">|&gt;</span> </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.integer</span>(Year)) <span class="sc">|&gt;</span> </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Year, a)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>fle_slope <span class="ot">&lt;-</span> bits_ca_fle <span class="sc">%&gt;%</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>Year) <span class="sc">|&gt;</span> </span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span><span class="fu">lm</span>(<span class="fu">log</span>(IndWgt) <span class="sc">~</span> <span class="fu">log</span>(length_cm), <span class="at">data =</span> .x)) <span class="sc">|&gt;</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_df</span>(broom<span class="sc">::</span>tidy, <span class="at">.id =</span> <span class="st">'Year'</span>) <span class="sc">|&gt;</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"log(length_cm)"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.integer</span>(Year)) <span class="sc">|&gt;</span> </span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"b"</span> <span class="ot">=</span> <span class="st">"estimate"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Year, b)</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fle_intercept<span class="sc">$</span>a)</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.009891037</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(fle_slope<span class="sc">$</span>b)</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3.07509</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Plaice</span></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>bits_ca_pla <span class="ot">&lt;-</span> bits_ca <span class="sc">|&gt;</span> </span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"127143"</span>, <span class="st">"172902"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">StNo =</span> <span class="fu">as.numeric</span>(StNo)) <span class="sc">|&gt;</span> </span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Species =</span> <span class="st">"Plaice"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ID =</span> <span class="fu">paste</span>(Year, Quarter, Country, Ship, Gear, StNo, HaulNo, <span class="at">sep =</span> <span class="st">"."</span>))</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>bits_ca_pla <span class="ot">&lt;-</span> bits_ca_pla <span class="sc">%&gt;%</span> <span class="fu">map_df</span>(., rep, .<span class="sc">$</span>CANoAtLngt)</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize length and drop NA weights (need that for condition)</span></span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>bits_ca_pla <span class="ot">&lt;-</span> bits_ca_pla <span class="sc">|&gt;</span> </span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(IndWgt) <span class="sc">|&gt;</span> </span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(LngtClass) <span class="sc">|&gt;</span> </span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(IndWgt <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> LngtClass <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span>  <span class="co"># Filter positive length and weight</span></span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight_kg =</span> IndWgt<span class="sc">/</span><span class="dv">1000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length_cm =</span> <span class="fu">ifelse</span>(LngtCode <span class="sc">==</span> <span class="st">"."</span>, </span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a>                            LngtClass<span class="sc">/</span><span class="dv">10</span>,</span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a>                            LngtClass)) <span class="sc">|&gt;</span> <span class="co"># Standardize length ((https://vocab.ices.dk/?ref=18))</span></span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keep =</span> <span class="fu">ifelse</span>(LngtCode <span class="sc">==</span> <span class="st">"."</span> <span class="sc">&amp;</span> Year <span class="sc">==</span> <span class="dv">2008</span>, <span class="st">"N"</span>, <span class="st">"Y"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(keep <span class="sc">==</span> <span class="st">"Y"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(length_cm <span class="sc">&lt;</span> <span class="dv">70</span>)</span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bits_ca_pla, <span class="fu">aes</span>(IndWgt, length_cm, <span class="at">color =</span> LngtCode)) <span class="sc">+</span></span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-12-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now extract the coefficients for each year (not bothering with outliers at the moment)</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>pla_intercept <span class="ot">&lt;-</span> bits_ca_pla <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>Year) <span class="sc">|&gt;</span> </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span><span class="fu">lm</span>(<span class="fu">log</span>(IndWgt) <span class="sc">~</span> <span class="fu">log</span>(length_cm), <span class="at">data =</span> .x)) <span class="sc">|&gt;</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_df</span>(broom<span class="sc">::</span>tidy, <span class="at">.id =</span> <span class="st">'Year'</span>) <span class="sc">|&gt;</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"(Intercept)"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a =</span> <span class="fu">exp</span>(estimate)) <span class="sc">|&gt;</span> </span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.integer</span>(Year)) <span class="sc">|&gt;</span> </span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Year, a)</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>pla_slope <span class="ot">&lt;-</span> bits_ca_pla <span class="sc">%&gt;%</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>Year) <span class="sc">|&gt;</span> </span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span><span class="fu">lm</span>(<span class="fu">log</span>(IndWgt) <span class="sc">~</span> <span class="fu">log</span>(length_cm), <span class="at">data =</span> .x)) <span class="sc">|&gt;</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_df</span>(broom<span class="sc">::</span>tidy, <span class="at">.id =</span> <span class="st">'Year'</span>) <span class="sc">|&gt;</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"log(length_cm)"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.integer</span>(Year)) <span class="sc">|&gt;</span> </span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"b"</span> <span class="ot">=</span> <span class="st">"estimate"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Year, b)</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(pla_intercept<span class="sc">$</span>a)</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.01782357</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(pla_slope<span class="sc">$</span>b)</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3.042893</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Dab</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>bits_ca_dab <span class="ot">&lt;-</span> bits_ca <span class="sc">|&gt;</span> </span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SpecCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"127139"</span>, <span class="st">"172881"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">StNo =</span> <span class="fu">as.numeric</span>(StNo)) <span class="sc">|&gt;</span> </span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Species =</span> <span class="st">"Dab"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ID =</span> <span class="fu">paste</span>(Year, Quarter, Country, Ship, Gear, StNo, HaulNo, <span class="at">sep =</span> <span class="st">"."</span>))</span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>bits_ca_dab <span class="ot">&lt;-</span> bits_ca_dab <span class="sc">%&gt;%</span> <span class="fu">map_df</span>(., rep, .<span class="sc">$</span>CANoAtLngt)</span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize length and drop NA weights (need that for condition)</span></span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a>bits_ca_dab <span class="ot">&lt;-</span> bits_ca_dab <span class="sc">|&gt;</span> </span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(IndWgt) <span class="sc">|&gt;</span> </span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(LngtClass) <span class="sc">|&gt;</span> </span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(IndWgt <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> LngtClass <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span>  <span class="co"># Filter positive length and weight</span></span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight_kg =</span> IndWgt<span class="sc">/</span><span class="dv">1000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length_cm =</span> <span class="fu">ifelse</span>(LngtCode <span class="sc">==</span> <span class="st">"."</span>, </span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a>                            LngtClass<span class="sc">/</span><span class="dv">10</span>,</span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a>                            LngtClass)) <span class="sc">|&gt;</span> <span class="co"># Standardize length ((https://vocab.ices.dk/?ref=18))</span></span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keep =</span> <span class="fu">ifelse</span>(LngtCode <span class="sc">==</span> <span class="st">"."</span> <span class="sc">&amp;</span> Year <span class="sc">==</span> <span class="dv">2008</span>, <span class="st">"N"</span>, <span class="st">"Y"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(keep <span class="sc">==</span> <span class="st">"Y"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(length_cm <span class="sc">&lt;</span> <span class="dv">70</span>)</span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bits_ca_dab, <span class="fu">aes</span>(IndWgt, length_cm, <span class="at">color =</span> LngtCode)) <span class="sc">+</span></span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-12-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>bits_ca_dab <span class="ot">&lt;-</span> bits_ca_dab <span class="sc">|&gt;</span> <span class="fu">filter</span>(IndWgt <span class="sc">&lt;</span> <span class="dv">1000</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Now extract the coefficients for each year (not bothering with outliers at the moment)</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>dab_intercept <span class="ot">&lt;-</span> bits_ca_dab <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>Year) <span class="sc">|&gt;</span> </span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span><span class="fu">lm</span>(<span class="fu">log</span>(IndWgt) <span class="sc">~</span> <span class="fu">log</span>(length_cm), <span class="at">data =</span> .x)) <span class="sc">|&gt;</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_df</span>(broom<span class="sc">::</span>tidy, <span class="at">.id =</span> <span class="st">'Year'</span>) <span class="sc">|&gt;</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"(Intercept)"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a =</span> <span class="fu">exp</span>(estimate)) <span class="sc">|&gt;</span> </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.integer</span>(Year)) <span class="sc">|&gt;</span> </span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Year, a)</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>dab_slope <span class="ot">&lt;-</span> bits_ca_dab <span class="sc">%&gt;%</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>Year) <span class="sc">|&gt;</span> </span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span><span class="fu">lm</span>(<span class="fu">log</span>(IndWgt) <span class="sc">~</span> <span class="fu">log</span>(length_cm), <span class="at">data =</span> .x)) <span class="sc">|&gt;</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_df</span>(broom<span class="sc">::</span>tidy, <span class="at">.id =</span> <span class="st">'Year'</span>) <span class="sc">|&gt;</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"log(length_cm)"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">as.integer</span>(Year)) <span class="sc">|&gt;</span> </span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"b"</span> <span class="ot">=</span> <span class="st">"estimate"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Year, b)</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(dab_intercept<span class="sc">$</span>a)</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.008858112</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(dab_slope<span class="sc">$</span>b)</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3.079707</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="join-the-annual-l-w-relationships-to-the-respective-catch-data-to-calculate-cpue-in-biomass-not-abundance" class="level4">
<h4 class="anchored" data-anchor-id="join-the-annual-l-w-relationships-to-the-respective-catch-data-to-calculate-cpue-in-biomass-not-abundance">Join the annual L-W relationships to the respective catch data to calculate CPUE in biomass not abundance</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># These are the haul-data</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># hlcodL</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># hlfleL</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># hlplaL</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># hldabL</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>hlcodL <span class="ot">&lt;-</span> <span class="fu">left_join</span>(hlcodL, cod_intercept, <span class="at">by =</span> <span class="st">"Year"</span>)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>hlcodL <span class="ot">&lt;-</span> <span class="fu">left_join</span>(hlcodL, cod_slope, <span class="at">by =</span> <span class="st">"Year"</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>hlfleL <span class="ot">&lt;-</span> <span class="fu">left_join</span>(hlfleL, fle_intercept, <span class="at">by =</span> <span class="st">"Year"</span>)</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>hlfleL <span class="ot">&lt;-</span> <span class="fu">left_join</span>(hlfleL, fle_slope, <span class="at">by =</span> <span class="st">"Year"</span>)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>hlplaL <span class="ot">&lt;-</span> <span class="fu">left_join</span>(hlplaL, pla_intercept, <span class="at">by =</span> <span class="st">"Year"</span>)</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>hlplaL <span class="ot">&lt;-</span> <span class="fu">left_join</span>(hlplaL, pla_slope, <span class="at">by =</span> <span class="st">"Year"</span>)</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Now replace NA a and b (don't have individual data for all years) with the mean</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>hlplaL <span class="ot">&lt;-</span> hlplaL <span class="sc">|&gt;</span> </span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(a), <span class="fu">mean</span>(a, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), a),</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">b =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(b), <span class="fu">mean</span>(b, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), b))</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>hldabL <span class="ot">&lt;-</span> <span class="fu">left_join</span>(hldabL, dab_intercept, <span class="at">by =</span> <span class="st">"Year"</span>)</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>hldabL <span class="ot">&lt;-</span> <span class="fu">left_join</span>(hldabL, dab_slope, <span class="at">by =</span> <span class="st">"Year"</span>)</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Now replace NA a and b (don't have individual data for all years) with the mean</span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>hldabL <span class="ot">&lt;-</span> hldabL <span class="sc">|&gt;</span> </span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">a =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(a), <span class="fu">mean</span>(a, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), a),</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">b =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(b), <span class="fu">mean</span>(b, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), b))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="convert-from-cpue-in-numbers-to-kg" class="level4">
<h4 class="anchored" data-anchor-id="convert-from-cpue-in-numbers-to-kg">Convert from CPUE in numbers to kg</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cod</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># First standardize length to cm and then check how zero-catches are implemented at this stage</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>hlcodL <span class="ot">&lt;-</span> hlcodL <span class="sc">|&gt;</span> </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length_cm =</span> <span class="fu">ifelse</span>(LngtCode <span class="sc">==</span> <span class="st">"."</span>, </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>                            LngtClass<span class="sc">/</span><span class="dv">10</span>,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>                            LngtClass)) <span class="co"># Standardize length ((https://vocab.ices.dk/?ref=18))</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(hlcodL, length_cm <span class="sc">==</span> <span class="dv">0</span>) <span class="co"># No such thing</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 0 × 51</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 51 variables: RecordType &lt;chr&gt;, Survey &lt;chr&gt;, Quarter &lt;int&gt;, Country &lt;chr&gt;,</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   Ship &lt;chr&gt;, Gear &lt;chr&gt;, SweepLngt &lt;int&gt;, GearEx &lt;chr&gt;, DoorType &lt;lgl&gt;,</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   StNo &lt;chr&gt;, HaulNo &lt;int&gt;, Year &lt;int&gt;, SpecCodeType &lt;chr&gt;, SpecCode &lt;int&gt;,</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   SpecVal &lt;fct&gt;, Sex &lt;chr&gt;, TotalNo &lt;dbl&gt;, CatIdentifier &lt;int&gt;, NoMeas &lt;int&gt;,</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   SubFactor &lt;dbl&gt;, SubWgt &lt;int&gt;, CatCatchWgt &lt;int&gt;, LngtCode &lt;chr&gt;,</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   LngtClass &lt;int&gt;, HLNoAtLngt &lt;dbl&gt;, DevStage &lt;chr&gt;, LenMeasType &lt;int&gt;,</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   DateofCalculation &lt;int&gt;, Valid_Aphia &lt;int&gt;, Ship2 &lt;chr&gt;, Ship3 &lt;chr&gt;, …</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Now check if all rows where length is NA are the ones with zero catch!</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>hlcodL <span class="sc">|&gt;</span> </span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length2 =</span> <span class="fu">replace_na</span>(length_cm, <span class="sc">-</span><span class="dv">9</span>),</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">no_length =</span> <span class="fu">ifelse</span>(length2 <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="st">"T"</span>, <span class="st">"F"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(length2, CPUEun, <span class="at">color =</span> no_length)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>no_length)</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 1 rows containing missing values (`geom_point()`).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>hlcodL <span class="sc">|&gt;</span> <span class="fu">filter</span>(CPUEun <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(length_cm)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   length_cm</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       &lt;dbl&gt;</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1        NA</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Right, so all hauls with zero catch have NA length_cm. I don't have any NA catches</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hlcodL <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(CPUEun)</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hlcodL <span class="sc">|&gt;</span> <span class="fu">filter</span>(CPUEun <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hlcodL <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(length_cm)</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="co"># In other words, a zero catch is when the catch is zero and length_cm is NA</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="co"># In order to not get any NA CPUEs in unit biomass because length is NA (I want them instead</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="co"># to be 0, as the numbers-CPUE is), I will replace length_cm == NA with length_cm == 0 before</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a><span class="co"># calculating biomass CPUE</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>hlcodL <span class="ot">&lt;-</span> hlcodL <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">length_cm2 =</span> <span class="fu">replace_na</span>(length_cm, <span class="dv">0</span>))</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize length in the haul-data and calculate weight</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>hlcodL <span class="ot">&lt;-</span> hlcodL <span class="sc">|&gt;</span> </span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight_kg =</span> (a<span class="sc">*</span>length_cm2<span class="sc">^</span>b)<span class="sc">/</span><span class="dv">1000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEun_kg =</span> weight_kg<span class="sc">*</span>CPUEun)</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot and check it's correct also in this data</span></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(hlcodL, <span class="fu">aes</span>(weight_kg, length_cm2)) <span class="sc">+</span></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-14-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Hmm, some unrealistic weights actually</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>hlcodL <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(weight_kg)) <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">20</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    RecordType Survey Quarter Country Ship Gear SweepLngt GearEx DoorType StNo</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          HL   BITS       1     DEN 26D4  GRT        NA      S       NA   83</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          HL   BITS       1     DEN 26D4  GRT        NA      S       NA   83</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          HL   BITS       1     DEN 26D4  GRT        NA      S       NA   83</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          HL   BITS       1     DEN 26D4  GRT        NA      S       NA   83</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          HL   BITS       1     DEN 26D4  GRT        NA      S       NA   83</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          HL   BITS       1     DEN 26D4  GRT        NA      S       NA   83</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7          HL   BITS       1     DEN 26D4  GRT        NA      S       NA   83</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8          HL   BITS       1     DEN 26D4  GRT        NA      S       NA   83</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9          HL   BITS       1     DEN 26D4  GRT        NA      S       NA   83</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10         HL   BITS       1     DEN 26D4  GRT        NA      S       NA   83</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11         HL   BITS       1     DEN 26D4  GRT        NA      S       NA   83</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12         HL   BITS       1     DEN 26D4  GRT        NA   &lt;NA&gt;       NA   45</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13         HL   BITS       1     SWE 77AR  FOT       185   &lt;NA&gt;       NA   80</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14         HL   BITS       1     DEN 26D4  GRT        NA      S       NA   83</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15         HL   BITS       1     DEN 26D4  GRT        60   &lt;NA&gt;       NA   43</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16         HL   BITS       1     DEN 26D4  GRT        NA   &lt;NA&gt;       NA    9</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17         HL   BITS       1     SWE 77AR  FOT       225   &lt;NA&gt;       NA  191</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18         HL   BITS       1     DEN 26D4  TVL        75      S       NA   71</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   46</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20         HL   BITS       1     DEN 26D4  GRT        60   &lt;NA&gt;       NA  117</span></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    HaulNo Year SpecCodeType SpecCode SpecVal  Sex TotalNo CatIdentifier NoMeas</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      40 1998            T   164712       1 &lt;NA&gt;      17             1     17</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2      40 1998            T   164712       1 &lt;NA&gt;      17             1     17</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3      40 1998            T   164712       1 &lt;NA&gt;      17             1     17</span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4      40 1998            T   164712       1 &lt;NA&gt;      17             1     17</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5      40 1998            T   164712       1 &lt;NA&gt;      17             1     17</span></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6      40 1998            T   164712       1 &lt;NA&gt;      17             1     17</span></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7      40 1998            T   164712       1 &lt;NA&gt;      17             1     17</span></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8      40 1998            T   164712       1 &lt;NA&gt;      17             1     17</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9      40 1998            T   164712       1 &lt;NA&gt;      17             1     17</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10     40 1998            T   164712       1 &lt;NA&gt;      17             1     17</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11     40 1998            T   164712       1 &lt;NA&gt;      17             1     17</span></span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12     25 1996            W   126436       1 &lt;NA&gt;      93             1     93</span></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13     32 1993            W   126436       1 &lt;NA&gt;     454             1    454</span></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14     40 1998            T   164712       1 &lt;NA&gt;      17             1     17</span></span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15     22 1994            T   164712       1 &lt;NA&gt;      37             1     37</span></span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16      5 1996            W   126436       1 &lt;NA&gt;     406             1    406</span></span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17      3 1998            T   164712       1 &lt;NA&gt;     546             1    273</span></span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18     36 2003            T   164712       1 &lt;NA&gt;     255             1    255</span></span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19     20 1993            W   126436       1 &lt;NA&gt;     326             1    163</span></span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20     50 1994            T   164712       1 &lt;NA&gt;     775             1    775</span></span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    SubFactor SubWgt CatCatchWgt LngtCode LngtClass HLNoAtLngt DevStage</span></span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          1     NA       13275        0       335          1     &lt;NA&gt;</span></span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          1     NA       13275        0       285          1     &lt;NA&gt;</span></span>
<span id="cb29-49"><a href="#cb29-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          1     NA       13275        0       225          2     &lt;NA&gt;</span></span>
<span id="cb29-50"><a href="#cb29-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          1     NA       13275        0       220          1     &lt;NA&gt;</span></span>
<span id="cb29-51"><a href="#cb29-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          1     NA       13275        0       215          1     &lt;NA&gt;</span></span>
<span id="cb29-52"><a href="#cb29-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          1     NA       13275        0       180          1     &lt;NA&gt;</span></span>
<span id="cb29-53"><a href="#cb29-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7          1     NA       13275        0       175          1     &lt;NA&gt;</span></span>
<span id="cb29-54"><a href="#cb29-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8          1     NA       13275        0       160          1     &lt;NA&gt;</span></span>
<span id="cb29-55"><a href="#cb29-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9          1     NA       13275        0       150          2     &lt;NA&gt;</span></span>
<span id="cb29-56"><a href="#cb29-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10         1     NA       13275        0       145          3     &lt;NA&gt;</span></span>
<span id="cb29-57"><a href="#cb29-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11         1     NA       13275        0       140          1     &lt;NA&gt;</span></span>
<span id="cb29-58"><a href="#cb29-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12         1 113900      113900        .      1360          1     &lt;NA&gt;</span></span>
<span id="cb29-59"><a href="#cb29-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13         1     NA      234500        1       127          1     &lt;NA&gt;</span></span>
<span id="cb29-60"><a href="#cb29-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14         1     NA       13275        0       130          2     &lt;NA&gt;</span></span>
<span id="cb29-61"><a href="#cb29-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15         1     NA        1033        1       127          1     &lt;NA&gt;</span></span>
<span id="cb29-62"><a href="#cb29-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16         1 257280      257280        .      1230          1     &lt;NA&gt;</span></span>
<span id="cb29-63"><a href="#cb29-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17         1     NA      484399        1       121          2     &lt;NA&gt;</span></span>
<span id="cb29-64"><a href="#cb29-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18         1     NA      158200        1       121          1     &lt;NA&gt;</span></span>
<span id="cb29-65"><a href="#cb29-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19         1     NA        2190        1       116          2     &lt;NA&gt;</span></span>
<span id="cb29-66"><a href="#cb29-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20         1     NA        5718        1       118          1     &lt;NA&gt;</span></span>
<span id="cb29-67"><a href="#cb29-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    LenMeasType DateofCalculation Valid_Aphia Ship2 Ship3</span></span>
<span id="cb29-68"><a href="#cb29-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           NA          20140617      126436  DAN2  DAN2</span></span>
<span id="cb29-69"><a href="#cb29-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           NA          20140617      126436  DAN2  DAN2</span></span>
<span id="cb29-70"><a href="#cb29-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           NA          20140617      126436  DAN2  DAN2</span></span>
<span id="cb29-71"><a href="#cb29-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           NA          20140617      126436  DAN2  DAN2</span></span>
<span id="cb29-72"><a href="#cb29-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           NA          20140617      126436  DAN2  DAN2</span></span>
<span id="cb29-73"><a href="#cb29-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           NA          20140617      126436  DAN2  DAN2</span></span>
<span id="cb29-74"><a href="#cb29-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7           NA          20140617      126436  DAN2  DAN2</span></span>
<span id="cb29-75"><a href="#cb29-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8           NA          20140617      126436  DAN2  DAN2</span></span>
<span id="cb29-76"><a href="#cb29-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9           NA          20140617      126436  DAN2  DAN2</span></span>
<span id="cb29-77"><a href="#cb29-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10          NA          20140617      126436  DAN2  DAN2</span></span>
<span id="cb29-78"><a href="#cb29-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11          NA          20140617      126436  DAN2  DAN2</span></span>
<span id="cb29-79"><a href="#cb29-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12          NA          20190208      126436  DAN2  DAN2</span></span>
<span id="cb29-80"><a href="#cb29-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13          NA          20211203      126436   ARG   ARG</span></span>
<span id="cb29-81"><a href="#cb29-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14          NA          20140617      126436  DAN2  DAN2</span></span>
<span id="cb29-82"><a href="#cb29-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15          NA          20161213      126436  DAN2  DAN2</span></span>
<span id="cb29-83"><a href="#cb29-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16          NA          20190208      126436  DAN2  DAN2</span></span>
<span id="cb29-84"><a href="#cb29-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17          NA          20140617      126436   ARG   ARG</span></span>
<span id="cb29-85"><a href="#cb29-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18          NA          20131108      126436  DAN2  DAN2</span></span>
<span id="cb29-86"><a href="#cb29-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19          NA          20211203      126436   SOL   SOL</span></span>
<span id="cb29-87"><a href="#cb29-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20          NA          20161213      126436  DAN2  DAN2</span></span>
<span id="cb29-88"><a href="#cb29-88" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                           IDx sub_div Rect HaulVal StdSpecRecCode BySpecRecCode</span></span>
<span id="cb29-89"><a href="#cb29-89" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   1998.1.DEN.26D4.GRT.83.40      25 38G5       V              1             1</span></span>
<span id="cb29-90"><a href="#cb29-90" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   1998.1.DEN.26D4.GRT.83.40      25 38G5       V              1             1</span></span>
<span id="cb29-91"><a href="#cb29-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   1998.1.DEN.26D4.GRT.83.40      25 38G5       V              1             1</span></span>
<span id="cb29-92"><a href="#cb29-92" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   1998.1.DEN.26D4.GRT.83.40      25 38G5       V              1             1</span></span>
<span id="cb29-93"><a href="#cb29-93" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   1998.1.DEN.26D4.GRT.83.40      25 38G5       V              1             1</span></span>
<span id="cb29-94"><a href="#cb29-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   1998.1.DEN.26D4.GRT.83.40      25 38G5       V              1             1</span></span>
<span id="cb29-95"><a href="#cb29-95" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   1998.1.DEN.26D4.GRT.83.40      25 38G5       V              1             1</span></span>
<span id="cb29-96"><a href="#cb29-96" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8   1998.1.DEN.26D4.GRT.83.40      25 38G5       V              1             1</span></span>
<span id="cb29-97"><a href="#cb29-97" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9   1998.1.DEN.26D4.GRT.83.40      25 38G5       V              1             1</span></span>
<span id="cb29-98"><a href="#cb29-98" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  1998.1.DEN.26D4.GRT.83.40      25 38G5       V              1             1</span></span>
<span id="cb29-99"><a href="#cb29-99" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11  1998.1.DEN.26D4.GRT.83.40      25 38G5       V              1             1</span></span>
<span id="cb29-100"><a href="#cb29-100" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12  1996.1.DEN.26D4.GRT.45.25      26 41H0       V              1             1</span></span>
<span id="cb29-101"><a href="#cb29-101" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13  1993.1.SWE.77AR.FOT.80.32      25 39G5       V              1             1</span></span>
<span id="cb29-102"><a href="#cb29-102" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14  1998.1.DEN.26D4.GRT.83.40      25 38G5       V              1             1</span></span>
<span id="cb29-103"><a href="#cb29-103" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15  1994.1.DEN.26D4.GRT.43.22      26 41H0       V              1             1</span></span>
<span id="cb29-104"><a href="#cb29-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16    1996.1.DEN.26D4.GRT.9.5      25 38G5       V              1             1</span></span>
<span id="cb29-105"><a href="#cb29-105" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17  1998.1.SWE.77AR.FOT.191.3      25 40G5       V              1             1</span></span>
<span id="cb29-106"><a href="#cb29-106" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18  2003.1.DEN.26D4.TVL.71.36      25 39G5       V              1             1</span></span>
<span id="cb29-107"><a href="#cb29-107" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19  1993.1.GFR.06S1.H20.46.20      24 39G4       V              1             1</span></span>
<span id="cb29-108"><a href="#cb29-108" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20 1994.1.DEN.26D4.GRT.117.50      25 38G5       V              1             1</span></span>
<span id="cb29-109"><a href="#cb29-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Fishing.line Month DataType HaulDur GroundSpeed                    haul.id</span></span>
<span id="cb29-110"><a href="#cb29-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         -9.00     3        R      60         3.0  1998:1:DEN:DAN2:GRT:83:40</span></span>
<span id="cb29-111"><a href="#cb29-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         -9.00     3        R      60         3.0  1998:1:DEN:DAN2:GRT:83:40</span></span>
<span id="cb29-112"><a href="#cb29-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         -9.00     3        R      60         3.0  1998:1:DEN:DAN2:GRT:83:40</span></span>
<span id="cb29-113"><a href="#cb29-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         -9.00     3        R      60         3.0  1998:1:DEN:DAN2:GRT:83:40</span></span>
<span id="cb29-114"><a href="#cb29-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5         -9.00     3        R      60         3.0  1998:1:DEN:DAN2:GRT:83:40</span></span>
<span id="cb29-115"><a href="#cb29-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6         -9.00     3        R      60         3.0  1998:1:DEN:DAN2:GRT:83:40</span></span>
<span id="cb29-116"><a href="#cb29-116" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7         -9.00     3        R      60         3.0  1998:1:DEN:DAN2:GRT:83:40</span></span>
<span id="cb29-117"><a href="#cb29-117" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8         -9.00     3        R      60         3.0  1998:1:DEN:DAN2:GRT:83:40</span></span>
<span id="cb29-118"><a href="#cb29-118" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9         -9.00     3        R      60         3.0  1998:1:DEN:DAN2:GRT:83:40</span></span>
<span id="cb29-119"><a href="#cb29-119" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10        -9.00     3        R      60         3.0  1998:1:DEN:DAN2:GRT:83:40</span></span>
<span id="cb29-120"><a href="#cb29-120" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11        -9.00     3        R      60         3.0  1998:1:DEN:DAN2:GRT:83:40</span></span>
<span id="cb29-121"><a href="#cb29-121" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12        -9.00     2        R      60         3.4  1996:1:DEN:DAN2:GRT:45:25</span></span>
<span id="cb29-122"><a href="#cb29-122" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13        83.00     3        C      60         3.0   1993:1:SWE:ARG:FOT:80:32</span></span>
<span id="cb29-123"><a href="#cb29-123" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14        -9.00     3        R      60         3.0  1998:1:DEN:DAN2:GRT:83:40</span></span>
<span id="cb29-124"><a href="#cb29-124" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15        -9.00     3        C      60        -9.0  1994:1:DEN:DAN2:GRT:43:22</span></span>
<span id="cb29-125"><a href="#cb29-125" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16        -9.00     2        R      60         3.6    1996:1:DEN:DAN2:GRT:9:5</span></span>
<span id="cb29-126"><a href="#cb29-126" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17        83.00     2        C      30         3.3   1998:1:SWE:ARG:FOT:191:3</span></span>
<span id="cb29-127"><a href="#cb29-127" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18        63.46     3        R      30         3.0  2003:1:DEN:DAN2:TVL:71:36</span></span>
<span id="cb29-128"><a href="#cb29-128" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19        36.00     2        C      30         4.0   1993:1:GFR:SOL:H20:46:20</span></span>
<span id="cb29-129"><a href="#cb29-129" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20        -9.00     3        C      60        -9.0 1994:1:DEN:DAN2:GRT:117:50</span></span>
<span id="cb29-130"><a href="#cb29-130" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ShootLat ShootLong      id_haul_stomach      Species CPUEun           a</span></span>
<span id="cb29-131"><a href="#cb29-131" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   54.8150   15.3217 1998.1.3.DEN.38G5.40 Gadus morhua      1 0.007345618</span></span>
<span id="cb29-132"><a href="#cb29-132" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   54.8150   15.3217 1998.1.3.DEN.38G5.40 Gadus morhua      1 0.007345618</span></span>
<span id="cb29-133"><a href="#cb29-133" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   54.8150   15.3217 1998.1.3.DEN.38G5.40 Gadus morhua      2 0.007345618</span></span>
<span id="cb29-134"><a href="#cb29-134" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   54.8150   15.3217 1998.1.3.DEN.38G5.40 Gadus morhua      1 0.007345618</span></span>
<span id="cb29-135"><a href="#cb29-135" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   54.8150   15.3217 1998.1.3.DEN.38G5.40 Gadus morhua      1 0.007345618</span></span>
<span id="cb29-136"><a href="#cb29-136" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   54.8150   15.3217 1998.1.3.DEN.38G5.40 Gadus morhua      1 0.007345618</span></span>
<span id="cb29-137"><a href="#cb29-137" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   54.8150   15.3217 1998.1.3.DEN.38G5.40 Gadus morhua      1 0.007345618</span></span>
<span id="cb29-138"><a href="#cb29-138" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8   54.8150   15.3217 1998.1.3.DEN.38G5.40 Gadus morhua      1 0.007345618</span></span>
<span id="cb29-139"><a href="#cb29-139" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9   54.8150   15.3217 1998.1.3.DEN.38G5.40 Gadus morhua      2 0.007345618</span></span>
<span id="cb29-140"><a href="#cb29-140" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  54.8150   15.3217 1998.1.3.DEN.38G5.40 Gadus morhua      3 0.007345618</span></span>
<span id="cb29-141"><a href="#cb29-141" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11  54.8150   15.3217 1998.1.3.DEN.38G5.40 Gadus morhua      1 0.007345618</span></span>
<span id="cb29-142"><a href="#cb29-142" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12  56.3700   20.0666 1996.1.2.DEN.41H0.25 Gadus morhua      1 0.008380383</span></span>
<span id="cb29-143"><a href="#cb29-143" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13  55.4120   15.3205 1993.1.3.SWE.39G5.32 Gadus morhua      1 0.007244481</span></span>
<span id="cb29-144"><a href="#cb29-144" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14  54.8150   15.3217 1998.1.3.DEN.38G5.40 Gadus morhua      2 0.007345618</span></span>
<span id="cb29-145"><a href="#cb29-145" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15  56.4500   20.2000 1994.1.3.DEN.41H0.22 Gadus morhua      1 0.008339286</span></span>
<span id="cb29-146"><a href="#cb29-146" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16  54.5750   15.3200  1996.1.2.DEN.38G5.5 Gadus morhua      1 0.008380383</span></span>
<span id="cb29-147"><a href="#cb29-147" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17  55.8218   15.4220  1998.1.2.SWE.40G5.3 Gadus morhua      2 0.007345618</span></span>
<span id="cb29-148"><a href="#cb29-148" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18  55.3709   15.5140 2003.1.3.DEN.39G5.36 Gadus morhua      2 0.007444717</span></span>
<span id="cb29-149"><a href="#cb29-149" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19  55.1333   14.1667 1993.1.2.GFR.39G4.20 Gadus morhua      2 0.007244481</span></span>
<span id="cb29-150"><a href="#cb29-150" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20  54.7833   15.9500 1994.1.3.DEN.38G5.50 Gadus morhua      1 0.008339286</span></span>
<span id="cb29-151"><a href="#cb29-151" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;           b length_cm length_cm2 weight_kg CPUEun_kg</span></span>
<span id="cb29-152"><a href="#cb29-152" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  3.082202       335        335 445.37563 445.37563</span></span>
<span id="cb29-153"><a href="#cb29-153" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  3.082202       285        285 270.61760 270.61760</span></span>
<span id="cb29-154"><a href="#cb29-154" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  3.082202       225        225 130.59602 261.19205</span></span>
<span id="cb29-155"><a href="#cb29-155" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  3.082202       220        220 121.85635 121.85635</span></span>
<span id="cb29-156"><a href="#cb29-156" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  3.082202       215        215 113.52063 113.52063</span></span>
<span id="cb29-157"><a href="#cb29-157" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  3.082202       180        180  65.64985  65.64985</span></span>
<span id="cb29-158"><a href="#cb29-158" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  3.082202       175        175  60.19004  60.19004</span></span>
<span id="cb29-159"><a href="#cb29-159" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  3.082202       160        160  45.66372  45.66372</span></span>
<span id="cb29-160"><a href="#cb29-160" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  3.082202       150        150  37.42667  74.85333</span></span>
<span id="cb29-161"><a href="#cb29-161" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 3.082202       145        145  33.71329 101.13986</span></span>
<span id="cb29-162"><a href="#cb29-162" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 3.082202       140        140  30.25718  30.25718</span></span>
<span id="cb29-163"><a href="#cb29-163" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12 3.055535       136        136  27.69283  27.69283</span></span>
<span id="cb29-164"><a href="#cb29-164" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13 3.100800       127        127  24.18146  24.18146</span></span>
<span id="cb29-165"><a href="#cb29-165" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14 3.082202       130        130  24.07846  48.15692</span></span>
<span id="cb29-166"><a href="#cb29-166" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15 3.052078       127        127  21.98379  21.98379</span></span>
<span id="cb29-167"><a href="#cb29-167" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16 3.055535       123        123  20.37242  20.37242</span></span>
<span id="cb29-168"><a href="#cb29-168" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17 3.082202       121        121  19.30161  38.60322</span></span>
<span id="cb29-169"><a href="#cb29-169" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18 3.070310       121        121  18.47755  36.95509</span></span>
<span id="cb29-170"><a href="#cb29-170" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19 3.100800       116        116  18.25909  36.51819</span></span>
<span id="cb29-171"><a href="#cb29-171" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20 3.052078       118        118  17.56609  17.56609</span></span>
<span id="cb29-172"><a href="#cb29-172" aria-hidden="true" tabindex="-1"></a>hlcodL <span class="ot">&lt;-</span> hlcodL <span class="sc">|&gt;</span> <span class="fu">filter</span>(weight_kg <span class="sc">&lt;</span> <span class="dv">100</span> <span class="sc">&amp;</span> length_cm2 <span class="sc">&lt;</span> <span class="dv">135</span>)</span>
<span id="cb29-173"><a href="#cb29-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-174"><a href="#cb29-174" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(hlcodL, <span class="fu">aes</span>(weight_kg, length_cm2)) <span class="sc">+</span></span>
<span id="cb29-175"><a href="#cb29-175" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb29-176"><a href="#cb29-176" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-14-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Flounder</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># First standardize length to cm and then check how zero-catches are implemented at this stage</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>hlfleL <span class="ot">&lt;-</span> hlfleL <span class="sc">|&gt;</span> </span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length_cm =</span> <span class="fu">ifelse</span>(LngtCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"."</span>, <span class="st">"0"</span>), </span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>                            LngtClass<span class="sc">/</span><span class="dv">10</span>,</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>                            LngtClass)) <span class="co"># Standardize length (https://vocab.ices.dk/?ref=18)</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(hlfleL, length_cm <span class="sc">==</span> <span class="dv">0</span>) <span class="co"># No such thing</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 0 × 51</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 51 variables: RecordType &lt;chr&gt;, Survey &lt;chr&gt;, Quarter &lt;int&gt;, Country &lt;chr&gt;,</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   Ship &lt;chr&gt;, Gear &lt;chr&gt;, SweepLngt &lt;int&gt;, GearEx &lt;chr&gt;, DoorType &lt;lgl&gt;,</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   StNo &lt;chr&gt;, HaulNo &lt;int&gt;, Year &lt;int&gt;, SpecCodeType &lt;chr&gt;, SpecCode &lt;int&gt;,</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   SpecVal &lt;fct&gt;, Sex &lt;chr&gt;, TotalNo &lt;dbl&gt;, CatIdentifier &lt;int&gt;, NoMeas &lt;int&gt;,</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   SubFactor &lt;dbl&gt;, SubWgt &lt;int&gt;, CatCatchWgt &lt;int&gt;, LngtCode &lt;chr&gt;,</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   LngtClass &lt;int&gt;, HLNoAtLngt &lt;dbl&gt;, DevStage &lt;chr&gt;, LenMeasType &lt;int&gt;,</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   DateofCalculation &lt;int&gt;, Valid_Aphia &lt;int&gt;, Ship2 &lt;chr&gt;, Ship3 &lt;chr&gt;, …</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>bits_ca_fle <span class="ot">&lt;-</span> bits_ca_fle <span class="sc">|&gt;</span> </span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(IndWgt) <span class="sc">|&gt;</span> </span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(LngtClass) <span class="sc">|&gt;</span> </span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(IndWgt <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> LngtClass <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span>  <span class="co"># Filter positive length and weight</span></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight_kg =</span> IndWgt<span class="sc">/</span><span class="dv">1000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length_cm =</span> <span class="fu">ifelse</span>(LngtCode <span class="sc">==</span> <span class="st">"."</span>, </span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>                            LngtClass<span class="sc">/</span><span class="dv">10</span>,</span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>                            LngtClass)) <span class="sc">|&gt;</span> <span class="co"># Standardize length ((https://vocab.ices.dk/?ref=18))</span></span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keep =</span> <span class="fu">ifelse</span>(LngtCode <span class="sc">==</span> <span class="st">"."</span> <span class="sc">&amp;</span> Year <span class="sc">==</span> <span class="dv">2008</span>, <span class="st">"N"</span>, <span class="st">"Y"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(keep <span class="sc">==</span> <span class="st">"Y"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(length_cm <span class="sc">&lt;</span> <span class="dv">70</span>)</span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Now check if all rows where length is NA are the ones with zero catch!</span></span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a>hlfleL <span class="sc">|&gt;</span> </span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length2 =</span> <span class="fu">replace_na</span>(length_cm, <span class="sc">-</span><span class="dv">9</span>),</span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a>         <span class="at">no_length =</span> <span class="fu">ifelse</span>(length2 <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="st">"T"</span>, <span class="st">"F"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(length2, CPUEun, <span class="at">color =</span> no_length)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>no_length)</span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 13 rows containing missing values (`geom_point()`).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-14-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>hlfleL <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">length2 =</span> <span class="fu">replace_na</span>(length_cm, <span class="sc">-</span><span class="dv">9</span>)) <span class="sc">|&gt;</span> <span class="fu">group_by</span>(length2) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(CPUEun) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(CPUEun)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 12,344 × 2</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # Groups:   length2 [253]</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    length2 CPUEun</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1    -9    0    </span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2    19    0.667</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3    21    0.667</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4    35    0.667</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5    39    0.667</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6    40    0.667</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7    42    0.667</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8    27    0.870</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9    32    0.870</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10    37.5  0.870</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 12,334 more rows</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Right, so all hauls with zero catch have NA length_cm. I don't have any NA catches</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hlfleL <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(CPUEun)</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Well, 11 rows. I will remove them</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>hlfleL <span class="ot">&lt;-</span> hlfleL <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(CPUEun)</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hlfleL <span class="sc">|&gt;</span> <span class="fu">filter</span>(CPUEun <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(length_cm)</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hlfleL <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(length_cm)</span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a><span class="co"># In other words, a zero catch is when the catch is zero and length_cm is NA</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a><span class="co"># In order to not get any NA CPUEs in unit biomass because length is NA (I want them instead</span></span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a><span class="co"># to be 0, as the numbers-CPUE is), I will replace length_cm == NA with length_cm == 0 before</span></span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a><span class="co"># calculating biomass cpue</span></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>hlfleL <span class="ot">&lt;-</span> hlfleL <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">length_cm2 =</span> <span class="fu">replace_na</span>(length_cm, <span class="dv">0</span>))</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize length in the haul-data and calculate weight</span></span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>hlfleL <span class="ot">&lt;-</span> hlfleL <span class="sc">|&gt;</span> </span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight_kg =</span> (a<span class="sc">*</span>length_cm2<span class="sc">^</span>b)<span class="sc">/</span><span class="dv">1000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEun_kg =</span> weight_kg<span class="sc">*</span>CPUEun)</span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot and check it's correct also in this data</span></span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(hlfleL, <span class="fu">aes</span>(weight_kg, length_cm2)) <span class="sc">+</span></span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-14-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hlfleL <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(CPUEun_kg) <span class="co"># Should not have any NA in biomass-catch</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hlfleL <span class="sc">|&gt;</span> <span class="fu">filter</span>(CPUEun_kg <span class="sc">==</span> <span class="dv">0</span>) <span class="co"># Should result in a few percent of rows (note this is not proportion of hauls, but rows)</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hlfleL <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(length_cm2) <span class="co"># Should be no NA</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plaice</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="co"># First standardize length to cm and then check how zero-catches are implemented at this stage</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>hlplaL <span class="ot">&lt;-</span> hlplaL <span class="sc">|&gt;</span> </span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length_cm =</span> <span class="fu">ifelse</span>(LngtCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"."</span>, <span class="st">"0"</span>), </span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>                            LngtClass<span class="sc">/</span><span class="dv">10</span>,</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>                            LngtClass)) <span class="co"># Standardize length (https://vocab.ices.dk/?ref=18)</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(hlplaL, length_cm <span class="sc">==</span> <span class="dv">0</span>) <span class="co"># No such thing</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 0 × 51</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 51 variables: RecordType &lt;chr&gt;, Survey &lt;chr&gt;, Quarter &lt;int&gt;, Country &lt;chr&gt;,</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   Ship &lt;chr&gt;, Gear &lt;chr&gt;, SweepLngt &lt;int&gt;, GearEx &lt;chr&gt;, DoorType &lt;lgl&gt;,</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   StNo &lt;chr&gt;, HaulNo &lt;int&gt;, Year &lt;int&gt;, SpecCodeType &lt;chr&gt;, SpecCode &lt;int&gt;,</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   SpecVal &lt;fct&gt;, Sex &lt;chr&gt;, TotalNo &lt;dbl&gt;, CatIdentifier &lt;int&gt;, NoMeas &lt;int&gt;,</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   SubFactor &lt;dbl&gt;, SubWgt &lt;int&gt;, CatCatchWgt &lt;int&gt;, LngtCode &lt;chr&gt;,</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   LngtClass &lt;int&gt;, HLNoAtLngt &lt;dbl&gt;, DevStage &lt;chr&gt;, LenMeasType &lt;int&gt;,</span></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   DateofCalculation &lt;int&gt;, Valid_Aphia &lt;int&gt;, Ship2 &lt;chr&gt;, Ship3 &lt;chr&gt;, …</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Now check if all rows where length is NA are the ones with zero catch!</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>hlplaL <span class="sc">|&gt;</span> </span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length2 =</span> <span class="fu">replace_na</span>(length_cm, <span class="sc">-</span><span class="dv">9</span>),</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">no_length =</span> <span class="fu">ifelse</span>(length2 <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="st">"T"</span>, <span class="st">"F"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(length2, CPUEun, <span class="at">color =</span> no_length)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>no_length)</span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 67 rows containing missing values (`geom_point()`).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-14-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>hlplaL <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">length2 =</span> <span class="fu">replace_na</span>(length_cm, <span class="sc">-</span><span class="dv">9</span>)) <span class="sc">|&gt;</span> <span class="fu">group_by</span>(length2) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(CPUEun) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(CPUEun)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2,890 × 2</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # Groups:   length2 [159]</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    length2 CPUEun</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1      -9  0    </span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2      31  0.667</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3      32  0.667</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4      34  0.667</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5      44  0.667</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6      24  0.968</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7      33  0.968</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8      32  0.984</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9      36  0.984</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10      33  0.984</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 2,880 more rows</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Right, so all hauls with zero catch have NA length_cm. I don't have any NA catches (but I do)</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hlplaL <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(CPUEun)</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>hlplaL <span class="ot">&lt;-</span> hlplaL <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(CPUEun)</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a><span class="co"># In other words, a zero catch is when the catch is zero and length_cm is NA</span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a><span class="co"># In order to not get any NA CPUEs in unit biomass because length is NA (I want them instead</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a><span class="co"># to be 0, as the numbers-CPUE is), I will replace length_cm == NA with length_cm == 0 before</span></span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a><span class="co"># calculating biomass cpue</span></span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>hlplaL <span class="ot">&lt;-</span> hlplaL <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">length_cm2 =</span> <span class="fu">replace_na</span>(length_cm, <span class="dv">0</span>))</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize length in the haul-data and calculate weight</span></span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>hlplaL <span class="ot">&lt;-</span> hlplaL <span class="sc">|&gt;</span> </span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight_kg =</span> (a<span class="sc">*</span>length_cm2<span class="sc">^</span>b)<span class="sc">/</span><span class="dv">1000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEun_kg =</span> weight_kg<span class="sc">*</span>CPUEun)</span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot and check it's correct also in this data</span></span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(hlplaL, <span class="fu">aes</span>(weight_kg, length_cm2)) <span class="sc">+</span></span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-14-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hlfleL <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(CPUEun_kg) <span class="co"># Should not have any NA in biomass-catch</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hlfleL <span class="sc">|&gt;</span> <span class="fu">filter</span>(CPUEun_kg <span class="sc">==</span> <span class="dv">0</span>) <span class="co"># Should result in a few percent of rows (note this is not proportion of hauls, but rows)</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hlfleL <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(length_cm2) <span class="co"># Should be no NA</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Dab</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="co"># First standardize length to cm and then check how zero-catches are implemented at this stage</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>hldabL <span class="ot">&lt;-</span> hldabL <span class="sc">|&gt;</span> </span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length_cm =</span> <span class="fu">ifelse</span>(LngtCode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"."</span>, <span class="st">"0"</span>), </span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>                            LngtClass<span class="sc">/</span><span class="dv">10</span>,</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>                            LngtClass)) <span class="co"># Standardize length (https://vocab.ices.dk/?ref=18)</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(hldabL, length_cm <span class="sc">==</span> <span class="dv">0</span>) <span class="co"># No such thing</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 0 × 51</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 51 variables: RecordType &lt;chr&gt;, Survey &lt;chr&gt;, Quarter &lt;int&gt;, Country &lt;chr&gt;,</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   Ship &lt;chr&gt;, Gear &lt;chr&gt;, SweepLngt &lt;int&gt;, GearEx &lt;chr&gt;, DoorType &lt;lgl&gt;,</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   StNo &lt;chr&gt;, HaulNo &lt;int&gt;, Year &lt;int&gt;, SpecCodeType &lt;chr&gt;, SpecCode &lt;int&gt;,</span></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   SpecVal &lt;fct&gt;, Sex &lt;chr&gt;, TotalNo &lt;dbl&gt;, CatIdentifier &lt;int&gt;, NoMeas &lt;int&gt;,</span></span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   SubFactor &lt;dbl&gt;, SubWgt &lt;int&gt;, CatCatchWgt &lt;int&gt;, LngtCode &lt;chr&gt;,</span></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   LngtClass &lt;int&gt;, HLNoAtLngt &lt;dbl&gt;, DevStage &lt;chr&gt;, LenMeasType &lt;int&gt;,</span></span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   DateofCalculation &lt;int&gt;, Valid_Aphia &lt;int&gt;, Ship2 &lt;chr&gt;, Ship3 &lt;chr&gt;, …</span></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Now check if all rows where length is NA are the ones with zero catch!</span></span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>hldabL <span class="sc">|&gt;</span> </span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length2 =</span> <span class="fu">replace_na</span>(length_cm, <span class="sc">-</span><span class="dv">9</span>),</span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">no_length =</span> <span class="fu">ifelse</span>(length2 <span class="sc">&lt;</span> <span class="dv">0</span>, <span class="st">"T"</span>, <span class="st">"F"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(length2, CPUEun, <span class="at">color =</span> no_length)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>no_length)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-14-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>hldabL <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">length2 =</span> <span class="fu">replace_na</span>(length_cm, <span class="sc">-</span><span class="dv">9</span>)) <span class="sc">|&gt;</span> <span class="fu">group_by</span>(length2) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(CPUEun) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(CPUEun)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1,014 × 2</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # Groups:   length2 [36]</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    length2 CPUEun</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1      -9  0    </span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2      22  0.667</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3      14  1    </span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4      22  1    </span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5      21  1    </span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6      25  1    </span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7      27  1    </span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8      23  1    </span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9      29  1    </span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10      19  1    </span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 1,004 more rows</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Right, so all hauls with zero catch have NA length_cm. I don't have any NA catches</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hldabL <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(CPUEun)</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a><span class="co"># In other words, a zero catch is when the catch is zero and length_cm is NA</span></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a><span class="co"># In order to not get any NA CPUEs in unit biomass because length is NA (I want them instead</span></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a><span class="co"># to be 0, as the numbers-CPUE is), I will replace length_cm == NA with length_cm == 0 before</span></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a><span class="co"># calculating biomass cpue</span></span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>hldabL <span class="ot">&lt;-</span> hldabL <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">length_cm2 =</span> <span class="fu">replace_na</span>(length_cm, <span class="dv">0</span>))</span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize length in the haul-data and calculate weight</span></span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>hldabL <span class="ot">&lt;-</span> hldabL <span class="sc">|&gt;</span> </span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight_kg =</span> (a<span class="sc">*</span>length_cm2<span class="sc">^</span>b)<span class="sc">/</span><span class="dv">1000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEun_kg =</span> weight_kg<span class="sc">*</span>CPUEun)</span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot and check it's correct also in this data</span></span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(hldabL, <span class="fu">aes</span>(weight_kg, length_cm2)) <span class="sc">+</span></span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-14-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hldabL <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(CPUEun_kg) <span class="co"># Should not have any NA in biomass-catch</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hldabL <span class="sc">|&gt;</span> <span class="fu">filter</span>(CPUEun_kg <span class="sc">==</span> <span class="dv">0</span>) <span class="co"># Should result in a few percent of rows (note this is not proportion of hauls, but rows)</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> hldabL <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(length_cm2) <span class="co"># Should be no NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>cod_0plot <span class="ot">&lt;-</span> hlcodL <span class="sc">|&gt;</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year, Quarter) <span class="sc">|&gt;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, Quarter, zero_catch) <span class="sc">|&gt;</span> </span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> zero_catch, <span class="at">values_from =</span> n) <span class="sc">|&gt;</span> </span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop_zero_catch_hauls =</span> Y<span class="sc">/</span>(N<span class="sc">+</span>Y),</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="st">"Cod"</span>) </span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: 3 grouping variables (haul.id, Year, Quarter)</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; summarise: now 12,254 rows and 4 columns, 2 group variables remaining (haul.id, Year)</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ungroup: no grouping variables</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: new variable 'zero_catch' (character) with 3 unique values and &lt;1% NA</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: 3 grouping variables (Year, Quarter, zero_catch)</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; summarise: now 125 rows and 4 columns, 2 group variables remaining (Year, Quarter)</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ungroup: no grouping variables</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pivot_wider: reorganized (zero_catch, n) into (N, Y, NA) [was 125x4, now 68x5]</span></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: new variable 'prop_zero_catch_hauls' (double) with 56 unique values and 18% NA</span></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         new variable 'species' (character) with one unique value and 0% NA</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>fle_0plot <span class="ot">&lt;-</span> hlfleL <span class="sc">|&gt;</span></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year, Quarter) <span class="sc">|&gt;</span></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, Quarter, zero_catch) <span class="sc">|&gt;</span> </span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> zero_catch, <span class="at">values_from =</span> n) <span class="sc">|&gt;</span> </span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop_zero_catch_hauls =</span> Y<span class="sc">/</span>(N<span class="sc">+</span>Y),</span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="st">"Flounder"</span>)</span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: 3 grouping variables (haul.id, Year, Quarter)</span></span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; summarise: now 12,003 rows and 4 columns, 2 group variables remaining (haul.id, Year)</span></span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ungroup: no grouping variables</span></span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: new variable 'zero_catch' (character) with 2 unique values and 0% NA</span></span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: 3 grouping variables (Year, Quarter, zero_catch)</span></span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; summarise: now 124 rows and 4 columns, 2 group variables remaining (Year, Quarter)</span></span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ungroup: no grouping variables</span></span>
<span id="cb37-41"><a href="#cb37-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pivot_wider: reorganized (zero_catch, n) into (N, Y) [was 124x4, now 68x4]</span></span>
<span id="cb37-42"><a href="#cb37-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: new variable 'prop_zero_catch_hauls' (double) with 57 unique values and 18% NA</span></span>
<span id="cb37-43"><a href="#cb37-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         new variable 'species' (character) with one unique value and 0% NA</span></span>
<span id="cb37-44"><a href="#cb37-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-45"><a href="#cb37-45" aria-hidden="true" tabindex="-1"></a>pla_0plot <span class="ot">&lt;-</span> hlplaL <span class="sc">|&gt;</span></span>
<span id="cb37-46"><a href="#cb37-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year, Quarter) <span class="sc">|&gt;</span></span>
<span id="cb37-47"><a href="#cb37-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb37-48"><a href="#cb37-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb37-49"><a href="#cb37-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb37-50"><a href="#cb37-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, Quarter, zero_catch) <span class="sc">|&gt;</span> </span>
<span id="cb37-51"><a href="#cb37-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb37-52"><a href="#cb37-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb37-53"><a href="#cb37-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> zero_catch, <span class="at">values_from =</span> n) <span class="sc">|&gt;</span> </span>
<span id="cb37-54"><a href="#cb37-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop_zero_catch_hauls =</span> Y<span class="sc">/</span>(N<span class="sc">+</span>Y),</span>
<span id="cb37-55"><a href="#cb37-55" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="st">"Plaice"</span>)</span>
<span id="cb37-56"><a href="#cb37-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: 3 grouping variables (haul.id, Year, Quarter)</span></span>
<span id="cb37-57"><a href="#cb37-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; summarise: now 11,480 rows and 4 columns, 2 group variables remaining (haul.id, Year)</span></span>
<span id="cb37-58"><a href="#cb37-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ungroup: no grouping variables</span></span>
<span id="cb37-59"><a href="#cb37-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: new variable 'zero_catch' (character) with 2 unique values and 0% NA</span></span>
<span id="cb37-60"><a href="#cb37-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: 3 grouping variables (Year, Quarter, zero_catch)</span></span>
<span id="cb37-61"><a href="#cb37-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; summarise: now 124 rows and 4 columns, 2 group variables remaining (Year, Quarter)</span></span>
<span id="cb37-62"><a href="#cb37-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ungroup: no grouping variables</span></span>
<span id="cb37-63"><a href="#cb37-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pivot_wider: reorganized (zero_catch, n) into (N, Y) [was 124x4, now 68x4]</span></span>
<span id="cb37-64"><a href="#cb37-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: new variable 'prop_zero_catch_hauls' (double) with 55 unique values and 18% NA</span></span>
<span id="cb37-65"><a href="#cb37-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         new variable 'species' (character) with one unique value and 0% NA</span></span>
<span id="cb37-66"><a href="#cb37-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-67"><a href="#cb37-67" aria-hidden="true" tabindex="-1"></a>dab_0plot <span class="ot">&lt;-</span> hldabL <span class="sc">|&gt;</span></span>
<span id="cb37-68"><a href="#cb37-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id, Year, Quarter) <span class="sc">|&gt;</span></span>
<span id="cb37-69"><a href="#cb37-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">CPUEun_haul =</span> <span class="fu">sum</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb37-70"><a href="#cb37-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb37-71"><a href="#cb37-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(CPUEun_haul <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb37-72"><a href="#cb37-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year, Quarter, zero_catch) <span class="sc">|&gt;</span> </span>
<span id="cb37-73"><a href="#cb37-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb37-74"><a href="#cb37-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb37-75"><a href="#cb37-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> zero_catch, <span class="at">values_from =</span> n) <span class="sc">|&gt;</span> </span>
<span id="cb37-76"><a href="#cb37-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop_zero_catch_hauls =</span> Y<span class="sc">/</span>(N<span class="sc">+</span>Y),</span>
<span id="cb37-77"><a href="#cb37-77" aria-hidden="true" tabindex="-1"></a>         <span class="at">species =</span> <span class="st">"Dab"</span>)</span>
<span id="cb37-78"><a href="#cb37-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: 3 grouping variables (haul.id, Year, Quarter)</span></span>
<span id="cb37-79"><a href="#cb37-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; summarise: now 11,477 rows and 4 columns, 2 group variables remaining (haul.id, Year)</span></span>
<span id="cb37-80"><a href="#cb37-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ungroup: no grouping variables</span></span>
<span id="cb37-81"><a href="#cb37-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: new variable 'zero_catch' (character) with 2 unique values and 0% NA</span></span>
<span id="cb37-82"><a href="#cb37-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: 3 grouping variables (Year, Quarter, zero_catch)</span></span>
<span id="cb37-83"><a href="#cb37-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; summarise: now 124 rows and 4 columns, 2 group variables remaining (Year, Quarter)</span></span>
<span id="cb37-84"><a href="#cb37-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ungroup: no grouping variables</span></span>
<span id="cb37-85"><a href="#cb37-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pivot_wider: reorganized (zero_catch, n) into (N, Y) [was 124x4, now 68x4]</span></span>
<span id="cb37-86"><a href="#cb37-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: new variable 'prop_zero_catch_hauls' (double) with 57 unique values and 18% NA</span></span>
<span id="cb37-87"><a href="#cb37-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         new variable 'species' (character) with one unique value and 0% NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="standardize-according-to-orio" class="level4">
<h4 class="anchored" data-anchor-id="standardize-according-to-orio">Standardize according to Orio</h4>
<p>To get unit: kg of fish caught by trawling for 1 h a standard bottom swept area of 0.45km2 using a TVL trawl with 75 m sweeps at the standard speed of three knots</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove hauls done with the TVL gear with a SweepLngt &lt; 50 (these are calibration hauls, pers. com. Anders &amp; Ale)</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co"># And also hauls without length-information</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove pelagic gear</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>hlcodL <span class="ot">&lt;-</span> hlcodL <span class="sc">|&gt;</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SweepLngt2 =</span> <span class="fu">replace_na</span>(SweepLngt, <span class="dv">50</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keep =</span> <span class="fu">ifelse</span>(Gear <span class="sc">==</span> <span class="st">"TVL"</span> <span class="sc">&amp;</span> SweepLngt2 <span class="sc">&lt;</span> <span class="dv">50</span>, <span class="st">"N"</span>, <span class="st">"Y"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(keep <span class="sc">==</span> <span class="st">"Y"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>keep, <span class="sc">-</span>SweepLngt2) <span class="sc">|&gt;</span> </span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Gear <span class="sc">==</span> <span class="st">"PEL"</span>)</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>hlfleL <span class="ot">&lt;-</span> hlfleL <span class="sc">|&gt;</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SweepLngt2 =</span> <span class="fu">replace_na</span>(SweepLngt, <span class="dv">50</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keep =</span> <span class="fu">ifelse</span>(Gear <span class="sc">==</span> <span class="st">"TVL"</span> <span class="sc">&amp;</span> SweepLngt2 <span class="sc">&lt;</span> <span class="dv">50</span>, <span class="st">"N"</span>, <span class="st">"Y"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(keep <span class="sc">==</span> <span class="st">"Y"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>keep, <span class="sc">-</span>SweepLngt2) <span class="sc">|&gt;</span> </span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Gear <span class="sc">==</span> <span class="st">"PEL"</span>)</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>hlplaL <span class="ot">&lt;-</span> hlplaL <span class="sc">|&gt;</span></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SweepLngt2 =</span> <span class="fu">replace_na</span>(SweepLngt, <span class="dv">50</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keep =</span> <span class="fu">ifelse</span>(Gear <span class="sc">==</span> <span class="st">"TVL"</span> <span class="sc">&amp;</span> SweepLngt2 <span class="sc">&lt;</span> <span class="dv">50</span>, <span class="st">"N"</span>, <span class="st">"Y"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(keep <span class="sc">==</span> <span class="st">"Y"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>keep, <span class="sc">-</span>SweepLngt2) <span class="sc">|&gt;</span> </span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Gear <span class="sc">==</span> <span class="st">"PEL"</span>)</span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a>hldabL <span class="ot">&lt;-</span> hldabL <span class="sc">|&gt;</span></span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SweepLngt2 =</span> <span class="fu">replace_na</span>(SweepLngt, <span class="dv">50</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">keep =</span> <span class="fu">ifelse</span>(Gear <span class="sc">==</span> <span class="st">"TVL"</span> <span class="sc">&amp;</span> SweepLngt2 <span class="sc">&lt;</span> <span class="dv">50</span>, <span class="st">"N"</span>, <span class="st">"Y"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(keep <span class="sc">==</span> <span class="st">"Y"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>keep, <span class="sc">-</span>SweepLngt2) <span class="sc">|&gt;</span> </span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>Gear <span class="sc">==</span> <span class="st">"PEL"</span>)</span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Add in RS and RSA-values from the sweep file</span></span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a><span class="co"># CPUE should be multiplied with RS and RSA to standardize to a relative speed and gear dimension.</span></span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a><span class="co"># There is not a single file will all RS and RSA values. Instead they come in three files:</span></span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a><span class="co"># - sweep (non-Swedish hauls between 1991-2016)</span></span>
<span id="cb38-36"><a href="#cb38-36" aria-hidden="true" tabindex="-1"></a><span class="co"># - + calculated based on trawl speed and gear dimensions.</span></span>
<span id="cb38-37"><a href="#cb38-37" aria-hidden="true" tabindex="-1"></a><span class="co"># I will join in the RS and RSA values from all sources, then standardize and filter</span></span>
<span id="cb38-38"><a href="#cb38-38" aria-hidden="true" tabindex="-1"></a><span class="co"># away non-standardized hauls</span></span>
<span id="cb38-39"><a href="#cb38-39" aria-hidden="true" tabindex="-1"></a><span class="co"># sort(unique(sweep$Year))</span></span>
<span id="cb38-40"><a href="#cb38-40" aria-hidden="true" tabindex="-1"></a><span class="co"># sort(unique(sweep$Country))</span></span>
<span id="cb38-41"><a href="#cb38-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-42"><a href="#cb38-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Since I don't have the sweep data for Swedish data, I have to calculate it from scratch using the </span></span>
<span id="cb38-43"><a href="#cb38-43" aria-hidden="true" tabindex="-1"></a><span class="co"># equation in Orio's spreadsheet</span></span>
<span id="cb38-44"><a href="#cb38-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-45"><a href="#cb38-45" aria-hidden="true" tabindex="-1"></a><span class="co"># First I will join in the sweep data, </span></span>
<span id="cb38-46"><a href="#cb38-46" aria-hidden="true" tabindex="-1"></a>sweep_sel <span class="ot">&lt;-</span> sweep <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="st">"haul.id"</span> <span class="ot">=</span> <span class="st">"ï..haul.id"</span>) <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(haul.id, RSA, RS)</span>
<span id="cb38-47"><a href="#cb38-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-48"><a href="#cb38-48" aria-hidden="true" tabindex="-1"></a>hlcodL2 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(hlcodL, sweep_sel)</span>
<span id="cb38-49"><a href="#cb38-49" aria-hidden="true" tabindex="-1"></a>hlfleL2 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(hlfleL, sweep_sel)</span>
<span id="cb38-50"><a href="#cb38-50" aria-hidden="true" tabindex="-1"></a>hlplaL2 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(hlplaL, sweep_sel)</span>
<span id="cb38-51"><a href="#cb38-51" aria-hidden="true" tabindex="-1"></a>hldabL2 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(hldabL, sweep_sel)</span>
<span id="cb38-52"><a href="#cb38-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-53"><a href="#cb38-53" aria-hidden="true" tabindex="-1"></a>hlcodL2 <span class="ot">&lt;-</span> hlcodL2 <span class="sc">|&gt;</span></span>
<span id="cb38-54"><a href="#cb38-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"RS_sweep"</span> <span class="ot">=</span> <span class="st">"RS"</span>,</span>
<span id="cb38-55"><a href="#cb38-55" aria-hidden="true" tabindex="-1"></a>         <span class="st">"RSA_sweep"</span> <span class="ot">=</span> <span class="st">"RSA"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb38-56"><a href="#cb38-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RS_sweep =</span> <span class="fu">as.numeric</span>(RS_sweep),</span>
<span id="cb38-57"><a href="#cb38-57" aria-hidden="true" tabindex="-1"></a>         <span class="at">RSA_sweep =</span> <span class="fu">as.numeric</span>(RSA_sweep))</span>
<span id="cb38-58"><a href="#cb38-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-59"><a href="#cb38-59" aria-hidden="true" tabindex="-1"></a>hlfleL2 <span class="ot">&lt;-</span> hlfleL2 <span class="sc">|&gt;</span></span>
<span id="cb38-60"><a href="#cb38-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"RS_sweep"</span> <span class="ot">=</span> <span class="st">"RS"</span>,</span>
<span id="cb38-61"><a href="#cb38-61" aria-hidden="true" tabindex="-1"></a>         <span class="st">"RSA_sweep"</span> <span class="ot">=</span> <span class="st">"RSA"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb38-62"><a href="#cb38-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RS_sweep =</span> <span class="fu">as.numeric</span>(RS_sweep),</span>
<span id="cb38-63"><a href="#cb38-63" aria-hidden="true" tabindex="-1"></a>         <span class="at">RSA_sweep =</span> <span class="fu">as.numeric</span>(RSA_sweep))</span>
<span id="cb38-64"><a href="#cb38-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-65"><a href="#cb38-65" aria-hidden="true" tabindex="-1"></a>hlplaL2 <span class="ot">&lt;-</span> hlplaL2 <span class="sc">|&gt;</span></span>
<span id="cb38-66"><a href="#cb38-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"RS_sweep"</span> <span class="ot">=</span> <span class="st">"RS"</span>,</span>
<span id="cb38-67"><a href="#cb38-67" aria-hidden="true" tabindex="-1"></a>         <span class="st">"RSA_sweep"</span> <span class="ot">=</span> <span class="st">"RSA"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb38-68"><a href="#cb38-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RS_sweep =</span> <span class="fu">as.numeric</span>(RS_sweep),</span>
<span id="cb38-69"><a href="#cb38-69" aria-hidden="true" tabindex="-1"></a>         <span class="at">RSA_sweep =</span> <span class="fu">as.numeric</span>(RSA_sweep))</span>
<span id="cb38-70"><a href="#cb38-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-71"><a href="#cb38-71" aria-hidden="true" tabindex="-1"></a>hldabL2 <span class="ot">&lt;-</span> hldabL2 <span class="sc">|&gt;</span></span>
<span id="cb38-72"><a href="#cb38-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">"RS_sweep"</span> <span class="ot">=</span> <span class="st">"RS"</span>,</span>
<span id="cb38-73"><a href="#cb38-73" aria-hidden="true" tabindex="-1"></a>         <span class="st">"RSA_sweep"</span> <span class="ot">=</span> <span class="st">"RSA"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb38-74"><a href="#cb38-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RS_sweep =</span> <span class="fu">as.numeric</span>(RS_sweep),</span>
<span id="cb38-75"><a href="#cb38-75" aria-hidden="true" tabindex="-1"></a>         <span class="at">RSA_sweep =</span> <span class="fu">as.numeric</span>(RSA_sweep))</span>
<span id="cb38-76"><a href="#cb38-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-77"><a href="#cb38-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-78"><a href="#cb38-78" aria-hidden="true" tabindex="-1"></a><span class="co"># I will calculate a RS and RSA column in the catch data based on Ale's equation in the sweep file:</span></span>
<span id="cb38-79"><a href="#cb38-79" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(hlcodL2<span class="sc">$</span>GroundSpeed))</span>
<span id="cb38-80"><a href="#cb38-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] -9.0  0.1  0.2  0.8  1.7  1.8  2.0  2.1  2.2  2.3  2.4  2.5  2.6  2.7  2.8</span></span>
<span id="cb38-81"><a href="#cb38-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [16]  2.9  3.0  3.1  3.2  3.3  3.4  3.5  3.6  3.7  3.8  3.9  4.0  4.1  4.2  4.3</span></span>
<span id="cb38-82"><a href="#cb38-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [31]  4.4  4.5  4.6  4.7  4.9  5.0  5.2  5.3  5.4  5.5  5.6  5.7  5.9  6.0  6.1</span></span>
<span id="cb38-83"><a href="#cb38-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [46]  6.2  6.3  6.6  6.7  6.8  6.9  7.1  7.3  8.6</span></span>
<span id="cb38-84"><a href="#cb38-84" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(hlcodL2<span class="sc">$</span>Fishing.line))</span>
<span id="cb38-85"><a href="#cb38-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  -9.00  28.00  33.22  36.00  39.80  63.46  83.00 160.00</span></span>
<span id="cb38-86"><a href="#cb38-86" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">unique</span>(hlcodL2<span class="sc">$</span>SweepLngt))</span>
<span id="cb38-87"><a href="#cb38-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1]   0  40  50  60  75  87  90  95 100 110 135 180 185 200 203 225 235</span></span>
<span id="cb38-88"><a href="#cb38-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-89"><a href="#cb38-89" aria-hidden="true" tabindex="-1"></a><span class="co"># First replace -9 in the columns I use for the calculations with NA so I don't end up with real numbers that are wrong!</span></span>
<span id="cb38-90"><a href="#cb38-90" aria-hidden="true" tabindex="-1"></a>hlcodL2 <span class="ot">&lt;-</span> hlcodL2 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">GroundSpeed =</span> <span class="fu">ifelse</span>(GroundSpeed <span class="sc">==</span> <span class="sc">-</span><span class="dv">9</span>, <span class="cn">NA</span>, GroundSpeed),</span>
<span id="cb38-91"><a href="#cb38-91" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Fishing.line =</span> <span class="fu">ifelse</span>(Fishing.line <span class="sc">==</span> <span class="sc">-</span><span class="dv">9</span>, <span class="cn">NA</span>, Fishing.line),</span>
<span id="cb38-92"><a href="#cb38-92" aria-hidden="true" tabindex="-1"></a>                              <span class="at">SweepLngt =</span> <span class="fu">ifelse</span>(SweepLngt <span class="sc">==</span> <span class="sc">-</span><span class="dv">9</span>, <span class="cn">NA</span>, SweepLngt))</span>
<span id="cb38-93"><a href="#cb38-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-94"><a href="#cb38-94" aria-hidden="true" tabindex="-1"></a>hlfleL2 <span class="ot">&lt;-</span> hlfleL2 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">GroundSpeed =</span> <span class="fu">ifelse</span>(GroundSpeed <span class="sc">==</span> <span class="sc">-</span><span class="dv">9</span>, <span class="cn">NA</span>, GroundSpeed),</span>
<span id="cb38-95"><a href="#cb38-95" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Fishing.line =</span> <span class="fu">ifelse</span>(Fishing.line <span class="sc">==</span> <span class="sc">-</span><span class="dv">9</span>, <span class="cn">NA</span>, Fishing.line),</span>
<span id="cb38-96"><a href="#cb38-96" aria-hidden="true" tabindex="-1"></a>                              <span class="at">SweepLngt =</span> <span class="fu">ifelse</span>(SweepLngt <span class="sc">==</span> <span class="sc">-</span><span class="dv">9</span>, <span class="cn">NA</span>, SweepLngt))</span>
<span id="cb38-97"><a href="#cb38-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-98"><a href="#cb38-98" aria-hidden="true" tabindex="-1"></a>hlplaL2 <span class="ot">&lt;-</span> hlplaL2 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">GroundSpeed =</span> <span class="fu">ifelse</span>(GroundSpeed <span class="sc">==</span> <span class="sc">-</span><span class="dv">9</span>, <span class="cn">NA</span>, GroundSpeed),</span>
<span id="cb38-99"><a href="#cb38-99" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Fishing.line =</span> <span class="fu">ifelse</span>(Fishing.line <span class="sc">==</span> <span class="sc">-</span><span class="dv">9</span>, <span class="cn">NA</span>, Fishing.line),</span>
<span id="cb38-100"><a href="#cb38-100" aria-hidden="true" tabindex="-1"></a>                              <span class="at">SweepLngt =</span> <span class="fu">ifelse</span>(SweepLngt <span class="sc">==</span> <span class="sc">-</span><span class="dv">9</span>, <span class="cn">NA</span>, SweepLngt))</span>
<span id="cb38-101"><a href="#cb38-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-102"><a href="#cb38-102" aria-hidden="true" tabindex="-1"></a>hldabL2 <span class="ot">&lt;-</span> hldabL2 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">GroundSpeed =</span> <span class="fu">ifelse</span>(GroundSpeed <span class="sc">==</span> <span class="sc">-</span><span class="dv">9</span>, <span class="cn">NA</span>, GroundSpeed),</span>
<span id="cb38-103"><a href="#cb38-103" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Fishing.line =</span> <span class="fu">ifelse</span>(Fishing.line <span class="sc">==</span> <span class="sc">-</span><span class="dv">9</span>, <span class="cn">NA</span>, Fishing.line),</span>
<span id="cb38-104"><a href="#cb38-104" aria-hidden="true" tabindex="-1"></a>                              <span class="at">SweepLngt =</span> <span class="fu">ifelse</span>(SweepLngt <span class="sc">==</span> <span class="sc">-</span><span class="dv">9</span>, <span class="cn">NA</span>, SweepLngt))</span>
<span id="cb38-105"><a href="#cb38-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-106"><a href="#cb38-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-107"><a href="#cb38-107" aria-hidden="true" tabindex="-1"></a>hlcodL2 <span class="sc">|&gt;</span> <span class="fu">filter</span>(Quarter <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb38-108"><a href="#cb38-108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(GroundSpeed, Fishing.line, SweepLngt) <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">20</span>)</span>
<span id="cb38-109"><a href="#cb38-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    GroundSpeed Fishing.line SweepLngt</span></span>
<span id="cb38-110"><a href="#cb38-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           NA           NA        60</span></span>
<span id="cb38-111"><a href="#cb38-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           NA           NA       110</span></span>
<span id="cb38-112"><a href="#cb38-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          3.8         36.0        NA</span></span>
<span id="cb38-113"><a href="#cb38-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          3.6         36.0        NA</span></span>
<span id="cb38-114"><a href="#cb38-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          4.0         36.0        NA</span></span>
<span id="cb38-115"><a href="#cb38-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          4.6         36.0        NA</span></span>
<span id="cb38-116"><a href="#cb38-116" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7          3.4         36.0        NA</span></span>
<span id="cb38-117"><a href="#cb38-117" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8          4.2         36.0        NA</span></span>
<span id="cb38-118"><a href="#cb38-118" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9          3.2         36.0        NA</span></span>
<span id="cb38-119"><a href="#cb38-119" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10         2.6         36.0        NA</span></span>
<span id="cb38-120"><a href="#cb38-120" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11         2.8         36.0        NA</span></span>
<span id="cb38-121"><a href="#cb38-121" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12         3.1        160.0        50</span></span>
<span id="cb38-122"><a href="#cb38-122" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13         2.9        160.0        50</span></span>
<span id="cb38-123"><a href="#cb38-123" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14         3.0        160.0        50</span></span>
<span id="cb38-124"><a href="#cb38-124" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15         2.6        160.0        50</span></span>
<span id="cb38-125"><a href="#cb38-125" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16         3.2        160.0        50</span></span>
<span id="cb38-126"><a href="#cb38-126" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17         3.1         83.0       185</span></span>
<span id="cb38-127"><a href="#cb38-127" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18         3.0         83.0       185</span></span>
<span id="cb38-128"><a href="#cb38-128" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19          NA         39.8        NA</span></span>
<span id="cb38-129"><a href="#cb38-129" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20         2.8         83.0       185</span></span>
<span id="cb38-130"><a href="#cb38-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-131"><a href="#cb38-131" aria-hidden="true" tabindex="-1"></a>hlcodL2 <span class="sc">|&gt;</span> <span class="fu">filter</span>(Quarter <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">|&gt;</span></span>
<span id="cb38-132"><a href="#cb38-132" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(GroundSpeed, Fishing.line, SweepLngt) <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">20</span>)</span>
<span id="cb38-133"><a href="#cb38-133" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    GroundSpeed Fishing.line SweepLngt</span></span>
<span id="cb38-134"><a href="#cb38-134" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          2.9           83       180</span></span>
<span id="cb38-135"><a href="#cb38-135" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          3.8           36        NA</span></span>
<span id="cb38-136"><a href="#cb38-136" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          2.8           83       180</span></span>
<span id="cb38-137"><a href="#cb38-137" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          3.1           83       180</span></span>
<span id="cb38-138"><a href="#cb38-138" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          3.4           36        NA</span></span>
<span id="cb38-139"><a href="#cb38-139" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          4.0           36        NA</span></span>
<span id="cb38-140"><a href="#cb38-140" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7          4.2           36        NA</span></span>
<span id="cb38-141"><a href="#cb38-141" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8          3.2           83       180</span></span>
<span id="cb38-142"><a href="#cb38-142" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9          3.3           83       180</span></span>
<span id="cb38-143"><a href="#cb38-143" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10         3.2           36        NA</span></span>
<span id="cb38-144"><a href="#cb38-144" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11         3.6           36        NA</span></span>
<span id="cb38-145"><a href="#cb38-145" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12         3.0           83       180</span></span>
<span id="cb38-146"><a href="#cb38-146" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13         3.0           36        NA</span></span>
<span id="cb38-147"><a href="#cb38-147" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14         2.8           83       185</span></span>
<span id="cb38-148"><a href="#cb38-148" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15         3.0           83       185</span></span>
<span id="cb38-149"><a href="#cb38-149" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16         3.2           83       185</span></span>
<span id="cb38-150"><a href="#cb38-150" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17         3.3           83       185</span></span>
<span id="cb38-151"><a href="#cb38-151" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18         3.1           83       185</span></span>
<span id="cb38-152"><a href="#cb38-152" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19         3.5           83       185</span></span>
<span id="cb38-153"><a href="#cb38-153" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20         3.4           83       185</span></span>
<span id="cb38-154"><a href="#cb38-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-155"><a href="#cb38-155" aria-hidden="true" tabindex="-1"></a><span class="co"># Hmm, Q1 has at least one of the RS or RSA variables as NAs. Will be difficult to standardize!</span></span>
<span id="cb38-156"><a href="#cb38-156" aria-hidden="true" tabindex="-1"></a><span class="co"># Hope the correction factors are present in Ales conversion data</span></span>
<span id="cb38-157"><a href="#cb38-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-158"><a href="#cb38-158" aria-hidden="true" tabindex="-1"></a><span class="co"># Now calculate correction factors</span></span>
<span id="cb38-159"><a href="#cb38-159" aria-hidden="true" tabindex="-1"></a>hlcodL2 <span class="ot">&lt;-</span> hlcodL2 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">RS_x =</span> <span class="dv">3</span><span class="sc">/</span>GroundSpeed,</span>
<span id="cb38-160"><a href="#cb38-160" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Horizontal.opening..m. =</span> Fishing.line<span class="sc">*</span><span class="fl">0.67</span>,</span>
<span id="cb38-161"><a href="#cb38-161" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Swep.one.side..after.formula...meter =</span> <span class="fl">0.258819045</span><span class="sc">*</span>SweepLngt, <span class="co"># SIN(RADIANS(15))</span></span>
<span id="cb38-162"><a href="#cb38-162" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Size.final..m =</span> Horizontal.opening..m. <span class="sc">+</span> (Swep.one.side..after.formula...meter<span class="sc">*</span><span class="dv">2</span>),</span>
<span id="cb38-163"><a href="#cb38-163" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Swept.area =</span> (Size.final..m<span class="sc">*</span><span class="dv">3</span><span class="sc">*</span><span class="dv">1860</span>)<span class="sc">/</span><span class="dv">1000000</span>,</span>
<span id="cb38-164"><a href="#cb38-164" aria-hidden="true" tabindex="-1"></a>                              <span class="at">RSA_x =</span> <span class="fl">0.45388309675081</span><span class="sc">/</span>Swept.area)</span>
<span id="cb38-165"><a href="#cb38-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-166"><a href="#cb38-166" aria-hidden="true" tabindex="-1"></a>hlfleL2 <span class="ot">&lt;-</span> hlfleL2 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">RS_x =</span> <span class="dv">3</span><span class="sc">/</span>GroundSpeed,</span>
<span id="cb38-167"><a href="#cb38-167" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Horizontal.opening..m. =</span> Fishing.line<span class="sc">*</span><span class="fl">0.67</span>,</span>
<span id="cb38-168"><a href="#cb38-168" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Swep.one.side..after.formula...meter =</span> <span class="fl">0.258819045</span><span class="sc">*</span>SweepLngt, <span class="co"># SIN(RADIANS(15))</span></span>
<span id="cb38-169"><a href="#cb38-169" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Size.final..m =</span> Horizontal.opening..m. <span class="sc">+</span> (Swep.one.side..after.formula...meter<span class="sc">*</span><span class="dv">2</span>),</span>
<span id="cb38-170"><a href="#cb38-170" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Swept.area =</span> (Size.final..m<span class="sc">*</span><span class="dv">3</span><span class="sc">*</span><span class="dv">1860</span>)<span class="sc">/</span><span class="dv">1000000</span>,</span>
<span id="cb38-171"><a href="#cb38-171" aria-hidden="true" tabindex="-1"></a>                              <span class="at">RSA_x =</span> <span class="fl">0.45388309675081</span><span class="sc">/</span>Swept.area)</span>
<span id="cb38-172"><a href="#cb38-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-173"><a href="#cb38-173" aria-hidden="true" tabindex="-1"></a>hlplaL2 <span class="ot">&lt;-</span> hlplaL2 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">RS_x =</span> <span class="dv">3</span><span class="sc">/</span>GroundSpeed,</span>
<span id="cb38-174"><a href="#cb38-174" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Horizontal.opening..m. =</span> Fishing.line<span class="sc">*</span><span class="fl">0.67</span>,</span>
<span id="cb38-175"><a href="#cb38-175" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Swep.one.side..after.formula...meter =</span> <span class="fl">0.258819045</span><span class="sc">*</span>SweepLngt, <span class="co"># SIN(RADIANS(15))</span></span>
<span id="cb38-176"><a href="#cb38-176" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Size.final..m =</span> Horizontal.opening..m. <span class="sc">+</span> (Swep.one.side..after.formula...meter<span class="sc">*</span><span class="dv">2</span>),</span>
<span id="cb38-177"><a href="#cb38-177" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Swept.area =</span> (Size.final..m<span class="sc">*</span><span class="dv">3</span><span class="sc">*</span><span class="dv">1860</span>)<span class="sc">/</span><span class="dv">1000000</span>,</span>
<span id="cb38-178"><a href="#cb38-178" aria-hidden="true" tabindex="-1"></a>                              <span class="at">RSA_x =</span> <span class="fl">0.45388309675081</span><span class="sc">/</span>Swept.area)</span>
<span id="cb38-179"><a href="#cb38-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-180"><a href="#cb38-180" aria-hidden="true" tabindex="-1"></a>hldabL2 <span class="ot">&lt;-</span> hldabL2 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">RS_x =</span> <span class="dv">3</span><span class="sc">/</span>GroundSpeed,</span>
<span id="cb38-181"><a href="#cb38-181" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Horizontal.opening..m. =</span> Fishing.line<span class="sc">*</span><span class="fl">0.67</span>,</span>
<span id="cb38-182"><a href="#cb38-182" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Swep.one.side..after.formula...meter =</span> <span class="fl">0.258819045</span><span class="sc">*</span>SweepLngt, <span class="co"># SIN(RADIANS(15))</span></span>
<span id="cb38-183"><a href="#cb38-183" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Size.final..m =</span> Horizontal.opening..m. <span class="sc">+</span> (Swep.one.side..after.formula...meter<span class="sc">*</span><span class="dv">2</span>),</span>
<span id="cb38-184"><a href="#cb38-184" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Swept.area =</span> (Size.final..m<span class="sc">*</span><span class="dv">3</span><span class="sc">*</span><span class="dv">1860</span>)<span class="sc">/</span><span class="dv">1000000</span>,</span>
<span id="cb38-185"><a href="#cb38-185" aria-hidden="true" tabindex="-1"></a>                              <span class="at">RSA_x =</span> <span class="fl">0.45388309675081</span><span class="sc">/</span>Swept.area)</span>
<span id="cb38-186"><a href="#cb38-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-187"><a href="#cb38-187" aria-hidden="true" tabindex="-1"></a><span class="co"># Check EQ. is correct by recalculating it in the sweep file</span></span>
<span id="cb38-188"><a href="#cb38-188" aria-hidden="true" tabindex="-1"></a>sweep <span class="ot">&lt;-</span> sweep <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Horizontal.opening..m.2 =</span> Fishing.line<span class="sc">*</span><span class="fl">0.67</span>,</span>
<span id="cb38-189"><a href="#cb38-189" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Swep.one.side..after.formula...meter2 =</span> <span class="fl">0.258819045</span><span class="sc">*</span>SweepLngt, <span class="co"># SIN(RADIANS(15))</span></span>
<span id="cb38-190"><a href="#cb38-190" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Size.final..m2 =</span> Horizontal.opening..m<span class="fl">.2</span> <span class="sc">+</span> (Swep.one.side..after.formula...meter2<span class="sc">*</span><span class="dv">2</span>),</span>
<span id="cb38-191"><a href="#cb38-191" aria-hidden="true" tabindex="-1"></a>                          <span class="at">Swept.area2 =</span> (Size.final..m2<span class="sc">*</span><span class="dv">3</span><span class="sc">*</span><span class="dv">1860</span>)<span class="sc">/</span><span class="dv">1000000</span>,</span>
<span id="cb38-192"><a href="#cb38-192" aria-hidden="true" tabindex="-1"></a>                          <span class="at">RSA_x =</span> <span class="fl">0.45388309675081</span><span class="sc">/</span>Swept.area2)</span>
<span id="cb38-193"><a href="#cb38-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-194"><a href="#cb38-194" aria-hidden="true" tabindex="-1"></a>sweep <span class="sc">|&gt;</span></span>
<span id="cb38-195"><a href="#cb38-195" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span></span>
<span id="cb38-196"><a href="#cb38-196" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">as.numeric</span>(RSA), RSA_x)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Yes it's the same</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace NAs with -1/3 (because ICES codes missing values as -9 and in the calculation above they get -1/3),</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># so that I can filter them easily later</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co"># sort(unique(hlcodL2$RS_x))</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="co"># sort(unique(hlcodL2$RSA_x))</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>hlcodL2<span class="sc">$</span>RS_x[<span class="fu">is.na</span>(hlcodL2<span class="sc">$</span>RS_x)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>hlcodL2<span class="sc">$</span>RS_sweep[<span class="fu">is.na</span>(hlcodL2<span class="sc">$</span>RS_sweep)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>hlcodL2<span class="sc">$</span>RSA_x[<span class="fu">is.na</span>(hlcodL2<span class="sc">$</span>RSA_x)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>hlcodL2<span class="sc">$</span>RSA_sweep[<span class="fu">is.na</span>(hlcodL2<span class="sc">$</span>RSA_sweep)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>hlfleL2<span class="sc">$</span>RS_x[<span class="fu">is.na</span>(hlfleL2<span class="sc">$</span>RS_x)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>hlfleL2<span class="sc">$</span>RS_sweep[<span class="fu">is.na</span>(hlfleL2<span class="sc">$</span>RS_sweep)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>hlfleL2<span class="sc">$</span>RSA_x[<span class="fu">is.na</span>(hlfleL2<span class="sc">$</span>RSA_x)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>hlfleL2<span class="sc">$</span>RSA_sweep[<span class="fu">is.na</span>(hlfleL2<span class="sc">$</span>RSA_sweep)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>hlplaL2<span class="sc">$</span>RS_x[<span class="fu">is.na</span>(hlplaL2<span class="sc">$</span>RS_x)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>hlplaL2<span class="sc">$</span>RS_sweep[<span class="fu">is.na</span>(hlplaL2<span class="sc">$</span>RS_sweep)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>hlplaL2<span class="sc">$</span>RSA_x[<span class="fu">is.na</span>(hlplaL2<span class="sc">$</span>RSA_x)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>hlplaL2<span class="sc">$</span>RSA_sweep[<span class="fu">is.na</span>(hlplaL2<span class="sc">$</span>RSA_sweep)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>hldabL2<span class="sc">$</span>RS_x[<span class="fu">is.na</span>(hldabL2<span class="sc">$</span>RS_x)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>hldabL2<span class="sc">$</span>RS_sweep[<span class="fu">is.na</span>(hldabL2<span class="sc">$</span>RS_sweep)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>hldabL2<span class="sc">$</span>RSA_x[<span class="fu">is.na</span>(hldabL2<span class="sc">$</span>RSA_x)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>hldabL2<span class="sc">$</span>RSA_sweep[<span class="fu">is.na</span>(hldabL2<span class="sc">$</span>RSA_sweep)] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">/</span><span class="dv">3</span></span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare the difference correction factors (calculated vs imported from sweep file)</span></span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">filter</span>(hlcodL2, RS_x <span class="sc">&gt;</span> <span class="dv">0</span>), <span class="fu">aes</span>(RS_x)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">xlim</span>(<span class="fl">0.4</span>, <span class="fl">1.76</span>)</span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(hlcodL2, <span class="fu">aes</span>(RSA_x)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(hlcodL2, <span class="fu">aes</span>(RS_sweep)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span>
<span id="cb39-32"><a href="#cb39-32" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(hlcodL2, <span class="fu">aes</span>(RSA_sweep)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span>
<span id="cb39-33"><a href="#cb39-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-34"><a href="#cb39-34" aria-hidden="true" tabindex="-1"></a>(p1 <span class="sc">+</span> p2) <span class="sc">/</span> (p3 <span class="sc">+</span> p4)</span>
<span id="cb39-35"><a href="#cb39-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 284 rows containing non-finite values (`stat_bin()`).</span></span>
<span id="cb39-36"><a href="#cb39-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 2 rows containing missing values (`geom_bar()`).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>p5 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">filter</span>(hlfleL2, RS_x <span class="sc">&gt;</span> <span class="dv">0</span>), <span class="fu">aes</span>(RS_x)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">xlim</span>(<span class="fl">0.4</span>, <span class="fl">1.76</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>p6 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(hlfleL2, <span class="fu">aes</span>(RSA_x)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>p7 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(hlfleL2, <span class="fu">aes</span>(RS_sweep)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>p8 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(hlfleL2, <span class="fu">aes</span>(RSA_sweep)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>(p5 <span class="sc">+</span> p6) <span class="sc">/</span> (p7 <span class="sc">+</span> p8)</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 115 rows containing non-finite values (`stat_bin()`).</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Removed 2 rows containing missing values (`geom_bar()`).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>p9 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">filter</span>(hlplaL2, RS_x <span class="sc">&gt;</span> <span class="dv">0</span>), <span class="fu">aes</span>(RS_x)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">xlim</span>(<span class="fl">0.4</span>, <span class="fl">1.76</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>p10 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(hlplaL2, <span class="fu">aes</span>(RSA_x)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>p11 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(hlplaL2, <span class="fu">aes</span>(RS_sweep)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>p12 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(hlplaL2, <span class="fu">aes</span>(RSA_sweep)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>(p9 <span class="sc">+</span> p10) <span class="sc">/</span> (p11 <span class="sc">+</span> p12)</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 56 rows containing non-finite values (`stat_bin()`).</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Removed 2 rows containing missing values (`geom_bar()`).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>p13 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">filter</span>(hldabL2, RS_x <span class="sc">&gt;</span> <span class="dv">0</span>), <span class="fu">aes</span>(RS_x)) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">xlim</span>(<span class="fl">0.4</span>, <span class="fl">1.76</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>p14 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(hldabL2, <span class="fu">aes</span>(RSA_x)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>p15 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(hldabL2, <span class="fu">aes</span>(RS_sweep)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>p16 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(hldabL2, <span class="fu">aes</span>(RSA_sweep)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>(p13 <span class="sc">+</span> p14) <span class="sc">/</span> (p15 <span class="sc">+</span> p16)</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Warning: Removed 10 rows containing non-finite values (`stat_bin()`).</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Removed 2 rows containing missing values (`geom_bar()`).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Why do I have RSA values smaller than one? (either because sweep length is longer or gear is larger (GOV))</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if I can calculate the same RSA in sweep as that entered there.</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Ok, so the equation is correct. Which ID's have RSA &lt; 1?</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>hlcodL2 <span class="sc">|&gt;</span> </span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(RSA_x <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> RSA_x <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Year, Country, Ship, Gear, haul.id, Horizontal.opening..m., Fishing.line,</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>                Swep.one.side..after.formula...meter, SweepLngt, Size.final..m, Swept.area, RSA_x) <span class="sc">|&gt;</span> </span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(RSA_x, <span class="at">fill =</span> <span class="fu">factor</span>(SweepLngt))) <span class="sc">+</span> <span class="fu">geom_histogram</span>() <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>Gear, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if I have more than one unique RS or RSA value per haul, or if it's "either this or that"</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter positive in both columns</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>hlcodL2 <span class="sc">|&gt;</span> <span class="fu">filter</span>(RS_x <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> RS_sweep <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(RS_x, RS_sweep)) <span class="sc">+</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_abline</span>(<span class="fu">aes</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>hlcodL2 <span class="sc">|&gt;</span> <span class="fu">filter</span>(RSA_x <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> RSA_sweep <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(RSA_x, RSA_sweep)) <span class="sc">+</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_abline</span>(<span class="fu">aes</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>hlfleL2 <span class="sc">|&gt;</span> <span class="fu">filter</span>(RS_x <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> RS_sweep <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(RS_x, RS_sweep)) <span class="sc">+</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_abline</span>(<span class="fu">aes</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>hlfleL2 <span class="sc">|&gt;</span> <span class="fu">filter</span>(RSA_x <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> RSA_sweep <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(RSA_x, RSA_sweep)) <span class="sc">+</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_abline</span>(<span class="fu">aes</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Ok, there's on odd RS_x that is larger than 3. It didn't catch anything and speed is 0.8! Will remove</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>hlcodL2 <span class="ot">&lt;-</span> hlcodL2 <span class="sc">|&gt;</span> <span class="fu">filter</span>(RS_x <span class="sc">&lt;</span> <span class="dv">3</span>)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>hlfleL2 <span class="ot">&lt;-</span> hlfleL2 <span class="sc">|&gt;</span> <span class="fu">filter</span>(RS_x <span class="sc">&lt;</span> <span class="dv">3</span>)</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot again</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>hlcodL2 <span class="sc">|&gt;</span> <span class="fu">filter</span>(RS_x <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> RS_sweep <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(RS_x, RS_sweep)) <span class="sc">+</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_abline</span>(<span class="fu">aes</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>hlfleL2 <span class="sc">|&gt;</span> <span class="fu">filter</span>(RS_x <span class="sc">&gt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> RS_sweep <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(RS_x, RS_sweep)) <span class="sc">+</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_abline</span>(<span class="fu">aes</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>), <span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co"># They are largely the same when they overlap. When they differ, I will use RS_sweep</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a single RS and RSA column</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Cod </span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>hlcodL3 <span class="ot">&lt;-</span> hlcodL2 <span class="sc">|&gt;</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RS =</span> <span class="sc">-</span><span class="dv">99</span>,</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">RS =</span> <span class="fu">ifelse</span>(RS_sweep <span class="sc">&gt;</span> <span class="dv">0</span>, RS_sweep, RS),</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">RS =</span> <span class="fu">ifelse</span>(RS <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> RS_x <span class="sc">&gt;</span> <span class="dv">0</span>, RS_x, RS)) <span class="sc">|&gt;</span> <span class="co"># Note that there are no NA i RS_x. This replaces all non-RS_sweep values -0.3, so I can filter positive later</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RSA =</span> <span class="sc">-</span><span class="dv">99</span>,</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">RSA =</span> <span class="fu">ifelse</span>(RSA_sweep <span class="sc">&gt;</span> <span class="dv">0</span>, RSA_sweep, RSA),</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">RSA =</span> <span class="fu">ifelse</span>(RSA <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> RSA_x <span class="sc">&gt;</span> <span class="dv">0</span>, RSA_x, RSA)) <span class="sc">|&gt;</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(RS <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(RSA <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RSRSA =</span> RS<span class="sc">*</span>RSA)</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(hlcodL3, <span class="fu">aes</span>(RSRSA)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Flounder </span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>hlfleL2 <span class="sc">|&gt;</span> <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"LAT"</span>) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(Year) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(Year)</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 28 × 1</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     Year</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;int&gt;</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1  1993</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2  1994</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3  1995</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4  1996</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5  1997</span></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6  1998</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7  1999</span></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8  2000</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9  2001</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  2002</span></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 18 more rows</span></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>hlfleL3 <span class="ot">&lt;-</span> hlfleL2 <span class="sc">|&gt;</span></span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RS =</span> <span class="sc">-</span><span class="dv">999</span>,</span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">RS =</span> <span class="fu">ifelse</span>(RS_sweep <span class="sc">&gt;</span> <span class="dv">0</span>, RS_sweep, RS),</span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">RS =</span> <span class="fu">ifelse</span>(RS <span class="sc">&lt;</span> <span class="dv">0</span>, RS_x, RS)) <span class="sc">|&gt;</span> <span class="co"># Note that there are no NA i RS_x. This replaces all non-RS_sweep values -0.3, so I can filter positive later</span></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RSA =</span> <span class="sc">-</span><span class="dv">999</span>,</span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">RSA =</span> <span class="fu">ifelse</span>(RSA_sweep <span class="sc">&gt;</span> <span class="dv">0</span>, RSA_sweep, RSA),</span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">RSA =</span> <span class="fu">ifelse</span>(RSA <span class="sc">&lt;</span> <span class="dv">0</span>, RSA_x, RSA)) <span class="sc">|&gt;</span> </span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(RS <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(RSA <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RSRSA =</span> RS<span class="sc">*</span>RSA)</span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(hlfleL3, <span class="fu">aes</span>(RSRSA)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Test how many years of LAT data I miss out on because I can't standardize it.</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co"># hlfleL2 |&gt;</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(RS = -999,</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co">#          RS = ifelse(RS_sweep &gt; 0, RS_sweep, RS),</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="co">#          RS = ifelse(RS &lt; 0, RS_x, RS)) |&gt; # Note that there are no NA i RS_x. This replaces all non-RS_sweep values -0.3, so I can filter positive later</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(RS &gt; 0) |&gt; </span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(Country == "LAT") |&gt; </span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   distinct(Year) |&gt; </span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   arrange(Year)</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a><span class="co"># hlfleL2 |&gt;</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(RSA = -999,</span></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a><span class="co">#          RSA = ifelse(RSA_sweep &gt; 0, RSA_sweep, RSA),</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a><span class="co">#          RSA = ifelse(RSA &lt; 0, RSA_x, RSA)) |&gt; </span></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(RSA &gt; 0) |&gt; </span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(Country == "LAT") |&gt; </span></span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a><span class="co">#   distinct(Year) |&gt; </span></span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a><span class="co">#   arrange(Year)</span></span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Plaice </span></span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>hlplaL3 <span class="ot">&lt;-</span> hlplaL2 <span class="sc">|&gt;</span></span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RS =</span> <span class="sc">-</span><span class="dv">99</span>,</span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">RS =</span> <span class="fu">ifelse</span>(RS_sweep <span class="sc">&gt;</span> <span class="dv">0</span>, RS_sweep, RS),</span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">RS =</span> <span class="fu">ifelse</span>(RS <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> RS_x <span class="sc">&gt;</span> <span class="dv">0</span>, RS_x, RS)) <span class="sc">|&gt;</span> <span class="co"># Note that there are no NA i RS_x. This replaces all non-RS_sweep values -0.3, so I can filter positive later</span></span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RSA =</span> <span class="sc">-</span><span class="dv">99</span>,</span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">RSA =</span> <span class="fu">ifelse</span>(RSA_sweep <span class="sc">&gt;</span> <span class="dv">0</span>, RSA_sweep, RSA),</span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">RSA =</span> <span class="fu">ifelse</span>(RSA <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> RSA_x <span class="sc">&gt;</span> <span class="dv">0</span>, RSA_x, RSA)) <span class="sc">|&gt;</span></span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(RS <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(RSA <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RSRSA =</span> RS<span class="sc">*</span>RSA)</span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(hlplaL3, <span class="fu">aes</span>(RSRSA)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Dab </span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>hldabL3 <span class="ot">&lt;-</span> hldabL2 <span class="sc">|&gt;</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RS =</span> <span class="sc">-</span><span class="dv">99</span>,</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">RS =</span> <span class="fu">ifelse</span>(RS_sweep <span class="sc">&gt;</span> <span class="dv">0</span>, RS_sweep, RS),</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">RS =</span> <span class="fu">ifelse</span>(RS <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> RS_x <span class="sc">&gt;</span> <span class="dv">0</span>, RS_x, RS)) <span class="sc">|&gt;</span> <span class="co"># Note that there are no NA i RS_x. This replaces all non-RS_sweep values -0.3, so I can filter positive later</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RSA =</span> <span class="sc">-</span><span class="dv">99</span>,</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">RSA =</span> <span class="fu">ifelse</span>(RSA_sweep <span class="sc">&gt;</span> <span class="dv">0</span>, RSA_sweep, RSA),</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">RSA =</span> <span class="fu">ifelse</span>(RSA <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">&amp;</span> RSA_x <span class="sc">&gt;</span> <span class="dv">0</span>, RSA_x, RSA)) <span class="sc">|&gt;</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(RS <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(RSA <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RSRSA =</span> RS<span class="sc">*</span>RSA)</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(hldabL3, <span class="fu">aes</span>(RSRSA)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize!</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>hlcodL3 <span class="ot">&lt;-</span> hlcodL3 <span class="sc">|&gt;</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEst_kg =</span> CPUEun_kg<span class="sc">*</span>RS<span class="sc">*</span>RSA,</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">CPUEst =</span> CPUEun<span class="sc">*</span>RS<span class="sc">*</span>RSA)</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>hlfleL3 <span class="ot">&lt;-</span> hlfleL3 <span class="sc">|&gt;</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEst_kg =</span> CPUEun_kg<span class="sc">*</span>RS<span class="sc">*</span>RSA,</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">CPUEst =</span> CPUEun<span class="sc">*</span>RS<span class="sc">*</span>RSA)</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>hlplaL3 <span class="ot">&lt;-</span> hlplaL3 <span class="sc">|&gt;</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEst_kg =</span> CPUEun_kg<span class="sc">*</span>RS<span class="sc">*</span>RSA,</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">CPUEst =</span> CPUEun<span class="sc">*</span>RS<span class="sc">*</span>RSA)</span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>hldabL3 <span class="ot">&lt;-</span> hldabL3 <span class="sc">|&gt;</span></span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CPUEst_kg =</span> CPUEun_kg<span class="sc">*</span>RS<span class="sc">*</span>RSA,</span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">CPUEst =</span> CPUEun<span class="sc">*</span>RS<span class="sc">*</span>RSA)</span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(<span class="fu">is.na</span>(hlcodL3<span class="sc">$</span>CPUEst_kg))</span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(<span class="fu">is.na</span>(hlcodL3<span class="sc">$</span>CPUEst))</span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(hlcodL3<span class="sc">$</span>CPUEst_kg)</span>
<span id="cb54-26"><a href="#cb54-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb54-27"><a href="#cb54-27" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(hlcodL3<span class="sc">$</span>CPUEst)</span>
<span id="cb54-28"><a href="#cb54-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb54-29"><a href="#cb54-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-30"><a href="#cb54-30" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(<span class="fu">is.na</span>(hlfleL3<span class="sc">$</span>CPUEst_kg)) <span class="co"># Remove the few NA's here</span></span>
<span id="cb54-31"><a href="#cb54-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb54-32"><a href="#cb54-32" aria-hidden="true" tabindex="-1"></a>hlfleL3 <span class="ot">&lt;-</span> hlfleL3 <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(CPUEst_kg)</span>
<span id="cb54-33"><a href="#cb54-33" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(<span class="fu">is.na</span>(hlfleL3<span class="sc">$</span>CPUEst))</span>
<span id="cb54-34"><a href="#cb54-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb54-35"><a href="#cb54-35" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(hlfleL3<span class="sc">$</span>CPUEst_kg) </span>
<span id="cb54-36"><a href="#cb54-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb54-37"><a href="#cb54-37" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(hlfleL3<span class="sc">$</span>CPUEst)</span>
<span id="cb54-38"><a href="#cb54-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb54-39"><a href="#cb54-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-40"><a href="#cb54-40" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(<span class="fu">is.na</span>(hlplaL3<span class="sc">$</span>CPUEst_kg))</span>
<span id="cb54-41"><a href="#cb54-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb54-42"><a href="#cb54-42" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(<span class="fu">is.na</span>(hlplaL3<span class="sc">$</span>CPUEst))</span>
<span id="cb54-43"><a href="#cb54-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb54-44"><a href="#cb54-44" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(hlplaL3<span class="sc">$</span>CPUEst_kg)</span>
<span id="cb54-45"><a href="#cb54-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb54-46"><a href="#cb54-46" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(hlplaL3<span class="sc">$</span>CPUEst)</span>
<span id="cb54-47"><a href="#cb54-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb54-48"><a href="#cb54-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-49"><a href="#cb54-49" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(<span class="fu">is.na</span>(hldabL3<span class="sc">$</span>CPUEst_kg))</span>
<span id="cb54-50"><a href="#cb54-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb54-51"><a href="#cb54-51" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(<span class="fu">is.na</span>(hldabL3<span class="sc">$</span>CPUEst))</span>
<span id="cb54-52"><a href="#cb54-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb54-53"><a href="#cb54-53" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(hldabL3<span class="sc">$</span>CPUEst_kg)</span>
<span id="cb54-54"><a href="#cb54-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb54-55"><a href="#cb54-55" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(hldabL3<span class="sc">$</span>CPUEst)</span>
<span id="cb54-56"><a href="#cb54-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb54-57"><a href="#cb54-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-58"><a href="#cb54-58" aria-hidden="true" tabindex="-1"></a><span class="co"># Now calculate CPUE PER LENGTH CLASS, then create the new unit, i.e.: convert from kg of fish caught by trawling for 1 h a standard bottom swept area of 0.45km2 (using a TVL trawl with 75 m sweeps at the standard speed of three knots) to... kg of fish per km^2 by dividing with 0.45</span></span>
<span id="cb54-59"><a href="#cb54-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-60"><a href="#cb54-60" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(hlcodL3) <span class="sc">+</span></span>
<span id="cb54-61"><a href="#cb54-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(length_cm2, <span class="at">fill =</span> <span class="st">"length_cm1"</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>)  </span>
<span id="cb54-62"><a href="#cb54-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-63"><a href="#cb54-63" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(hlcodL3) <span class="sc">+</span></span>
<span id="cb54-64"><a href="#cb54-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(length_cm2, <span class="at">fill =</span> <span class="st">"length_cm2"</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) </span>
<span id="cb54-65"><a href="#cb54-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-66"><a href="#cb54-66" aria-hidden="true" tabindex="-1"></a>p1<span class="sc">/</span>p2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-15-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Cod</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>hlcodhaul <span class="ot">&lt;-</span> hlcodL3 <span class="sc">|&gt;</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cpue_kg =</span> CPUEst_kg,</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpue =</span> CPUEst,</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpue_kg_un =</span> CPUEun_kg,</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpue_un =</span> CPUEun,</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">density =</span> cpue_kg<span class="sc">/</span><span class="fl">0.45</span>,</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">density_ab =</span> cpue<span class="sc">/</span><span class="fl">0.45</span>)</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Flounder</span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>hlflehaul <span class="ot">&lt;-</span> hlfleL3 <span class="sc">|&gt;</span></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cpue_kg =</span> CPUEst_kg,</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpue =</span> CPUEst,</span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpue_kg_un =</span> CPUEun_kg,</span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpue_un =</span> CPUEun,</span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">density =</span> cpue_kg<span class="sc">/</span><span class="fl">0.45</span>,</span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">density_ab =</span> cpue<span class="sc">/</span><span class="fl">0.45</span>)</span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Plaice</span></span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a>hlplahaul <span class="ot">&lt;-</span> hlplaL3 <span class="sc">|&gt;</span></span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cpue_kg =</span> CPUEst_kg,</span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpue =</span> CPUEst,</span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpue_kg_un =</span> CPUEun_kg,</span>
<span id="cb55-26"><a href="#cb55-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpue_un =</span> CPUEun,</span>
<span id="cb55-27"><a href="#cb55-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">density =</span> cpue_kg<span class="sc">/</span><span class="fl">0.45</span>,</span>
<span id="cb55-28"><a href="#cb55-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">density_ab =</span> cpue<span class="sc">/</span><span class="fl">0.45</span>)</span>
<span id="cb55-29"><a href="#cb55-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-30"><a href="#cb55-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Dab</span></span>
<span id="cb55-31"><a href="#cb55-31" aria-hidden="true" tabindex="-1"></a>hldabhaul <span class="ot">&lt;-</span> hldabL3 <span class="sc">|&gt;</span></span>
<span id="cb55-32"><a href="#cb55-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cpue_kg =</span> CPUEst_kg,</span>
<span id="cb55-33"><a href="#cb55-33" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpue =</span> CPUEst,</span>
<span id="cb55-34"><a href="#cb55-34" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpue_kg_un =</span> CPUEun_kg,</span>
<span id="cb55-35"><a href="#cb55-35" aria-hidden="true" tabindex="-1"></a>         <span class="at">cpue_un =</span> CPUEun,</span>
<span id="cb55-36"><a href="#cb55-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">density =</span> cpue_kg<span class="sc">/</span><span class="fl">0.45</span>,</span>
<span id="cb55-37"><a href="#cb55-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">density_ab =</span> cpue<span class="sc">/</span><span class="fl">0.45</span>)</span>
<span id="cb55-38"><a href="#cb55-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-39"><a href="#cb55-39" aria-hidden="true" tabindex="-1"></a><span class="co"># First, figure out why I have length = 0 and density = 0 when I have other lengths in the haul</span></span>
<span id="cb55-40"><a href="#cb55-40" aria-hidden="true" tabindex="-1"></a>hlcodhaul <span class="sc">|&gt;</span> <span class="fu">filter</span>(haul.id <span class="sc">==</span> <span class="st">"1993:1:GFR:SOL:H20:23:31"</span>) <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>()</span>
<span id="cb55-41"><a href="#cb55-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   RecordType Survey Quarter Country Ship Gear SweepLngt GearEx DoorType StNo</span></span>
<span id="cb55-42"><a href="#cb55-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   23</span></span>
<span id="cb55-43"><a href="#cb55-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   23</span></span>
<span id="cb55-44"><a href="#cb55-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   23</span></span>
<span id="cb55-45"><a href="#cb55-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         HH   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   23</span></span>
<span id="cb55-46"><a href="#cb55-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   HaulNo Year SpecCodeType SpecCode   SpecVal  Sex TotalNo CatIdentifier NoMeas</span></span>
<span id="cb55-47"><a href="#cb55-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     31 1993            W   126436         1 &lt;NA&gt;       6             1      3</span></span>
<span id="cb55-48"><a href="#cb55-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     31 1993            W   126436         1 &lt;NA&gt;       6             1      3</span></span>
<span id="cb55-49"><a href="#cb55-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     31 1993            W   126436         1 &lt;NA&gt;       6             1      3</span></span>
<span id="cb55-50"><a href="#cb55-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4     31 1993         &lt;NA&gt;       NA zeroCatch &lt;NA&gt;      NA            NA     NA</span></span>
<span id="cb55-51"><a href="#cb55-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   SubFactor SubWgt CatCatchWgt LngtCode LngtClass HLNoAtLngt DevStage</span></span>
<span id="cb55-52"><a href="#cb55-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         1     NA          25        1         6          2     &lt;NA&gt;</span></span>
<span id="cb55-53"><a href="#cb55-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         1     NA          25        1        35          2     &lt;NA&gt;</span></span>
<span id="cb55-54"><a href="#cb55-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         1     NA          25        1        39          2     &lt;NA&gt;</span></span>
<span id="cb55-55"><a href="#cb55-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4        NA     NA          NA     &lt;NA&gt;        NA         NA     &lt;NA&gt;</span></span>
<span id="cb55-56"><a href="#cb55-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   LenMeasType DateofCalculation Valid_Aphia Ship2 Ship3</span></span>
<span id="cb55-57"><a href="#cb55-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-58"><a href="#cb55-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-59"><a href="#cb55-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-60"><a href="#cb55-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          NA          20220301          NA   SOL   SOL</span></span>
<span id="cb55-61"><a href="#cb55-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                         IDx sub_div Rect HaulVal StdSpecRecCode BySpecRecCode</span></span>
<span id="cb55-62"><a href="#cb55-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 1993.1.GFR.06S1.H20.23.31      24 38G4       V              1             1</span></span>
<span id="cb55-63"><a href="#cb55-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 1993.1.GFR.06S1.H20.23.31      24 38G4       V              1             1</span></span>
<span id="cb55-64"><a href="#cb55-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 1993.1.GFR.06S1.H20.23.31      24 38G4       V              1             1</span></span>
<span id="cb55-65"><a href="#cb55-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 1993.1.GFR.06S1.H20.23.31      24 38G4       V              1             1</span></span>
<span id="cb55-66"><a href="#cb55-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Fishing.line Month DataType HaulDur GroundSpeed                  haul.id</span></span>
<span id="cb55-67"><a href="#cb55-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           36     2        C      30           4 1993:1:GFR:SOL:H20:23:31</span></span>
<span id="cb55-68"><a href="#cb55-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           36     2        C      30           4 1993:1:GFR:SOL:H20:23:31</span></span>
<span id="cb55-69"><a href="#cb55-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           36     2        C      30           4 1993:1:GFR:SOL:H20:23:31</span></span>
<span id="cb55-70"><a href="#cb55-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           36     2        C      30           4 1993:1:GFR:SOL:H20:23:31</span></span>
<span id="cb55-71"><a href="#cb55-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ShootLat ShootLong      id_haul_stomach      Species CPUEun           a</span></span>
<span id="cb55-72"><a href="#cb55-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  54.5167     14.15 1993.1.2.GFR.38G4.31 Gadus morhua      2 0.007244481</span></span>
<span id="cb55-73"><a href="#cb55-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  54.5167     14.15 1993.1.2.GFR.38G4.31 Gadus morhua      2 0.007244481</span></span>
<span id="cb55-74"><a href="#cb55-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  54.5167     14.15 1993.1.2.GFR.38G4.31 Gadus morhua      2 0.007244481</span></span>
<span id="cb55-75"><a href="#cb55-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  54.5167     14.15                 &lt;NA&gt; Gadus morhua      0 0.007244481</span></span>
<span id="cb55-76"><a href="#cb55-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        b length_cm length_cm2   weight_kg   CPUEun_kg RSA_sweep RS_sweep RS_x</span></span>
<span id="cb55-77"><a href="#cb55-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 3.1008         6          6 0.001874558 0.003749116      1.47     0.75 0.75</span></span>
<span id="cb55-78"><a href="#cb55-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 3.1008        35         35 0.444481726 0.888963452      1.47     0.75 0.75</span></span>
<span id="cb55-79"><a href="#cb55-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 3.1008        39         39 0.621699998 1.243399996      1.47     0.75 0.75</span></span>
<span id="cb55-80"><a href="#cb55-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 3.1008        NA          0 0.000000000 0.000000000      1.47     0.75 0.75</span></span>
<span id="cb55-81"><a href="#cb55-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Horizontal.opening..m. Swep.one.side..after.formula...meter Size.final..m</span></span>
<span id="cb55-82"><a href="#cb55-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1                  24.12                                   NA            NA</span></span>
<span id="cb55-83"><a href="#cb55-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2                  24.12                                   NA            NA</span></span>
<span id="cb55-84"><a href="#cb55-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3                  24.12                                   NA            NA</span></span>
<span id="cb55-85"><a href="#cb55-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4                  24.12                                   NA            NA</span></span>
<span id="cb55-86"><a href="#cb55-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Swept.area      RSA_x   RS  RSA  RSRSA CPUEst_kg CPUEst   cpue_kg  cpue</span></span>
<span id="cb55-87"><a href="#cb55-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1         NA -0.3333333 0.75 1.47 1.1025 0.0041334  2.205 0.0041334 2.205</span></span>
<span id="cb55-88"><a href="#cb55-88" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2         NA -0.3333333 0.75 1.47 1.1025 0.9800822  2.205 0.9800822 2.205</span></span>
<span id="cb55-89"><a href="#cb55-89" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3         NA -0.3333333 0.75 1.47 1.1025 1.3708485  2.205 1.3708485 2.205</span></span>
<span id="cb55-90"><a href="#cb55-90" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4         NA -0.3333333 0.75 1.47 1.1025 0.0000000  0.000 0.0000000 0.000</span></span>
<span id="cb55-91"><a href="#cb55-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    cpue_kg_un cpue_un     density density_ab</span></span>
<span id="cb55-92"><a href="#cb55-92" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 0.003749116       2 0.009185334        4.9</span></span>
<span id="cb55-93"><a href="#cb55-93" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 0.888963452       2 2.177960458        4.9</span></span>
<span id="cb55-94"><a href="#cb55-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 1.243399996       2 3.046329990        4.9</span></span>
<span id="cb55-95"><a href="#cb55-95" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 0.000000000       0 0.000000000        0.0</span></span>
<span id="cb55-96"><a href="#cb55-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-97"><a href="#cb55-97" aria-hidden="true" tabindex="-1"></a>hlcodhaul <span class="sc">|&gt;</span></span>
<span id="cb55-98"><a href="#cb55-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id) <span class="sc">|&gt;</span> </span>
<span id="cb55-99"><a href="#cb55-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">no_catches =</span> <span class="fu">length</span>(<span class="fu">unique</span>(CPUEun))) <span class="sc">|&gt;</span> </span>
<span id="cb55-100"><a href="#cb55-100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">any</span>(CPUEun <span class="sc">==</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb55-101"><a href="#cb55-101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(no_catches <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb55-102"><a href="#cb55-102" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> </span>
<span id="cb55-103"><a href="#cb55-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>)</span>
<span id="cb55-104"><a href="#cb55-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    RecordType Survey Quarter Country Ship Gear SweepLngt GearEx DoorType StNo</span></span>
<span id="cb55-105"><a href="#cb55-105" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-106"><a href="#cb55-106" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-107"><a href="#cb55-107" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-108"><a href="#cb55-108" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-109"><a href="#cb55-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-110"><a href="#cb55-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-111"><a href="#cb55-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7          HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-112"><a href="#cb55-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8          HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-113"><a href="#cb55-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9          HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-114"><a href="#cb55-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-115"><a href="#cb55-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-116"><a href="#cb55-116" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-117"><a href="#cb55-117" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-118"><a href="#cb55-118" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-119"><a href="#cb55-119" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-120"><a href="#cb55-120" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-121"><a href="#cb55-121" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-122"><a href="#cb55-122" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-123"><a href="#cb55-123" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-124"><a href="#cb55-124" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20         HL   BITS       1     GFR 06S1  H20        NA   &lt;NA&gt;       NA   21</span></span>
<span id="cb55-125"><a href="#cb55-125" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    HaulNo Year SpecCodeType SpecCode SpecVal  Sex TotalNo CatIdentifier NoMeas</span></span>
<span id="cb55-126"><a href="#cb55-126" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1       1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-127"><a href="#cb55-127" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2       1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-128"><a href="#cb55-128" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3       1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-129"><a href="#cb55-129" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4       1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-130"><a href="#cb55-130" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5       1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-131"><a href="#cb55-131" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6       1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-132"><a href="#cb55-132" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7       1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-133"><a href="#cb55-133" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8       1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-134"><a href="#cb55-134" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9       1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-135"><a href="#cb55-135" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10      1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-136"><a href="#cb55-136" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11      1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-137"><a href="#cb55-137" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12      1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-138"><a href="#cb55-138" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13      1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-139"><a href="#cb55-139" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14      1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-140"><a href="#cb55-140" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15      1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-141"><a href="#cb55-141" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16      1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-142"><a href="#cb55-142" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17      1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-143"><a href="#cb55-143" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18      1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-144"><a href="#cb55-144" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19      1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-145"><a href="#cb55-145" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20      1 1993            W   126436       1 &lt;NA&gt;     110             1     55</span></span>
<span id="cb55-146"><a href="#cb55-146" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    SubFactor SubWgt CatCatchWgt LngtCode LngtClass HLNoAtLngt DevStage</span></span>
<span id="cb55-147"><a href="#cb55-147" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          1     NA         680        1        14          4     &lt;NA&gt;</span></span>
<span id="cb55-148"><a href="#cb55-148" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2          1     NA         680        1        16          4     &lt;NA&gt;</span></span>
<span id="cb55-149"><a href="#cb55-149" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3          1     NA         680        1        18          4     &lt;NA&gt;</span></span>
<span id="cb55-150"><a href="#cb55-150" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4          1     NA         680        1        27          8     &lt;NA&gt;</span></span>
<span id="cb55-151"><a href="#cb55-151" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5          1     NA         680        1        28          8     &lt;NA&gt;</span></span>
<span id="cb55-152"><a href="#cb55-152" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6          1     NA         680        1        29          8     &lt;NA&gt;</span></span>
<span id="cb55-153"><a href="#cb55-153" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7          1     NA         680        1        58          2     &lt;NA&gt;</span></span>
<span id="cb55-154"><a href="#cb55-154" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8          1     NA         680        1        59          2     &lt;NA&gt;</span></span>
<span id="cb55-155"><a href="#cb55-155" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9          1     NA         680        1        60          2     &lt;NA&gt;</span></span>
<span id="cb55-156"><a href="#cb55-156" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10         1     NA         680        1        65          2     &lt;NA&gt;</span></span>
<span id="cb55-157"><a href="#cb55-157" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11         1     NA         680        1        37          2     &lt;NA&gt;</span></span>
<span id="cb55-158"><a href="#cb55-158" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12         1     NA         680        1        44          4     &lt;NA&gt;</span></span>
<span id="cb55-159"><a href="#cb55-159" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13         1     NA         680        1        48          2     &lt;NA&gt;</span></span>
<span id="cb55-160"><a href="#cb55-160" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14         1     NA         680        1        49          2     &lt;NA&gt;</span></span>
<span id="cb55-161"><a href="#cb55-161" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15         1     NA         680        1        50          4     &lt;NA&gt;</span></span>
<span id="cb55-162"><a href="#cb55-162" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16         1     NA         680        1        53          2     &lt;NA&gt;</span></span>
<span id="cb55-163"><a href="#cb55-163" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17         1     NA         680        1        30          8     &lt;NA&gt;</span></span>
<span id="cb55-164"><a href="#cb55-164" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18         1     NA         680        1        31         10     &lt;NA&gt;</span></span>
<span id="cb55-165"><a href="#cb55-165" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19         1     NA         680        1        32          8     &lt;NA&gt;</span></span>
<span id="cb55-166"><a href="#cb55-166" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20         1     NA         680        1        33         14     &lt;NA&gt;</span></span>
<span id="cb55-167"><a href="#cb55-167" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    LenMeasType DateofCalculation Valid_Aphia Ship2 Ship3</span></span>
<span id="cb55-168"><a href="#cb55-168" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1           NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-169"><a href="#cb55-169" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2           NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-170"><a href="#cb55-170" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3           NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-171"><a href="#cb55-171" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4           NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-172"><a href="#cb55-172" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5           NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-173"><a href="#cb55-173" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6           NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-174"><a href="#cb55-174" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7           NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-175"><a href="#cb55-175" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8           NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-176"><a href="#cb55-176" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9           NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-177"><a href="#cb55-177" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10          NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-178"><a href="#cb55-178" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11          NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-179"><a href="#cb55-179" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12          NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-180"><a href="#cb55-180" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13          NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-181"><a href="#cb55-181" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14          NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-182"><a href="#cb55-182" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15          NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-183"><a href="#cb55-183" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16          NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-184"><a href="#cb55-184" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17          NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-185"><a href="#cb55-185" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18          NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-186"><a href="#cb55-186" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19          NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-187"><a href="#cb55-187" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20          NA          20211203      126436   SOL   SOL</span></span>
<span id="cb55-188"><a href="#cb55-188" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                         IDx sub_div Rect HaulVal StdSpecRecCode BySpecRecCode</span></span>
<span id="cb55-189"><a href="#cb55-189" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-190"><a href="#cb55-190" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-191"><a href="#cb55-191" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-192"><a href="#cb55-192" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-193"><a href="#cb55-193" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-194"><a href="#cb55-194" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-195"><a href="#cb55-195" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-196"><a href="#cb55-196" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-197"><a href="#cb55-197" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-198"><a href="#cb55-198" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-199"><a href="#cb55-199" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-200"><a href="#cb55-200" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12 1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-201"><a href="#cb55-201" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13 1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-202"><a href="#cb55-202" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14 1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-203"><a href="#cb55-203" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15 1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-204"><a href="#cb55-204" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16 1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-205"><a href="#cb55-205" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17 1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-206"><a href="#cb55-206" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18 1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-207"><a href="#cb55-207" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19 1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-208"><a href="#cb55-208" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20 1993.1.GFR.06S1.H20.21.1      24 38G3       V              1             1</span></span>
<span id="cb55-209"><a href="#cb55-209" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Fishing.line Month DataType HaulDur GroundSpeed                 haul.id</span></span>
<span id="cb55-210"><a href="#cb55-210" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1            36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-211"><a href="#cb55-211" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2            36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-212"><a href="#cb55-212" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3            36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-213"><a href="#cb55-213" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4            36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-214"><a href="#cb55-214" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5            36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-215"><a href="#cb55-215" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6            36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-216"><a href="#cb55-216" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7            36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-217"><a href="#cb55-217" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8            36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-218"><a href="#cb55-218" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9            36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-219"><a href="#cb55-219" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10           36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-220"><a href="#cb55-220" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11           36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-221"><a href="#cb55-221" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12           36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-222"><a href="#cb55-222" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13           36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-223"><a href="#cb55-223" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14           36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-224"><a href="#cb55-224" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15           36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-225"><a href="#cb55-225" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16           36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-226"><a href="#cb55-226" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17           36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-227"><a href="#cb55-227" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18           36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-228"><a href="#cb55-228" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19           36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-229"><a href="#cb55-229" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20           36     2        C      30         3.8 1993:1:GFR:SOL:H20:21:1</span></span>
<span id="cb55-230"><a href="#cb55-230" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    ShootLat ShootLong     id_haul_stomach      Species CPUEun           a</span></span>
<span id="cb55-231"><a href="#cb55-231" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1   54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      4 0.007244481</span></span>
<span id="cb55-232"><a href="#cb55-232" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2   54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      4 0.007244481</span></span>
<span id="cb55-233"><a href="#cb55-233" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3   54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      4 0.007244481</span></span>
<span id="cb55-234"><a href="#cb55-234" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4   54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      8 0.007244481</span></span>
<span id="cb55-235"><a href="#cb55-235" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5   54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      8 0.007244481</span></span>
<span id="cb55-236"><a href="#cb55-236" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6   54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      8 0.007244481</span></span>
<span id="cb55-237"><a href="#cb55-237" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7   54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      2 0.007244481</span></span>
<span id="cb55-238"><a href="#cb55-238" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8   54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      2 0.007244481</span></span>
<span id="cb55-239"><a href="#cb55-239" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9   54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      2 0.007244481</span></span>
<span id="cb55-240"><a href="#cb55-240" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10  54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      2 0.007244481</span></span>
<span id="cb55-241"><a href="#cb55-241" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11  54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      2 0.007244481</span></span>
<span id="cb55-242"><a href="#cb55-242" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12  54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      4 0.007244481</span></span>
<span id="cb55-243"><a href="#cb55-243" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13  54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      2 0.007244481</span></span>
<span id="cb55-244"><a href="#cb55-244" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14  54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      2 0.007244481</span></span>
<span id="cb55-245"><a href="#cb55-245" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15  54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      4 0.007244481</span></span>
<span id="cb55-246"><a href="#cb55-246" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16  54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      2 0.007244481</span></span>
<span id="cb55-247"><a href="#cb55-247" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17  54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      8 0.007244481</span></span>
<span id="cb55-248"><a href="#cb55-248" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18  54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua     10 0.007244481</span></span>
<span id="cb55-249"><a href="#cb55-249" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19  54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua      8 0.007244481</span></span>
<span id="cb55-250"><a href="#cb55-250" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20  54.6833        13 1993.1.2.GFR.38G3.1 Gadus morhua     14 0.007244481</span></span>
<span id="cb55-251"><a href="#cb55-251" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         b length_cm length_cm2  weight_kg CPUEun_kg RSA_sweep RS_sweep</span></span>
<span id="cb55-252"><a href="#cb55-252" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  3.1008        14         14 0.02593710 0.1037484      1.47     0.79</span></span>
<span id="cb55-253"><a href="#cb55-253" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  3.1008        16         16 0.03924125 0.1569650      1.47     0.79</span></span>
<span id="cb55-254"><a href="#cb55-254" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  3.1008        18         18 0.05654011 0.2261604      1.47     0.79</span></span>
<span id="cb55-255"><a href="#cb55-255" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  3.1008        27         27 0.19878355 1.5902684      1.47     0.79</span></span>
<span id="cb55-256"><a href="#cb55-256" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  3.1008        28         28 0.22251296 1.7801037      1.47     0.79</span></span>
<span id="cb55-257"><a href="#cb55-257" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  3.1008        29         29 0.24809123 1.9847298      1.47     0.79</span></span>
<span id="cb55-258"><a href="#cb55-258" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  3.1008        58         58 2.12836106 4.2567221      1.47     0.79</span></span>
<span id="cb55-259"><a href="#cb55-259" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  3.1008        59         59 2.24422142 4.4884428      1.47     0.79</span></span>
<span id="cb55-260"><a href="#cb55-260" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  3.1008        60         60 2.36428150 4.7285630      1.47     0.79</span></span>
<span id="cb55-261"><a href="#cb55-261" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 3.1008        65         65 3.03032727 6.0606545      1.47     0.79</span></span>
<span id="cb55-262"><a href="#cb55-262" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 3.1008        37         37 0.52806530 1.0561306      1.47     0.79</span></span>
<span id="cb55-263"><a href="#cb55-263" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12 3.1008        44         44 0.90370317 3.6148127      1.47     0.79</span></span>
<span id="cb55-264"><a href="#cb55-264" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13 3.1008        48         48 1.18358809 2.3671762      1.47     0.79</span></span>
<span id="cb55-265"><a href="#cb55-265" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14 3.1008        49         49 1.26173388 2.5234678      1.47     0.79</span></span>
<span id="cb55-266"><a href="#cb55-266" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15 3.1008        50         50 1.34330290 5.3732116      1.47     0.79</span></span>
<span id="cb55-267"><a href="#cb55-267" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16 3.1008        53         53 1.60931992 3.2186398      1.47     0.79</span></span>
<span id="cb55-268"><a href="#cb55-268" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17 3.1008        30         30 0.27559116 2.2047293      1.47     0.79</span></span>
<span id="cb55-269"><a href="#cb55-269" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18 3.1008        31         31 0.30508583 3.0508583      1.47     0.79</span></span>
<span id="cb55-270"><a href="#cb55-270" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19 3.1008        32         32 0.33664856 2.6931885      1.47     0.79</span></span>
<span id="cb55-271"><a href="#cb55-271" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20 3.1008        33         33 0.37035289 5.1849404      1.47     0.79</span></span>
<span id="cb55-272"><a href="#cb55-272" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         RS_x Horizontal.opening..m. Swep.one.side..after.formula...meter</span></span>
<span id="cb55-273"><a href="#cb55-273" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  0.7894737                  24.12                                   NA</span></span>
<span id="cb55-274"><a href="#cb55-274" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  0.7894737                  24.12                                   NA</span></span>
<span id="cb55-275"><a href="#cb55-275" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  0.7894737                  24.12                                   NA</span></span>
<span id="cb55-276"><a href="#cb55-276" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  0.7894737                  24.12                                   NA</span></span>
<span id="cb55-277"><a href="#cb55-277" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  0.7894737                  24.12                                   NA</span></span>
<span id="cb55-278"><a href="#cb55-278" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  0.7894737                  24.12                                   NA</span></span>
<span id="cb55-279"><a href="#cb55-279" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  0.7894737                  24.12                                   NA</span></span>
<span id="cb55-280"><a href="#cb55-280" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  0.7894737                  24.12                                   NA</span></span>
<span id="cb55-281"><a href="#cb55-281" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  0.7894737                  24.12                                   NA</span></span>
<span id="cb55-282"><a href="#cb55-282" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 0.7894737                  24.12                                   NA</span></span>
<span id="cb55-283"><a href="#cb55-283" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 0.7894737                  24.12                                   NA</span></span>
<span id="cb55-284"><a href="#cb55-284" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12 0.7894737                  24.12                                   NA</span></span>
<span id="cb55-285"><a href="#cb55-285" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13 0.7894737                  24.12                                   NA</span></span>
<span id="cb55-286"><a href="#cb55-286" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14 0.7894737                  24.12                                   NA</span></span>
<span id="cb55-287"><a href="#cb55-287" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15 0.7894737                  24.12                                   NA</span></span>
<span id="cb55-288"><a href="#cb55-288" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16 0.7894737                  24.12                                   NA</span></span>
<span id="cb55-289"><a href="#cb55-289" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17 0.7894737                  24.12                                   NA</span></span>
<span id="cb55-290"><a href="#cb55-290" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18 0.7894737                  24.12                                   NA</span></span>
<span id="cb55-291"><a href="#cb55-291" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19 0.7894737                  24.12                                   NA</span></span>
<span id="cb55-292"><a href="#cb55-292" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20 0.7894737                  24.12                                   NA</span></span>
<span id="cb55-293"><a href="#cb55-293" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Size.final..m Swept.area      RSA_x   RS  RSA  RSRSA CPUEst_kg  CPUEst</span></span>
<span id="cb55-294"><a href="#cb55-294" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1             NA         NA -0.3333333 0.79 1.47 1.1613 0.1204830  4.6452</span></span>
<span id="cb55-295"><a href="#cb55-295" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2             NA         NA -0.3333333 0.79 1.47 1.1613 0.1822835  4.6452</span></span>
<span id="cb55-296"><a href="#cb55-296" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3             NA         NA -0.3333333 0.79 1.47 1.1613 0.2626401  4.6452</span></span>
<span id="cb55-297"><a href="#cb55-297" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4             NA         NA -0.3333333 0.79 1.47 1.1613 1.8467787  9.2904</span></span>
<span id="cb55-298"><a href="#cb55-298" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5             NA         NA -0.3333333 0.79 1.47 1.1613 2.0672344  9.2904</span></span>
<span id="cb55-299"><a href="#cb55-299" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6             NA         NA -0.3333333 0.79 1.47 1.1613 2.3048667  9.2904</span></span>
<span id="cb55-300"><a href="#cb55-300" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7             NA         NA -0.3333333 0.79 1.47 1.1613 4.9433314  2.3226</span></span>
<span id="cb55-301"><a href="#cb55-301" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8             NA         NA -0.3333333 0.79 1.47 1.1613 5.2124287  2.3226</span></span>
<span id="cb55-302"><a href="#cb55-302" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9             NA         NA -0.3333333 0.79 1.47 1.1613 5.4912802  2.3226</span></span>
<span id="cb55-303"><a href="#cb55-303" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10            NA         NA -0.3333333 0.79 1.47 1.1613 7.0382381  2.3226</span></span>
<span id="cb55-304"><a href="#cb55-304" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11            NA         NA -0.3333333 0.79 1.47 1.1613 1.2264845  2.3226</span></span>
<span id="cb55-305"><a href="#cb55-305" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12            NA         NA -0.3333333 0.79 1.47 1.1613 4.1978820  4.6452</span></span>
<span id="cb55-306"><a href="#cb55-306" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13            NA         NA -0.3333333 0.79 1.47 1.1613 2.7490017  2.3226</span></span>
<span id="cb55-307"><a href="#cb55-307" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14            NA         NA -0.3333333 0.79 1.47 1.1613 2.9305031  2.3226</span></span>
<span id="cb55-308"><a href="#cb55-308" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15            NA         NA -0.3333333 0.79 1.47 1.1613 6.2399106  4.6452</span></span>
<span id="cb55-309"><a href="#cb55-309" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16            NA         NA -0.3333333 0.79 1.47 1.1613 3.7378065  2.3226</span></span>
<span id="cb55-310"><a href="#cb55-310" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17            NA         NA -0.3333333 0.79 1.47 1.1613 2.5603521  9.2904</span></span>
<span id="cb55-311"><a href="#cb55-311" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18            NA         NA -0.3333333 0.79 1.47 1.1613 3.5429618 11.6130</span></span>
<span id="cb55-312"><a href="#cb55-312" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19            NA         NA -0.3333333 0.79 1.47 1.1613 3.1275998  9.2904</span></span>
<span id="cb55-313"><a href="#cb55-313" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20            NA         NA -0.3333333 0.79 1.47 1.1613 6.0212713 16.2582</span></span>
<span id="cb55-314"><a href="#cb55-314" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      cpue_kg    cpue cpue_kg_un cpue_un    density density_ab no_catches</span></span>
<span id="cb55-315"><a href="#cb55-315" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1  0.1204830  4.6452  0.1037484       4  0.2677400  10.322667          7</span></span>
<span id="cb55-316"><a href="#cb55-316" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2  0.1822835  4.6452  0.1569650       4  0.4050744  10.322667          7</span></span>
<span id="cb55-317"><a href="#cb55-317" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3  0.2626401  4.6452  0.2261604       4  0.5836447  10.322667          7</span></span>
<span id="cb55-318"><a href="#cb55-318" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4  1.8467787  9.2904  1.5902684       8  4.1039527  20.645333          7</span></span>
<span id="cb55-319"><a href="#cb55-319" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5  2.0672344  9.2904  1.7801037       8  4.5938543  20.645333          7</span></span>
<span id="cb55-320"><a href="#cb55-320" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6  2.3048667  9.2904  1.9847298       8  5.1219261  20.645333          7</span></span>
<span id="cb55-321"><a href="#cb55-321" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 7  4.9433314  2.3226  4.2567221       2 10.9851809   5.161333          7</span></span>
<span id="cb55-322"><a href="#cb55-322" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 8  5.2124287  2.3226  4.4884428       2 11.5831748   5.161333          7</span></span>
<span id="cb55-323"><a href="#cb55-323" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 9  5.4912802  2.3226  4.7285630       2 12.2028449   5.161333          7</span></span>
<span id="cb55-324"><a href="#cb55-324" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 7.0382381  2.3226  6.0606545       2 15.6405291   5.161333          7</span></span>
<span id="cb55-325"><a href="#cb55-325" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 1.2264845  2.3226  1.0561306       2  2.7255210   5.161333          7</span></span>
<span id="cb55-326"><a href="#cb55-326" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12 4.1978820  4.6452  3.6148127       4  9.3286266  10.322667          7</span></span>
<span id="cb55-327"><a href="#cb55-327" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13 2.7490017  2.3226  2.3671762       2  6.1088927   5.161333          7</span></span>
<span id="cb55-328"><a href="#cb55-328" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14 2.9305031  2.3226  2.5234678       2  6.5122292   5.161333          7</span></span>
<span id="cb55-329"><a href="#cb55-329" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15 6.2399106  4.6452  5.3732116       4 13.8664681  10.322667          7</span></span>
<span id="cb55-330"><a href="#cb55-330" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16 3.7378065  2.3226  3.2186398       2  8.3062366   5.161333          7</span></span>
<span id="cb55-331"><a href="#cb55-331" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17 2.5603521  9.2904  2.2047293       8  5.6896714  20.645333          7</span></span>
<span id="cb55-332"><a href="#cb55-332" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18 3.5429618 11.6130  3.0508583      10  7.8732484  25.806667          7</span></span>
<span id="cb55-333"><a href="#cb55-333" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 19 3.1275998  9.2904  2.6931885       8  6.9502217  20.645333          7</span></span>
<span id="cb55-334"><a href="#cb55-334" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 20 6.0212713 16.2582  5.1849404      14 13.3806030  36.129333          7</span></span>
<span id="cb55-335"><a href="#cb55-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-336"><a href="#cb55-336" aria-hidden="true" tabindex="-1"></a>hlcodhaul <span class="sc">|&gt;</span> </span>
<span id="cb55-337"><a href="#cb55-337" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id) <span class="sc">|&gt;</span> </span>
<span id="cb55-338"><a href="#cb55-338" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(CPUEun <span class="sc">==</span> <span class="fu">min</span>(CPUEun)) <span class="sc">|&gt;</span> </span>
<span id="cb55-339"><a href="#cb55-339" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb55-340"><a href="#cb55-340" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(CPUEun)</span>
<span id="cb55-341"><a href="#cb55-341" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 1</span></span>
<span id="cb55-342"><a href="#cb55-342" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   CPUEun</span></span>
<span id="cb55-343"><a href="#cb55-343" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt;</span></span>
<span id="cb55-344"><a href="#cb55-344" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1      0</span></span>
<span id="cb55-345"><a href="#cb55-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-346"><a href="#cb55-346" aria-hidden="true" tabindex="-1"></a><span class="co"># The minimum CPUE in all hauls is always zero at this stage. It doesn't really matter because I calculate haul-level CPUE by grouping by ID's and summing. </span></span>
<span id="cb55-347"><a href="#cb55-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-348"><a href="#cb55-348" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename columns and select specific columns from the cod data</span></span>
<span id="cb55-349"><a href="#cb55-349" aria-hidden="true" tabindex="-1"></a><span class="co"># Cod</span></span>
<span id="cb55-350"><a href="#cb55-350" aria-hidden="true" tabindex="-1"></a>datcod <span class="ot">&lt;-</span> hlcodhaul <span class="sc">|&gt;</span></span>
<span id="cb55-351"><a href="#cb55-351" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(density, Year, ShootLat, ShootLong, Quarter, Country, Month, haul.id, IDx, Rect, sub_div, length_cm2) <span class="sc">|&gt;</span> </span>
<span id="cb55-352"><a href="#cb55-352" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">year =</span> Year,</span>
<span id="cb55-353"><a href="#cb55-353" aria-hidden="true" tabindex="-1"></a>         <span class="at">month =</span> Month,</span>
<span id="cb55-354"><a href="#cb55-354" aria-hidden="true" tabindex="-1"></a>         <span class="at">lat =</span> ShootLat,</span>
<span id="cb55-355"><a href="#cb55-355" aria-hidden="true" tabindex="-1"></a>         <span class="at">lon =</span> ShootLong,</span>
<span id="cb55-356"><a href="#cb55-356" aria-hidden="true" tabindex="-1"></a>         <span class="at">quarter =</span> Quarter,</span>
<span id="cb55-357"><a href="#cb55-357" aria-hidden="true" tabindex="-1"></a>         <span class="at">ices_rect =</span> Rect,</span>
<span id="cb55-358"><a href="#cb55-358" aria-hidden="true" tabindex="-1"></a>         <span class="at">length_cm =</span> length_cm2) <span class="sc">|&gt;</span> </span>
<span id="cb55-359"><a href="#cb55-359" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="st">"cod"</span>)</span>
<span id="cb55-360"><a href="#cb55-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-361"><a href="#cb55-361" aria-hidden="true" tabindex="-1"></a><span class="co"># Flounder</span></span>
<span id="cb55-362"><a href="#cb55-362" aria-hidden="true" tabindex="-1"></a>datfle <span class="ot">&lt;-</span> hlflehaul <span class="sc">|&gt;</span></span>
<span id="cb55-363"><a href="#cb55-363" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(density, Year, ShootLat, ShootLong, Quarter, Country, Month, haul.id, IDx, Rect, sub_div, length_cm2) <span class="sc">|&gt;</span> </span>
<span id="cb55-364"><a href="#cb55-364" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">year =</span> Year,</span>
<span id="cb55-365"><a href="#cb55-365" aria-hidden="true" tabindex="-1"></a>         <span class="at">month =</span> Month,</span>
<span id="cb55-366"><a href="#cb55-366" aria-hidden="true" tabindex="-1"></a>         <span class="at">lat =</span> ShootLat,</span>
<span id="cb55-367"><a href="#cb55-367" aria-hidden="true" tabindex="-1"></a>         <span class="at">lon =</span> ShootLong,</span>
<span id="cb55-368"><a href="#cb55-368" aria-hidden="true" tabindex="-1"></a>         <span class="at">quarter =</span> Quarter,</span>
<span id="cb55-369"><a href="#cb55-369" aria-hidden="true" tabindex="-1"></a>         <span class="at">ices_rect =</span> Rect,</span>
<span id="cb55-370"><a href="#cb55-370" aria-hidden="true" tabindex="-1"></a>         <span class="at">length_cm =</span> length_cm2) <span class="sc">|&gt;</span> </span>
<span id="cb55-371"><a href="#cb55-371" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="st">"flounder"</span>)</span>
<span id="cb55-372"><a href="#cb55-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-373"><a href="#cb55-373" aria-hidden="true" tabindex="-1"></a><span class="co"># Plaice</span></span>
<span id="cb55-374"><a href="#cb55-374" aria-hidden="true" tabindex="-1"></a>datpla <span class="ot">&lt;-</span> hlplahaul <span class="sc">|&gt;</span></span>
<span id="cb55-375"><a href="#cb55-375" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(density, Year, ShootLat, ShootLong, Quarter, Country, Month, haul.id, IDx, Rect, sub_div, length_cm2) <span class="sc">|&gt;</span> </span>
<span id="cb55-376"><a href="#cb55-376" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">year =</span> Year,</span>
<span id="cb55-377"><a href="#cb55-377" aria-hidden="true" tabindex="-1"></a>         <span class="at">month =</span> Month,</span>
<span id="cb55-378"><a href="#cb55-378" aria-hidden="true" tabindex="-1"></a>         <span class="at">lat =</span> ShootLat,</span>
<span id="cb55-379"><a href="#cb55-379" aria-hidden="true" tabindex="-1"></a>         <span class="at">lon =</span> ShootLong,</span>
<span id="cb55-380"><a href="#cb55-380" aria-hidden="true" tabindex="-1"></a>         <span class="at">quarter =</span> Quarter,</span>
<span id="cb55-381"><a href="#cb55-381" aria-hidden="true" tabindex="-1"></a>         <span class="at">ices_rect =</span> Rect,</span>
<span id="cb55-382"><a href="#cb55-382" aria-hidden="true" tabindex="-1"></a>         <span class="at">length_cm =</span> length_cm2) <span class="sc">|&gt;</span> </span>
<span id="cb55-383"><a href="#cb55-383" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="st">"plaice"</span>)</span>
<span id="cb55-384"><a href="#cb55-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-385"><a href="#cb55-385" aria-hidden="true" tabindex="-1"></a><span class="co"># Dab</span></span>
<span id="cb55-386"><a href="#cb55-386" aria-hidden="true" tabindex="-1"></a>datdab <span class="ot">&lt;-</span> hldabhaul <span class="sc">|&gt;</span></span>
<span id="cb55-387"><a href="#cb55-387" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(density, Year, ShootLat, ShootLong, Quarter, Country, Month, haul.id, IDx, Rect, sub_div, length_cm2) <span class="sc">|&gt;</span> </span>
<span id="cb55-388"><a href="#cb55-388" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">year =</span> Year,</span>
<span id="cb55-389"><a href="#cb55-389" aria-hidden="true" tabindex="-1"></a>         <span class="at">month =</span> Month,</span>
<span id="cb55-390"><a href="#cb55-390" aria-hidden="true" tabindex="-1"></a>         <span class="at">lat =</span> ShootLat,</span>
<span id="cb55-391"><a href="#cb55-391" aria-hidden="true" tabindex="-1"></a>         <span class="at">lon =</span> ShootLong,</span>
<span id="cb55-392"><a href="#cb55-392" aria-hidden="true" tabindex="-1"></a>         <span class="at">quarter =</span> Quarter,</span>
<span id="cb55-393"><a href="#cb55-393" aria-hidden="true" tabindex="-1"></a>         <span class="at">ices_rect =</span> Rect,</span>
<span id="cb55-394"><a href="#cb55-394" aria-hidden="true" tabindex="-1"></a>         <span class="at">length_cm =</span> length_cm2) <span class="sc">|&gt;</span> </span>
<span id="cb55-395"><a href="#cb55-395" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="st">"dab"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Because it's size-based cpue, I want the data frame to be "full", so that each haul has every size, even if all are empty. That means I can define a size group, group by and sum for each haul, even if there aren't any sizes caught. Now I only have lengths with catches, and no lengths if catch is zero.</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>datcod <span class="sc">|&gt;</span> <span class="fu">group_by</span>(haul.id) <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">n_size =</span> <span class="fu">length</span>(<span class="fu">unique</span>(length_cm))) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(n_size, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: one grouping variable (haul.id)</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; summarise: now 9,373 rows and 2 columns, ungrouped</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; distinct: removed 9,304 rows (99%), 69 rows remaining</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 69 × 2</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    haul.id                  n_size</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                     &lt;int&gt;</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 1993:1:GFR:SOL:H20:21:1      23</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 1993:1:GFR:SOL:H20:22:32      3</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 1993:1:GFR:SOL:H20:23:31      4</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 1993:1:GFR:SOL:H20:24:30      6</span></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 1993:1:GFR:SOL:H20:26:3      31</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 1993:1:GFR:SOL:H20:27:27     10</span></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 1993:1:GFR:SOL:H20:28:24     36</span></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 1993:1:GFR:SOL:H20:29:29      7</span></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 1993:1:GFR:SOL:H20:30:28      2</span></span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1993:1:GFR:SOL:H20:31:25     29</span></span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 59 more rows</span></span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a>datcod <span class="sc">|&gt;</span> <span class="fu">filter</span>(haul.id <span class="sc">==</span> <span class="st">"1993:1:GFR:SOL:H20:23:31"</span>) <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>()</span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter: removed 219,786 rows (&gt;99%), 4 rows remaining</span></span>
<span id="cb56-22"><a href="#cb56-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       density year     lat   lon quarter Country month                  haul.id</span></span>
<span id="cb56-23"><a href="#cb56-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 0.009185334 1993 54.5167 14.15       1     GFR     2 1993:1:GFR:SOL:H20:23:31</span></span>
<span id="cb56-24"><a href="#cb56-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 2.177960458 1993 54.5167 14.15       1     GFR     2 1993:1:GFR:SOL:H20:23:31</span></span>
<span id="cb56-25"><a href="#cb56-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 3.046329990 1993 54.5167 14.15       1     GFR     2 1993:1:GFR:SOL:H20:23:31</span></span>
<span id="cb56-26"><a href="#cb56-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 0.000000000 1993 54.5167 14.15       1     GFR     2 1993:1:GFR:SOL:H20:23:31</span></span>
<span id="cb56-27"><a href="#cb56-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                         IDx ices_rect sub_div length_cm species</span></span>
<span id="cb56-28"><a href="#cb56-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 1993.1.GFR.06S1.H20.23.31      38G4      24         6     cod</span></span>
<span id="cb56-29"><a href="#cb56-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 1993.1.GFR.06S1.H20.23.31      38G4      24        35     cod</span></span>
<span id="cb56-30"><a href="#cb56-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 1993.1.GFR.06S1.H20.23.31      38G4      24        39     cod</span></span>
<span id="cb56-31"><a href="#cb56-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 1993.1.GFR.06S1.H20.23.31      38G4      24         0     cod</span></span>
<span id="cb56-32"><a href="#cb56-32" aria-hidden="true" tabindex="-1"></a>datcod <span class="sc">|&gt;</span> <span class="fu">group_by</span>(haul.id) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">tot_dens =</span> <span class="fu">sum</span>(density)) <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="fu">distinct</span>(haul.id, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> <span class="fu">filter</span>(tot_dens <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb56-33"><a href="#cb56-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: one grouping variable (haul.id)</span></span>
<span id="cb56-34"><a href="#cb56-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate (grouped): new variable 'tot_dens' (double) with 8,230 unique values and 0% NA</span></span>
<span id="cb56-35"><a href="#cb56-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ungroup: no grouping variables</span></span>
<span id="cb56-36"><a href="#cb56-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; distinct: removed 210,417 rows (96%), 9,373 rows remaining</span></span>
<span id="cb56-37"><a href="#cb56-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter: removed 8,239 rows (88%), 1,134 rows remaining</span></span>
<span id="cb56-38"><a href="#cb56-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1,134 × 14</span></span>
<span id="cb56-39"><a href="#cb56-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    density  year   lat   lon quarter Country month haul.id       IDx   ices_rect</span></span>
<span id="cb56-40"><a href="#cb56-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;int&gt; &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;    </span></span>
<span id="cb56-41"><a href="#cb56-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1       0  1993  55    17.5       1 GFR         2 1993:1:GFR:S… 1993… 39G7     </span></span>
<span id="cb56-42"><a href="#cb56-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2       0  1993  57.9  19.4       1 SWE         3 1993:1:SWE:A… 1993… 44G9     </span></span>
<span id="cb56-43"><a href="#cb56-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3       0  1993  57.1  17.9       3 SWE         8 1993:3:SWE:A… 1993… 43G7     </span></span>
<span id="cb56-44"><a href="#cb56-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4       0  1993  57.1  18.9       3 SWE         8 1993:3:SWE:A… 1993… 43G8     </span></span>
<span id="cb56-45"><a href="#cb56-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5       0  1993  57.1  18.8       3 SWE         8 1993:3:SWE:A… 1993… 43G8     </span></span>
<span id="cb56-46"><a href="#cb56-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6       0  1993  57.2  18.9       3 SWE         8 1993:3:SWE:A… 1993… 43G8     </span></span>
<span id="cb56-47"><a href="#cb56-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7       0  1993  57.3  17.9       3 SWE         8 1993:3:SWE:A… 1993… 43G7     </span></span>
<span id="cb56-48"><a href="#cb56-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8       0  1993  57.4  16.9       3 SWE         8 1993:3:SWE:A… 1993… 43G6     </span></span>
<span id="cb56-49"><a href="#cb56-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9       0  1993  57.4  19.2       3 SWE         8 1993:3:SWE:A… 1993… 43G9     </span></span>
<span id="cb56-50"><a href="#cb56-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10       0  1993  57.5  17.1       3 SWE         8 1993:3:SWE:A… 1993… 43G7     </span></span>
<span id="cb56-51"><a href="#cb56-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 1,124 more rows</span></span>
<span id="cb56-52"><a href="#cb56-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 4 more variables: sub_div &lt;chr&gt;, length_cm &lt;dbl&gt;, species &lt;chr&gt;,</span></span>
<span id="cb56-53"><a href="#cb56-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   tot_dens &lt;dbl&gt;</span></span>
<span id="cb56-54"><a href="#cb56-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-55"><a href="#cb56-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame with all combinations of trawl IDs and lengths</span></span>
<span id="cb56-56"><a href="#cb56-56" aria-hidden="true" tabindex="-1"></a>ex_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">expand.grid</span>(</span>
<span id="cb56-57"><a href="#cb56-57" aria-hidden="true" tabindex="-1"></a>  <span class="at">length_cm =</span> <span class="fu">seq_range</span>(datcod<span class="sc">$</span>length_cm, <span class="at">by =</span> <span class="dv">1</span>),</span>
<span id="cb56-58"><a href="#cb56-58" aria-hidden="true" tabindex="-1"></a>  <span class="at">haul.id =</span> <span class="fu">unique</span>(datcod<span class="sc">$</span>haul.id))</span>
<span id="cb56-59"><a href="#cb56-59" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb56-60"><a href="#cb56-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-61"><a href="#cb56-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an ID that is haul + length</span></span>
<span id="cb56-62"><a href="#cb56-62" aria-hidden="true" tabindex="-1"></a>ex_df<span class="sc">$</span>haul.id.size <span class="ot">&lt;-</span> <span class="fu">paste</span>(ex_df<span class="sc">$</span>haul.id, ex_df<span class="sc">$</span>length_cm, <span class="at">sep =</span> <span class="st">"."</span>)</span>
<span id="cb56-63"><a href="#cb56-63" aria-hidden="true" tabindex="-1"></a>datcod<span class="sc">$</span>haul.id.size <span class="ot">&lt;-</span> <span class="fu">paste</span>(datcod<span class="sc">$</span>haul.id, datcod<span class="sc">$</span>length_cm, <span class="at">sep =</span> <span class="st">"."</span>)</span>
<span id="cb56-64"><a href="#cb56-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-65"><a href="#cb56-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove IDs that are already in datcod</span></span>
<span id="cb56-66"><a href="#cb56-66" aria-hidden="true" tabindex="-1"></a>ex_df <span class="ot">&lt;-</span> ex_df <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span>haul.id.size <span class="sc">%in%</span> <span class="fu">unique</span>(datcod<span class="sc">$</span>haul.id.size)) </span>
<span id="cb56-67"><a href="#cb56-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter: removed 219,790 rows (18%), 979,954 rows remaining</span></span>
<span id="cb56-68"><a href="#cb56-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-69"><a href="#cb56-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Add in the other columns besides density and length</span></span>
<span id="cb56-70"><a href="#cb56-70" aria-hidden="true" tabindex="-1"></a>dat_for_join <span class="ot">&lt;-</span> datcod <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>density, <span class="sc">-</span>length_cm, <span class="sc">-</span>haul.id.size) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(haul.id, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb56-71"><a href="#cb56-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; distinct: removed 210,417 rows (96%), 9,373 rows remaining</span></span>
<span id="cb56-72"><a href="#cb56-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-73"><a href="#cb56-73" aria-hidden="true" tabindex="-1"></a>ex_df <span class="ot">&lt;-</span> <span class="fu">left_join</span>(ex_df, dat_for_join, <span class="at">by =</span> <span class="st">"haul.id"</span>)</span>
<span id="cb56-74"><a href="#cb56-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; left_join: added 10 columns (year, lat, lon, quarter, Country, …)</span></span>
<span id="cb56-75"><a href="#cb56-75" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows only in x         0</span></span>
<span id="cb56-76"><a href="#cb56-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows only in y  (      0)</span></span>
<span id="cb56-77"><a href="#cb56-77" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; matched rows     979,954</span></span>
<span id="cb56-78"><a href="#cb56-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt;                 =========</span></span>
<span id="cb56-79"><a href="#cb56-79" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows total       979,954</span></span>
<span id="cb56-80"><a href="#cb56-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-81"><a href="#cb56-81" aria-hidden="true" tabindex="-1"></a>datcod <span class="sc">|&gt;</span> <span class="fu">filter</span>(haul.id.size <span class="sc">%in%</span> ex_df<span class="sc">$</span>haul.id.size)</span>
<span id="cb56-82"><a href="#cb56-82" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter: removed all rows (100%)</span></span>
<span id="cb56-83"><a href="#cb56-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 0 × 14</span></span>
<span id="cb56-84"><a href="#cb56-84" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 14 variables: density &lt;dbl&gt;, year &lt;int&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;,</span></span>
<span id="cb56-85"><a href="#cb56-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   quarter &lt;int&gt;, Country &lt;chr&gt;, month &lt;int&gt;, haul.id &lt;chr&gt;, IDx &lt;chr&gt;,</span></span>
<span id="cb56-86"><a href="#cb56-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   ices_rect &lt;chr&gt;, sub_div &lt;chr&gt;, length_cm &lt;dbl&gt;, species &lt;chr&gt;,</span></span>
<span id="cb56-87"><a href="#cb56-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   haul.id.size &lt;chr&gt;</span></span>
<span id="cb56-88"><a href="#cb56-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-89"><a href="#cb56-89" aria-hidden="true" tabindex="-1"></a><span class="co"># Bind_rows these data with datcod</span></span>
<span id="cb56-90"><a href="#cb56-90" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(datcod) <span class="sc">+</span> <span class="fu">nrow</span>(ex_df)</span>
<span id="cb56-91"><a href="#cb56-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1199744</span></span>
<span id="cb56-92"><a href="#cb56-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-93"><a href="#cb56-93" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(<span class="fu">is.na</span>(datcod<span class="sc">$</span>density))</span>
<span id="cb56-94"><a href="#cb56-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb56-95"><a href="#cb56-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-96"><a href="#cb56-96" aria-hidden="true" tabindex="-1"></a>datcod <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(datcod, ex_df) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(haul.id, length_cm)</span>
<span id="cb56-97"><a href="#cb56-97" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(datcod)</span>
<span id="cb56-98"><a href="#cb56-98" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1199744</span></span>
<span id="cb56-99"><a href="#cb56-99" aria-hidden="true" tabindex="-1"></a>datcod</span>
<span id="cb56-100"><a href="#cb56-100" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1,199,744 × 14</span></span>
<span id="cb56-101"><a href="#cb56-101" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    density  year   lat   lon quarter Country month haul.id       IDx   ices_rect</span></span>
<span id="cb56-102"><a href="#cb56-102" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;int&gt; &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;    </span></span>
<span id="cb56-103"><a href="#cb56-103" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1       0  1993  54.7    13       1 GFR         2 1993:1:GFR:S… 1993… 38G3     </span></span>
<span id="cb56-104"><a href="#cb56-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2      NA  1993  54.7    13       1 GFR         2 1993:1:GFR:S… 1993… 38G3     </span></span>
<span id="cb56-105"><a href="#cb56-105" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3      NA  1993  54.7    13       1 GFR         2 1993:1:GFR:S… 1993… 38G3     </span></span>
<span id="cb56-106"><a href="#cb56-106" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4      NA  1993  54.7    13       1 GFR         2 1993:1:GFR:S… 1993… 38G3     </span></span>
<span id="cb56-107"><a href="#cb56-107" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5      NA  1993  54.7    13       1 GFR         2 1993:1:GFR:S… 1993… 38G3     </span></span>
<span id="cb56-108"><a href="#cb56-108" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6      NA  1993  54.7    13       1 GFR         2 1993:1:GFR:S… 1993… 38G3     </span></span>
<span id="cb56-109"><a href="#cb56-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7      NA  1993  54.7    13       1 GFR         2 1993:1:GFR:S… 1993… 38G3     </span></span>
<span id="cb56-110"><a href="#cb56-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8      NA  1993  54.7    13       1 GFR         2 1993:1:GFR:S… 1993… 38G3     </span></span>
<span id="cb56-111"><a href="#cb56-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9      NA  1993  54.7    13       1 GFR         2 1993:1:GFR:S… 1993… 38G3     </span></span>
<span id="cb56-112"><a href="#cb56-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10      NA  1993  54.7    13       1 GFR         2 1993:1:GFR:S… 1993… 38G3     </span></span>
<span id="cb56-113"><a href="#cb56-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 1,199,734 more rows</span></span>
<span id="cb56-114"><a href="#cb56-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 4 more variables: sub_div &lt;chr&gt;, length_cm &lt;dbl&gt;, species &lt;chr&gt;,</span></span>
<span id="cb56-115"><a href="#cb56-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   haul.id.size &lt;chr&gt;</span></span>
<span id="cb56-116"><a href="#cb56-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-117"><a href="#cb56-117" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace NA density with 0 density because that's the added length-classes not previously in the catch data</span></span>
<span id="cb56-118"><a href="#cb56-118" aria-hidden="true" tabindex="-1"></a>datcod <span class="ot">&lt;-</span> datcod <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">density =</span> <span class="fu">replace_na</span>(density, <span class="dv">0</span>))</span>
<span id="cb56-119"><a href="#cb56-119" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: changed 979,954 values (82%) of 'density' (979954 fewer NA)</span></span>
<span id="cb56-120"><a href="#cb56-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-121"><a href="#cb56-121" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the proportion zeroes are still correct:</span></span>
<span id="cb56-122"><a href="#cb56-122" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> datcod <span class="sc">|&gt;</span></span>
<span id="cb56-123"><a href="#cb56-123" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(haul.id) <span class="sc">|&gt;</span></span>
<span id="cb56-124"><a href="#cb56-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">haul_density =</span> <span class="fu">sum</span>(density)) <span class="sc">|&gt;</span> </span>
<span id="cb56-125"><a href="#cb56-125" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb56-126"><a href="#cb56-126" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: one grouping variable (haul.id)</span></span>
<span id="cb56-127"><a href="#cb56-127" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; summarise: now 9,373 rows and 2 columns, ungrouped</span></span>
<span id="cb56-128"><a href="#cb56-128" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ungroup: no grouping variables</span></span>
<span id="cb56-129"><a href="#cb56-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-130"><a href="#cb56-130" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(datcod)</span>
<span id="cb56-131"><a href="#cb56-131" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1199744</span></span>
<span id="cb56-132"><a href="#cb56-132" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(datcod<span class="sc">$</span>haul.id))</span>
<span id="cb56-133"><a href="#cb56-133" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 9373</span></span>
<span id="cb56-134"><a href="#cb56-134" aria-hidden="true" tabindex="-1"></a>t <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(haul_density)</span>
<span id="cb56-135"><a href="#cb56-135" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; drop_na: no rows removed</span></span>
<span id="cb56-136"><a href="#cb56-136" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 9,373 × 2</span></span>
<span id="cb56-137"><a href="#cb56-137" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    haul.id                  haul_density</span></span>
<span id="cb56-138"><a href="#cb56-138" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                           &lt;dbl&gt;</span></span>
<span id="cb56-139"><a href="#cb56-139" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 1993:1:GFR:SOL:H20:21:1        157.  </span></span>
<span id="cb56-140"><a href="#cb56-140" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 1993:1:GFR:SOL:H20:22:32        10.3 </span></span>
<span id="cb56-141"><a href="#cb56-141" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 1993:1:GFR:SOL:H20:23:31         5.23</span></span>
<span id="cb56-142"><a href="#cb56-142" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 1993:1:GFR:SOL:H20:24:30        19.4 </span></span>
<span id="cb56-143"><a href="#cb56-143" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 1993:1:GFR:SOL:H20:25:2        810.  </span></span>
<span id="cb56-144"><a href="#cb56-144" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 1993:1:GFR:SOL:H20:26:3        363.  </span></span>
<span id="cb56-145"><a href="#cb56-145" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 1993:1:GFR:SOL:H20:27:27        23.2 </span></span>
<span id="cb56-146"><a href="#cb56-146" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 1993:1:GFR:SOL:H20:28:24      2302.  </span></span>
<span id="cb56-147"><a href="#cb56-147" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 1993:1:GFR:SOL:H20:29:29        30.7 </span></span>
<span id="cb56-148"><a href="#cb56-148" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1993:1:GFR:SOL:H20:30:28         6.84</span></span>
<span id="cb56-149"><a href="#cb56-149" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 9,363 more rows</span></span>
<span id="cb56-150"><a href="#cb56-150" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(t)</span>
<span id="cb56-151"><a href="#cb56-151" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 9373</span></span>
<span id="cb56-152"><a href="#cb56-152" aria-hidden="true" tabindex="-1"></a>t <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span>haul_density <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb56-153"><a href="#cb56-153" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter: removed 1,134 rows (12%), 8,239 rows remaining</span></span>
<span id="cb56-154"><a href="#cb56-154" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 8,239 × 2</span></span>
<span id="cb56-155"><a href="#cb56-155" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    haul.id                  haul_density</span></span>
<span id="cb56-156"><a href="#cb56-156" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                           &lt;dbl&gt;</span></span>
<span id="cb56-157"><a href="#cb56-157" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 1993:1:GFR:SOL:H20:21:1        157.  </span></span>
<span id="cb56-158"><a href="#cb56-158" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 1993:1:GFR:SOL:H20:22:32        10.3 </span></span>
<span id="cb56-159"><a href="#cb56-159" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 1993:1:GFR:SOL:H20:23:31         5.23</span></span>
<span id="cb56-160"><a href="#cb56-160" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 1993:1:GFR:SOL:H20:24:30        19.4 </span></span>
<span id="cb56-161"><a href="#cb56-161" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 1993:1:GFR:SOL:H20:25:2        810.  </span></span>
<span id="cb56-162"><a href="#cb56-162" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 1993:1:GFR:SOL:H20:26:3        363.  </span></span>
<span id="cb56-163"><a href="#cb56-163" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 1993:1:GFR:SOL:H20:27:27        23.2 </span></span>
<span id="cb56-164"><a href="#cb56-164" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 1993:1:GFR:SOL:H20:28:24      2302.  </span></span>
<span id="cb56-165"><a href="#cb56-165" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 1993:1:GFR:SOL:H20:29:29        30.7 </span></span>
<span id="cb56-166"><a href="#cb56-166" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 1993:1:GFR:SOL:H20:30:28         6.84</span></span>
<span id="cb56-167"><a href="#cb56-167" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 8,229 more rows</span></span>
<span id="cb56-168"><a href="#cb56-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-169"><a href="#cb56-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-170"><a href="#cb56-170" aria-hidden="true" tabindex="-1"></a><span class="co"># Flounder</span></span>
<span id="cb56-171"><a href="#cb56-171" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame with all combinations of trawl IDs and lengths</span></span>
<span id="cb56-172"><a href="#cb56-172" aria-hidden="true" tabindex="-1"></a>ex_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">expand.grid</span>(</span>
<span id="cb56-173"><a href="#cb56-173" aria-hidden="true" tabindex="-1"></a>  <span class="at">length_cm =</span> <span class="fu">seq_range</span>(datfle<span class="sc">$</span>length_cm, <span class="at">by =</span> <span class="dv">1</span>),</span>
<span id="cb56-174"><a href="#cb56-174" aria-hidden="true" tabindex="-1"></a>  <span class="at">haul.id =</span> <span class="fu">unique</span>(datfle<span class="sc">$</span>haul.id))</span>
<span id="cb56-175"><a href="#cb56-175" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb56-176"><a href="#cb56-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-177"><a href="#cb56-177" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an ID that is haul + length</span></span>
<span id="cb56-178"><a href="#cb56-178" aria-hidden="true" tabindex="-1"></a>ex_df<span class="sc">$</span>haul.id.size <span class="ot">&lt;-</span> <span class="fu">paste</span>(ex_df<span class="sc">$</span>haul.id, ex_df<span class="sc">$</span>length_cm, <span class="at">sep =</span> <span class="st">"."</span>)</span>
<span id="cb56-179"><a href="#cb56-179" aria-hidden="true" tabindex="-1"></a>datfle<span class="sc">$</span>haul.id.size <span class="ot">&lt;-</span> <span class="fu">paste</span>(datfle<span class="sc">$</span>haul.id, datfle<span class="sc">$</span>length_cm, <span class="at">sep =</span> <span class="st">"."</span>)</span>
<span id="cb56-180"><a href="#cb56-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-181"><a href="#cb56-181" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove IDs that are already in datfle</span></span>
<span id="cb56-182"><a href="#cb56-182" aria-hidden="true" tabindex="-1"></a>ex_df <span class="ot">&lt;-</span> ex_df <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span>haul.id.size <span class="sc">%in%</span> <span class="fu">unique</span>(datfle<span class="sc">$</span>haul.id.size)) </span>
<span id="cb56-183"><a href="#cb56-183" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter: removed 111,868 rows (20%), 446,343 rows remaining</span></span>
<span id="cb56-184"><a href="#cb56-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-185"><a href="#cb56-185" aria-hidden="true" tabindex="-1"></a><span class="co"># Add in the other columns besides density and length</span></span>
<span id="cb56-186"><a href="#cb56-186" aria-hidden="true" tabindex="-1"></a>dat_for_join <span class="ot">&lt;-</span> datfle <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>density, <span class="sc">-</span>length_cm, <span class="sc">-</span>haul.id.size) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(haul.id, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb56-187"><a href="#cb56-187" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; distinct: removed 104,371 rows (92%), 9,151 rows remaining</span></span>
<span id="cb56-188"><a href="#cb56-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-189"><a href="#cb56-189" aria-hidden="true" tabindex="-1"></a>ex_df <span class="ot">&lt;-</span> <span class="fu">left_join</span>(ex_df, dat_for_join, <span class="at">by =</span> <span class="st">"haul.id"</span>)</span>
<span id="cb56-190"><a href="#cb56-190" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; left_join: added 10 columns (year, lat, lon, quarter, Country, …)</span></span>
<span id="cb56-191"><a href="#cb56-191" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows only in x         0</span></span>
<span id="cb56-192"><a href="#cb56-192" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows only in y  (      0)</span></span>
<span id="cb56-193"><a href="#cb56-193" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; matched rows     446,343</span></span>
<span id="cb56-194"><a href="#cb56-194" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt;                 =========</span></span>
<span id="cb56-195"><a href="#cb56-195" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows total       446,343</span></span>
<span id="cb56-196"><a href="#cb56-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-197"><a href="#cb56-197" aria-hidden="true" tabindex="-1"></a><span class="co"># Bind_rows these data with datfle</span></span>
<span id="cb56-198"><a href="#cb56-198" aria-hidden="true" tabindex="-1"></a>datfle <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(datfle, ex_df) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(haul.id, length_cm)</span>
<span id="cb56-199"><a href="#cb56-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-200"><a href="#cb56-200" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace NA density with 0 density because that's the added length-classes not previously in the catch data</span></span>
<span id="cb56-201"><a href="#cb56-201" aria-hidden="true" tabindex="-1"></a>datfle <span class="ot">&lt;-</span> datfle <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">density =</span> <span class="fu">replace_na</span>(density, <span class="dv">0</span>))</span>
<span id="cb56-202"><a href="#cb56-202" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: changed 446,343 values (80%) of 'density' (446343 fewer NA)</span></span>
<span id="cb56-203"><a href="#cb56-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-204"><a href="#cb56-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-205"><a href="#cb56-205" aria-hidden="true" tabindex="-1"></a><span class="co"># Plaice</span></span>
<span id="cb56-206"><a href="#cb56-206" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame with all combinations of trawl IDs and lengths</span></span>
<span id="cb56-207"><a href="#cb56-207" aria-hidden="true" tabindex="-1"></a>ex_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">expand.grid</span>(</span>
<span id="cb56-208"><a href="#cb56-208" aria-hidden="true" tabindex="-1"></a>  <span class="at">length_cm =</span> <span class="fu">seq_range</span>(datpla<span class="sc">$</span>length_cm, <span class="at">by =</span> <span class="dv">1</span>),</span>
<span id="cb56-209"><a href="#cb56-209" aria-hidden="true" tabindex="-1"></a>  <span class="at">haul.id =</span> <span class="fu">unique</span>(datpla<span class="sc">$</span>haul.id))</span>
<span id="cb56-210"><a href="#cb56-210" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb56-211"><a href="#cb56-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-212"><a href="#cb56-212" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an ID that is haul + length</span></span>
<span id="cb56-213"><a href="#cb56-213" aria-hidden="true" tabindex="-1"></a>ex_df<span class="sc">$</span>haul.id.size <span class="ot">&lt;-</span> <span class="fu">paste</span>(ex_df<span class="sc">$</span>haul.id, ex_df<span class="sc">$</span>length_cm, <span class="at">sep =</span> <span class="st">"."</span>)</span>
<span id="cb56-214"><a href="#cb56-214" aria-hidden="true" tabindex="-1"></a>datpla<span class="sc">$</span>haul.id.size <span class="ot">&lt;-</span> <span class="fu">paste</span>(datpla<span class="sc">$</span>haul.id, datpla<span class="sc">$</span>length_cm, <span class="at">sep =</span> <span class="st">"."</span>)</span>
<span id="cb56-215"><a href="#cb56-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-216"><a href="#cb56-216" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove IDs that are already in datpla</span></span>
<span id="cb56-217"><a href="#cb56-217" aria-hidden="true" tabindex="-1"></a>ex_df <span class="ot">&lt;-</span> ex_df <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span>haul.id.size <span class="sc">%in%</span> <span class="fu">unique</span>(datpla<span class="sc">$</span>haul.id.size)) </span>
<span id="cb56-218"><a href="#cb56-218" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter: removed 49,816 rows (9%), 511,016 rows remaining</span></span>
<span id="cb56-219"><a href="#cb56-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-220"><a href="#cb56-220" aria-hidden="true" tabindex="-1"></a><span class="co"># Add in the other columns besides density and length</span></span>
<span id="cb56-221"><a href="#cb56-221" aria-hidden="true" tabindex="-1"></a>dat_for_join <span class="ot">&lt;-</span> datpla <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>density, <span class="sc">-</span>length_cm, <span class="sc">-</span>haul.id.size) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(haul.id, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb56-222"><a href="#cb56-222" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; distinct: removed 41,213 rows (82%), 8,763 rows remaining</span></span>
<span id="cb56-223"><a href="#cb56-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-224"><a href="#cb56-224" aria-hidden="true" tabindex="-1"></a>ex_df <span class="ot">&lt;-</span> <span class="fu">left_join</span>(ex_df, dat_for_join, <span class="at">by =</span> <span class="st">"haul.id"</span>)</span>
<span id="cb56-225"><a href="#cb56-225" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; left_join: added 10 columns (year, lat, lon, quarter, Country, …)</span></span>
<span id="cb56-226"><a href="#cb56-226" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows only in x         0</span></span>
<span id="cb56-227"><a href="#cb56-227" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows only in y  (      0)</span></span>
<span id="cb56-228"><a href="#cb56-228" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; matched rows     511,016</span></span>
<span id="cb56-229"><a href="#cb56-229" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt;                 =========</span></span>
<span id="cb56-230"><a href="#cb56-230" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows total       511,016</span></span>
<span id="cb56-231"><a href="#cb56-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-232"><a href="#cb56-232" aria-hidden="true" tabindex="-1"></a><span class="co"># Bind_rows these data with datpla</span></span>
<span id="cb56-233"><a href="#cb56-233" aria-hidden="true" tabindex="-1"></a>datpla <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(datpla, ex_df) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(haul.id, length_cm)</span>
<span id="cb56-234"><a href="#cb56-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-235"><a href="#cb56-235" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace NA density with 0 density because that's the added length-classes not previously in the catch data</span></span>
<span id="cb56-236"><a href="#cb56-236" aria-hidden="true" tabindex="-1"></a>datpla <span class="ot">&lt;-</span> datpla <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">density =</span> <span class="fu">replace_na</span>(density, <span class="dv">0</span>))</span>
<span id="cb56-237"><a href="#cb56-237" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: changed 511,016 values (91%) of 'density' (511016 fewer NA)</span></span>
<span id="cb56-238"><a href="#cb56-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-239"><a href="#cb56-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-240"><a href="#cb56-240" aria-hidden="true" tabindex="-1"></a><span class="co"># Dab</span></span>
<span id="cb56-241"><a href="#cb56-241" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame with all combinations of trawl IDs and lengths</span></span>
<span id="cb56-242"><a href="#cb56-242" aria-hidden="true" tabindex="-1"></a>ex_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">expand.grid</span>(</span>
<span id="cb56-243"><a href="#cb56-243" aria-hidden="true" tabindex="-1"></a>  <span class="at">length_cm =</span> <span class="fu">seq_range</span>(datdab<span class="sc">$</span>length_cm, <span class="at">by =</span> <span class="dv">1</span>),</span>
<span id="cb56-244"><a href="#cb56-244" aria-hidden="true" tabindex="-1"></a>  <span class="at">haul.id =</span> <span class="fu">unique</span>(datdab<span class="sc">$</span>haul.id))</span>
<span id="cb56-245"><a href="#cb56-245" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb56-246"><a href="#cb56-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-247"><a href="#cb56-247" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an ID that is haul + length</span></span>
<span id="cb56-248"><a href="#cb56-248" aria-hidden="true" tabindex="-1"></a>ex_df<span class="sc">$</span>haul.id.size <span class="ot">&lt;-</span> <span class="fu">paste</span>(ex_df<span class="sc">$</span>haul.id, ex_df<span class="sc">$</span>length_cm, <span class="at">sep =</span> <span class="st">"."</span>)</span>
<span id="cb56-249"><a href="#cb56-249" aria-hidden="true" tabindex="-1"></a>datdab<span class="sc">$</span>haul.id.size <span class="ot">&lt;-</span> <span class="fu">paste</span>(datdab<span class="sc">$</span>haul.id, datdab<span class="sc">$</span>length_cm, <span class="at">sep =</span> <span class="st">"."</span>)</span>
<span id="cb56-250"><a href="#cb56-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-251"><a href="#cb56-251" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove IDs that are already in datdab</span></span>
<span id="cb56-252"><a href="#cb56-252" aria-hidden="true" tabindex="-1"></a>ex_df <span class="ot">&lt;-</span> ex_df <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span>haul.id.size <span class="sc">%in%</span> <span class="fu">unique</span>(datdab<span class="sc">$</span>haul.id.size)) </span>
<span id="cb56-253"><a href="#cb56-253" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter: removed 19,233 rows (6%), 322,251 rows remaining</span></span>
<span id="cb56-254"><a href="#cb56-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-255"><a href="#cb56-255" aria-hidden="true" tabindex="-1"></a><span class="co"># Add in the other columns besides density and length</span></span>
<span id="cb56-256"><a href="#cb56-256" aria-hidden="true" tabindex="-1"></a>dat_for_join <span class="ot">&lt;-</span> datdab <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>density, <span class="sc">-</span>length_cm, <span class="sc">-</span>haul.id.size) <span class="sc">|&gt;</span> <span class="fu">distinct</span>(haul.id, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb56-257"><a href="#cb56-257" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; distinct: removed 10,477 rows (54%), 8,756 rows remaining</span></span>
<span id="cb56-258"><a href="#cb56-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-259"><a href="#cb56-259" aria-hidden="true" tabindex="-1"></a>ex_df <span class="ot">&lt;-</span> <span class="fu">left_join</span>(ex_df, dat_for_join, <span class="at">by =</span> <span class="st">"haul.id"</span>)</span>
<span id="cb56-260"><a href="#cb56-260" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; left_join: added 10 columns (year, lat, lon, quarter, Country, …)</span></span>
<span id="cb56-261"><a href="#cb56-261" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows only in x         0</span></span>
<span id="cb56-262"><a href="#cb56-262" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows only in y  (      0)</span></span>
<span id="cb56-263"><a href="#cb56-263" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; matched rows     322,251</span></span>
<span id="cb56-264"><a href="#cb56-264" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt;                 =========</span></span>
<span id="cb56-265"><a href="#cb56-265" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows total       322,251</span></span>
<span id="cb56-266"><a href="#cb56-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-267"><a href="#cb56-267" aria-hidden="true" tabindex="-1"></a><span class="co"># Bind_rows these data with datdab</span></span>
<span id="cb56-268"><a href="#cb56-268" aria-hidden="true" tabindex="-1"></a>datdab <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(datdab, ex_df) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(haul.id, length_cm)</span>
<span id="cb56-269"><a href="#cb56-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-270"><a href="#cb56-270" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace NA density with 0 density because that's the added length-classes not previously in the catch data</span></span>
<span id="cb56-271"><a href="#cb56-271" aria-hidden="true" tabindex="-1"></a>datdab <span class="ot">&lt;-</span> datdab <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">density =</span> <span class="fu">replace_na</span>(density, <span class="dv">0</span>))</span>
<span id="cb56-272"><a href="#cb56-272" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: changed 322,251 values (94%) of 'density' (322251 fewer NA)</span></span>
<span id="cb56-273"><a href="#cb56-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-274"><a href="#cb56-274" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge all species data</span></span>
<span id="cb56-275"><a href="#cb56-275" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(datcod, datfle, datpla, datdab)</span>
<span id="cb56-276"><a href="#cb56-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-277"><a href="#cb56-277" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(dat)</span>
<span id="cb56-278"><a href="#cb56-278" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Rows: 2,662,085</span></span>
<span id="cb56-279"><a href="#cb56-279" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Columns: 14</span></span>
<span id="cb56-280"><a href="#cb56-280" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ density      &lt;dbl&gt; 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.…</span></span>
<span id="cb56-281"><a href="#cb56-281" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ year         &lt;int&gt; 1993, 1993, 1993, 1993, 1993, 1993, 1993, 1993, 1993, 199…</span></span>
<span id="cb56-282"><a href="#cb56-282" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ lat          &lt;dbl&gt; 54.6833, 54.6833, 54.6833, 54.6833, 54.6833, 54.6833, 54.…</span></span>
<span id="cb56-283"><a href="#cb56-283" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ lon          &lt;dbl&gt; 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 1…</span></span>
<span id="cb56-284"><a href="#cb56-284" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ quarter      &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …</span></span>
<span id="cb56-285"><a href="#cb56-285" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ Country      &lt;chr&gt; "GFR", "GFR", "GFR", "GFR", "GFR", "GFR", "GFR", "GFR", "…</span></span>
<span id="cb56-286"><a href="#cb56-286" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ month        &lt;int&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …</span></span>
<span id="cb56-287"><a href="#cb56-287" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ haul.id      &lt;chr&gt; "1993:1:GFR:SOL:H20:21:1", "1993:1:GFR:SOL:H20:21:1", "19…</span></span>
<span id="cb56-288"><a href="#cb56-288" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ IDx          &lt;chr&gt; "1993.1.GFR.06S1.H20.21.1", "1993.1.GFR.06S1.H20.21.1", "…</span></span>
<span id="cb56-289"><a href="#cb56-289" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ ices_rect    &lt;chr&gt; "38G3", "38G3", "38G3", "38G3", "38G3", "38G3", "38G3", "…</span></span>
<span id="cb56-290"><a href="#cb56-290" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ sub_div      &lt;chr&gt; "24", "24", "24", "24", "24", "24", "24", "24", "24", "24…</span></span>
<span id="cb56-291"><a href="#cb56-291" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ length_cm    &lt;dbl&gt; 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16,…</span></span>
<span id="cb56-292"><a href="#cb56-292" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ species      &lt;chr&gt; "cod", "cod", "cod", "cod", "cod", "cod", "cod", "cod", "…</span></span>
<span id="cb56-293"><a href="#cb56-293" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ haul.id.size &lt;chr&gt; "1993:1:GFR:SOL:H20:21:1.0", "1993:1:GFR:SOL:H20:21:1.1",…</span></span>
<span id="cb56-294"><a href="#cb56-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-295"><a href="#cb56-295" aria-hidden="true" tabindex="-1"></a><span class="co"># Check proportion zeroes</span></span>
<span id="cb56-296"><a href="#cb56-296" aria-hidden="true" tabindex="-1"></a>q1 <span class="ot">&lt;-</span> dat <span class="sc">|&gt;</span> </span>
<span id="cb56-297"><a href="#cb56-297" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(quarter <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-298"><a href="#cb56-298" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, haul.id) <span class="sc">|&gt;</span> </span>
<span id="cb56-299"><a href="#cb56-299" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(<span class="fu">sum</span>(density) <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb56-300"><a href="#cb56-300" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-301"><a href="#cb56-301" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, species, zero_catch) <span class="sc">|&gt;</span> </span>
<span id="cb56-302"><a href="#cb56-302" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb56-303"><a href="#cb56-303" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-304"><a href="#cb56-304" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> zero_catch, <span class="at">values_from =</span> n) <span class="sc">|&gt;</span> </span>
<span id="cb56-305"><a href="#cb56-305" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop_z =</span> Y <span class="sc">/</span> (N<span class="sc">+</span>Y), </span>
<span id="cb56-306"><a href="#cb56-306" aria-hidden="true" tabindex="-1"></a>         <span class="at">q =</span> <span class="dv">1</span>)  </span>
<span id="cb56-307"><a href="#cb56-307" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter: removed 1,091,659 rows (41%), 1,570,426 rows remaining</span></span>
<span id="cb56-308"><a href="#cb56-308" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: 2 grouping variables (species, haul.id)</span></span>
<span id="cb56-309"><a href="#cb56-309" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate (grouped): new variable 'zero_catch' (character) with 2 unique values and 0% NA</span></span>
<span id="cb56-310"><a href="#cb56-310" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ungroup: no grouping variables</span></span>
<span id="cb56-311"><a href="#cb56-311" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: 3 grouping variables (year, species, zero_catch)</span></span>
<span id="cb56-312"><a href="#cb56-312" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; summarise: now 224 rows and 4 columns, 2 group variables remaining (year, species)</span></span>
<span id="cb56-313"><a href="#cb56-313" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ungroup: no grouping variables</span></span>
<span id="cb56-314"><a href="#cb56-314" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pivot_wider: reorganized (zero_catch, n) into (N, Y) [was 224x4, now 112x4]</span></span>
<span id="cb56-315"><a href="#cb56-315" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: new variable 'prop_z' (double) with 112 unique values and 0% NA</span></span>
<span id="cb56-316"><a href="#cb56-316" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         new variable 'q' (double) with one unique value and 0% NA</span></span>
<span id="cb56-317"><a href="#cb56-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-318"><a href="#cb56-318" aria-hidden="true" tabindex="-1"></a>q4 <span class="ot">&lt;-</span> dat <span class="sc">|&gt;</span> </span>
<span id="cb56-319"><a href="#cb56-319" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(quarter <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-320"><a href="#cb56-320" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, haul.id) <span class="sc">|&gt;</span> </span>
<span id="cb56-321"><a href="#cb56-321" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">zero_catch =</span> <span class="fu">ifelse</span>(<span class="fu">sum</span>(density) <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"Y"</span>, <span class="st">"N"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb56-322"><a href="#cb56-322" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-323"><a href="#cb56-323" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, species, zero_catch) <span class="sc">|&gt;</span> </span>
<span id="cb56-324"><a href="#cb56-324" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb56-325"><a href="#cb56-325" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-326"><a href="#cb56-326" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> zero_catch, <span class="at">values_from =</span> n) <span class="sc">|&gt;</span> </span>
<span id="cb56-327"><a href="#cb56-327" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop_z =</span> Y <span class="sc">/</span> (N<span class="sc">+</span>Y), </span>
<span id="cb56-328"><a href="#cb56-328" aria-hidden="true" tabindex="-1"></a>         <span class="at">q =</span> <span class="dv">4</span>)  </span>
<span id="cb56-329"><a href="#cb56-329" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter: removed 1,603,130 rows (60%), 1,058,955 rows remaining</span></span>
<span id="cb56-330"><a href="#cb56-330" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: 2 grouping variables (species, haul.id)</span></span>
<span id="cb56-331"><a href="#cb56-331" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate (grouped): new variable 'zero_catch' (character) with 2 unique values and 0% NA</span></span>
<span id="cb56-332"><a href="#cb56-332" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ungroup: no grouping variables</span></span>
<span id="cb56-333"><a href="#cb56-333" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; group_by: 3 grouping variables (year, species, zero_catch)</span></span>
<span id="cb56-334"><a href="#cb56-334" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; summarise: now 223 rows and 4 columns, 2 group variables remaining (year, species)</span></span>
<span id="cb56-335"><a href="#cb56-335" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ungroup: no grouping variables</span></span>
<span id="cb56-336"><a href="#cb56-336" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; pivot_wider: reorganized (zero_catch, n) into (N, Y) [was 223x4, now 112x4]</span></span>
<span id="cb56-337"><a href="#cb56-337" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: new variable 'prop_z' (double) with 110 unique values and 1% NA</span></span>
<span id="cb56-338"><a href="#cb56-338" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         new variable 'q' (double) with one unique value and 0% NA</span></span>
<span id="cb56-339"><a href="#cb56-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-340"><a href="#cb56-340" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">bind_rows</span>(q1, q4), <span class="fu">aes</span>(year, prop_z<span class="sc">*</span><span class="dv">100</span>, <span class="at">color =</span> <span class="fu">factor</span>(q))) <span class="sc">+</span></span>
<span id="cb56-341"><a href="#cb56-341" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb56-342"><a href="#cb56-342" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> species, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/very%20long%20data%20with%20all%20combinations%20of%20size%20and%20haul%20id-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Save the full catch data as dat_full. For adding the unique covariates, I only need the distinct trawl IDs, not the 1.7 million rows...</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co"># dat_full &lt;- dat</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co"># dat &lt;- dat |&gt; dplyr::select(-density, length_cm, species, haul.id.size) |&gt; distinct(haul.id, .keep_all = TRUE)</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="co"># # Check 0 catches</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="co"># dat_full |&gt;</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(species == "cod") |&gt;</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(haul.id) |&gt;</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   summarise(haul_dens = sum(density)) |&gt;</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   ungroup() |&gt;</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(!haul_dens == 0)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="add-in-the-environmental-variables" class="level2">
<h2 class="anchored" data-anchor-id="add-in-the-environmental-variables">Add in the environmental variables</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Only need 1 row per haul</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month_year =</span> <span class="fu">paste</span>(month, year, <span class="at">sep =</span> <span class="st">"_"</span>))</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: new variable 'month_year' (character) with 130 unique values and 0% NA</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>dat_haul <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(haul.id, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(lat, lon, year, month, quarter, month_year)</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; distinct: removed 2,652,709 rows (&gt;99%), 9,376 rows remaining</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="oxygen" class="level4">
<h4 class="anchored" data-anchor-id="oxygen">Oxygen</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Downloaded from here: https://resources.marine.copernicus.eu/?option=com_csw&amp;view=details&amp;product_id=BALTICSEA_REANALYSIS_BIO_003_012</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract raster points: https://gisday.wordpress.com/2014/03/24/extract-raster-values-from-points-using-r/comment-page-1/</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="co"># https://rpubs.com/boyerag/297592</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># https://pjbartlein.github.io/REarthSysSci/netCDF.html#get-a-variable</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the netCDF file</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>ncin <span class="ot">&lt;-</span> <span class="fu">nc_open</span>(<span class="st">"data/NEMO_Nordic_SCOBI/dataset-reanalysis-scobi-monthlymeans_1664182224542.nc"</span>)</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ncin)</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; File data/NEMO_Nordic_SCOBI/dataset-reanalysis-scobi-monthlymeans_1664182224542.nc (NC_FORMAT_CLASSIC):</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      1 variables (excluding dimension variables):</span></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         float o2b[longitude,latitude,time]   </span></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             long_name: Sea_floor_Dissolved_Oxygen_Concentration</span></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             missing_value: NaN</span></span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             standard_name: mole_concentration_of_dissolved_molecular_oxygen_in_sea_water</span></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             units: mmol m-3</span></span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _FillValue: NaN</span></span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _ChunkSizes: 1</span></span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              _ChunkSizes: 523</span></span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              _ChunkSizes: 383</span></span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      3 dimensions:</span></span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         time  Size:336 </span></span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             axis: T</span></span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             long_name: Validity time</span></span>
<span id="cb59-26"><a href="#cb59-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             standard_name: time</span></span>
<span id="cb59-27"><a href="#cb59-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             units: days since 1950-01-01 00:00:00</span></span>
<span id="cb59-28"><a href="#cb59-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             calendar: gregorian</span></span>
<span id="cb59-29"><a href="#cb59-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _ChunkSizes: 512</span></span>
<span id="cb59-30"><a href="#cb59-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _CoordinateAxisType: Time</span></span>
<span id="cb59-31"><a href="#cb59-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_min: 15721.5</span></span>
<span id="cb59-32"><a href="#cb59-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_max: 25917.5</span></span>
<span id="cb59-33"><a href="#cb59-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         latitude  Size:523 </span></span>
<span id="cb59-34"><a href="#cb59-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             axis: Y</span></span>
<span id="cb59-35"><a href="#cb59-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             standard_name: latitude</span></span>
<span id="cb59-36"><a href="#cb59-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             long_name: latitude</span></span>
<span id="cb59-37"><a href="#cb59-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             units: degrees_north</span></span>
<span id="cb59-38"><a href="#cb59-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _CoordinateAxisType: Lat</span></span>
<span id="cb59-39"><a href="#cb59-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_min: 48.49169921875</span></span>
<span id="cb59-40"><a href="#cb59-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_max: 65.8914184570312</span></span>
<span id="cb59-41"><a href="#cb59-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         longitude  Size:383 </span></span>
<span id="cb59-42"><a href="#cb59-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             standard_name: longitude</span></span>
<span id="cb59-43"><a href="#cb59-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             long_name: longitude</span></span>
<span id="cb59-44"><a href="#cb59-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             units: degrees_east</span></span>
<span id="cb59-45"><a href="#cb59-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             axis: X</span></span>
<span id="cb59-46"><a href="#cb59-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _CoordinateAxisType: Lon</span></span>
<span id="cb59-47"><a href="#cb59-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_min: 9.01375484466553</span></span>
<span id="cb59-48"><a href="#cb59-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_max: 30.2357654571533</span></span>
<span id="cb59-49"><a href="#cb59-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb59-50"><a href="#cb59-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     24 global attributes:</span></span>
<span id="cb59-51"><a href="#cb59-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         references: http://www.smhi.se</span></span>
<span id="cb59-52"><a href="#cb59-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         institution: Swedish Meterological and Hydrological Institute</span></span>
<span id="cb59-53"><a href="#cb59-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         history: See source and creation_date attributees</span></span>
<span id="cb59-54"><a href="#cb59-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Conventions: CF-1.5</span></span>
<span id="cb59-55"><a href="#cb59-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         contact: servicedesk_cmems@mercator-ocean.eu</span></span>
<span id="cb59-56"><a href="#cb59-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         comment: Provided by SMHI as a Copernicus Marine Environment Monitoring Service production unit</span></span>
<span id="cb59-57"><a href="#cb59-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         bullentin_type: reanalysis</span></span>
<span id="cb59-58"><a href="#cb59-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         cmems_product_id: BALTICSEA_REANALYSIS_BIO_003_012</span></span>
<span id="cb59-59"><a href="#cb59-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         title: CMEMS V4 Reanalysis: SCOBI model 3D fields (monthly means)</span></span>
<span id="cb59-60"><a href="#cb59-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         FROM_ORIGINAL_FILE__easternmost_longitude: 30.2357654571533</span></span>
<span id="cb59-61"><a href="#cb59-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         FROM_ORIGINAL_FILE__northernmost_latitude: 65.8914184570312</span></span>
<span id="cb59-62"><a href="#cb59-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         FROM_ORIGINAL_FILE__westernmost_longitude: 9.01375484466553</span></span>
<span id="cb59-63"><a href="#cb59-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         FROM_ORIGINAL_FILE__southernmost_latitude: 48.49169921875</span></span>
<span id="cb59-64"><a href="#cb59-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         shallowest_depth: 1.50136542320251</span></span>
<span id="cb59-65"><a href="#cb59-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         deepest_depth: 711.059204101562</span></span>
<span id="cb59-66"><a href="#cb59-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         source: SMHI reanalysis run NORDIC-NS2_1d_20201201_20201201</span></span>
<span id="cb59-67"><a href="#cb59-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         file_quality_index: 1</span></span>
<span id="cb59-68"><a href="#cb59-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         creation_date: 2021-11-09 UTC</span></span>
<span id="cb59-69"><a href="#cb59-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         bullentin_date: 20201201</span></span>
<span id="cb59-70"><a href="#cb59-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         start_date: 2020-12-01 UTC</span></span>
<span id="cb59-71"><a href="#cb59-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         stop_date: 2020-12-01 UTC</span></span>
<span id="cb59-72"><a href="#cb59-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         start_time: 00:00 UTC</span></span>
<span id="cb59-73"><a href="#cb59-73" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         stop_time: 00:00 UTC</span></span>
<span id="cb59-74"><a href="#cb59-74" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         _CoordSysBuilder: ucar.nc2.dataset.conv.CF1Convention</span></span>
<span id="cb59-75"><a href="#cb59-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-76"><a href="#cb59-76" aria-hidden="true" tabindex="-1"></a><span class="co"># Get longitude and latitude</span></span>
<span id="cb59-77"><a href="#cb59-77" aria-hidden="true" tabindex="-1"></a>lon <span class="ot">&lt;-</span> <span class="fu">ncvar_get</span>(ncin,<span class="st">"longitude"</span>)</span>
<span id="cb59-78"><a href="#cb59-78" aria-hidden="true" tabindex="-1"></a>nlon <span class="ot">&lt;-</span> <span class="fu">dim</span>(lon)</span>
<span id="cb59-79"><a href="#cb59-79" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lon)</span>
<span id="cb59-80"><a href="#cb59-80" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 9.013755 9.069310 9.124865 9.180420 9.235975 9.291530</span></span>
<span id="cb59-81"><a href="#cb59-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-82"><a href="#cb59-82" aria-hidden="true" tabindex="-1"></a>lat <span class="ot">&lt;-</span> <span class="fu">ncvar_get</span>(ncin,<span class="st">"latitude"</span>)</span>
<span id="cb59-83"><a href="#cb59-83" aria-hidden="true" tabindex="-1"></a>nlat <span class="ot">&lt;-</span> <span class="fu">dim</span>(lat)</span>
<span id="cb59-84"><a href="#cb59-84" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lat)</span>
<span id="cb59-85"><a href="#cb59-85" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 48.49170 48.52503 48.55836 48.59170 48.62503 48.65836</span></span>
<span id="cb59-86"><a href="#cb59-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-87"><a href="#cb59-87" aria-hidden="true" tabindex="-1"></a><span class="co"># Get time</span></span>
<span id="cb59-88"><a href="#cb59-88" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">ncvar_get</span>(ncin,<span class="st">"time"</span>)</span>
<span id="cb59-89"><a href="#cb59-89" aria-hidden="true" tabindex="-1"></a>time</span>
<span id="cb59-90"><a href="#cb59-90" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [1] 15721.5 15751.0 15780.5 15811.0 15841.5 15872.0 15902.5 15933.5 15964.0</span></span>
<span id="cb59-91"><a href="#cb59-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [10] 15994.5 16025.0 16055.5 16086.5 16116.0 16145.5 16176.0 16206.5 16237.0</span></span>
<span id="cb59-92"><a href="#cb59-92" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [19] 16267.5 16298.5 16329.0 16359.5 16390.0 16420.5 16451.5 16481.0 16510.5</span></span>
<span id="cb59-93"><a href="#cb59-93" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [28] 16541.0 16571.5 16602.0 16632.5 16663.5 16694.0 16724.5 16755.0 16785.5</span></span>
<span id="cb59-94"><a href="#cb59-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [37] 16816.5 16846.5 16876.5 16907.0 16937.5 16968.0 16998.5 17029.5 17060.0</span></span>
<span id="cb59-95"><a href="#cb59-95" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [46] 17090.5 17121.0 17151.5 17182.5 17212.0 17241.5 17272.0 17302.5 17333.0</span></span>
<span id="cb59-96"><a href="#cb59-96" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [55] 17363.5 17394.5 17425.0 17455.5 17486.0 17516.5 17547.5 17577.0 17606.5</span></span>
<span id="cb59-97"><a href="#cb59-97" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [64] 17637.0 17667.5 17698.0 17728.5 17759.5 17790.0 17820.5 17851.0 17881.5</span></span>
<span id="cb59-98"><a href="#cb59-98" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [73] 17912.5 17942.0 17971.5 18002.0 18032.5 18063.0 18093.5 18124.5 18155.0</span></span>
<span id="cb59-99"><a href="#cb59-99" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [82] 18185.5 18216.0 18246.5 18277.5 18307.5 18337.5 18368.0 18398.5 18429.0</span></span>
<span id="cb59-100"><a href="#cb59-100" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [91] 18459.5 18490.5 18521.0 18551.5 18582.0 18612.5 18643.5 18673.0 18702.5</span></span>
<span id="cb59-101"><a href="#cb59-101" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [100] 18733.0 18763.5 18794.0 18824.5 18855.5 18886.0 18916.5 18947.0 18977.5</span></span>
<span id="cb59-102"><a href="#cb59-102" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [109] 19008.5 19038.0 19067.5 19098.0 19128.5 19159.0 19189.5 19220.5 19251.0</span></span>
<span id="cb59-103"><a href="#cb59-103" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [118] 19281.5 19312.0 19342.5 19373.5 19403.0 19432.5 19463.0 19493.5 19524.0</span></span>
<span id="cb59-104"><a href="#cb59-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [127] 19554.5 19585.5 19616.0 19646.5 19677.0 19707.5 19738.5 19768.5 19798.5</span></span>
<span id="cb59-105"><a href="#cb59-105" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [136] 19829.0 19859.5 19890.0 19920.5 19951.5 19982.0 20012.5 20043.0 20073.5</span></span>
<span id="cb59-106"><a href="#cb59-106" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [145] 20104.5 20134.0 20163.5 20194.0 20224.5 20255.0 20285.5 20316.5 20347.0</span></span>
<span id="cb59-107"><a href="#cb59-107" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [154] 20377.5 20408.0 20438.5 20469.5 20499.0 20528.5 20559.0 20589.5 20620.0</span></span>
<span id="cb59-108"><a href="#cb59-108" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [163] 20650.5 20681.5 20712.0 20742.5 20773.0 20803.5 20834.5 20864.0 20893.5</span></span>
<span id="cb59-109"><a href="#cb59-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [172] 20924.0 20954.5 20985.0 21015.5 21046.5 21077.0 21107.5 21138.0 21168.5</span></span>
<span id="cb59-110"><a href="#cb59-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [181] 21199.5 21229.5 21259.5 21290.0 21320.5 21351.0 21381.5 21412.5 21443.0</span></span>
<span id="cb59-111"><a href="#cb59-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [190] 21473.5 21504.0 21534.5 21565.5 21595.0 21624.5 21655.0 21685.5 21716.0</span></span>
<span id="cb59-112"><a href="#cb59-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [199] 21746.5 21777.5 21808.0 21838.5 21869.0 21899.5 21930.5 21960.0 21989.5</span></span>
<span id="cb59-113"><a href="#cb59-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [208] 22020.0 22050.5 22081.0 22111.5 22142.5 22173.0 22203.5 22234.0 22264.5</span></span>
<span id="cb59-114"><a href="#cb59-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [217] 22295.5 22325.0 22354.5 22385.0 22415.5 22446.0 22476.5 22507.5 22538.0</span></span>
<span id="cb59-115"><a href="#cb59-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [226] 22568.5 22599.0 22629.5 22660.5 22690.5 22720.5 22751.0 22781.5 22812.0</span></span>
<span id="cb59-116"><a href="#cb59-116" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [235] 22842.5 22873.5 22904.0 22934.5 22965.0 22995.5 23026.5 23056.0 23085.5</span></span>
<span id="cb59-117"><a href="#cb59-117" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [244] 23116.0 23146.5 23177.0 23207.5 23238.5 23269.0 23299.5 23330.0 23360.5</span></span>
<span id="cb59-118"><a href="#cb59-118" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [253] 23391.5 23421.0 23450.5 23481.0 23511.5 23542.0 23572.5 23603.5 23634.0</span></span>
<span id="cb59-119"><a href="#cb59-119" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [262] 23664.5 23695.0 23725.5 23756.5 23786.0 23815.5 23846.0 23876.5 23907.0</span></span>
<span id="cb59-120"><a href="#cb59-120" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [271] 23937.5 23968.5 23999.0 24029.5 24060.0 24090.5 24121.5 24151.5 24181.5</span></span>
<span id="cb59-121"><a href="#cb59-121" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [280] 24212.0 24242.5 24273.0 24303.5 24334.5 24365.0 24395.5 24426.0 24456.5</span></span>
<span id="cb59-122"><a href="#cb59-122" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [289] 24487.5 24517.0 24546.5 24577.0 24607.5 24638.0 24668.5 24699.5 24730.0</span></span>
<span id="cb59-123"><a href="#cb59-123" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [298] 24760.5 24791.0 24821.5 24852.5 24882.0 24911.5 24942.0 24972.5 25003.0</span></span>
<span id="cb59-124"><a href="#cb59-124" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [307] 25033.5 25064.5 25095.0 25125.5 25156.0 25186.5 25217.5 25247.0 25276.5</span></span>
<span id="cb59-125"><a href="#cb59-125" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [316] 25307.0 25337.5 25368.0 25398.5 25429.5 25460.0 25490.5 25521.0 25551.5</span></span>
<span id="cb59-126"><a href="#cb59-126" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [325] 25582.5 25612.5 25642.5 25673.0 25703.5 25734.0 25764.5 25795.5 25826.0</span></span>
<span id="cb59-127"><a href="#cb59-127" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [334] 25856.5 25887.0 25917.5</span></span>
<span id="cb59-128"><a href="#cb59-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-129"><a href="#cb59-129" aria-hidden="true" tabindex="-1"></a>tunits <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="st">"time"</span>,<span class="st">"units"</span>)</span>
<span id="cb59-130"><a href="#cb59-130" aria-hidden="true" tabindex="-1"></a>nt <span class="ot">&lt;-</span> <span class="fu">dim</span>(time)</span>
<span id="cb59-131"><a href="#cb59-131" aria-hidden="true" tabindex="-1"></a>nt</span>
<span id="cb59-132"><a href="#cb59-132" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 336</span></span>
<span id="cb59-133"><a href="#cb59-133" aria-hidden="true" tabindex="-1"></a>tunits</span>
<span id="cb59-134"><a href="#cb59-134" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $hasatt</span></span>
<span id="cb59-135"><a href="#cb59-135" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb59-136"><a href="#cb59-136" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb59-137"><a href="#cb59-137" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $value</span></span>
<span id="cb59-138"><a href="#cb59-138" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "days since 1950-01-01 00:00:00"</span></span>
<span id="cb59-139"><a href="#cb59-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-140"><a href="#cb59-140" aria-hidden="true" tabindex="-1"></a><span class="co"># Get oxygen</span></span>
<span id="cb59-141"><a href="#cb59-141" aria-hidden="true" tabindex="-1"></a>dname <span class="ot">&lt;-</span> <span class="st">"o2b"</span></span>
<span id="cb59-142"><a href="#cb59-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-143"><a href="#cb59-143" aria-hidden="true" tabindex="-1"></a>oxy_array <span class="ot">&lt;-</span> <span class="fu">ncvar_get</span>(ncin,dname)</span>
<span id="cb59-144"><a href="#cb59-144" aria-hidden="true" tabindex="-1"></a>dlname <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,dname,<span class="st">"long_name"</span>)</span>
<span id="cb59-145"><a href="#cb59-145" aria-hidden="true" tabindex="-1"></a>dunits <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,dname,<span class="st">"units"</span>)</span>
<span id="cb59-146"><a href="#cb59-146" aria-hidden="true" tabindex="-1"></a>fillvalue <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,dname,<span class="st">"_FillValue"</span>)</span>
<span id="cb59-147"><a href="#cb59-147" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(oxy_array)</span>
<span id="cb59-148"><a href="#cb59-148" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 383 523 336</span></span>
<span id="cb59-149"><a href="#cb59-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-150"><a href="#cb59-150" aria-hidden="true" tabindex="-1"></a><span class="co"># Get global attributes</span></span>
<span id="cb59-151"><a href="#cb59-151" aria-hidden="true" tabindex="-1"></a>title <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"title"</span>)</span>
<span id="cb59-152"><a href="#cb59-152" aria-hidden="true" tabindex="-1"></a>institution <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"institution"</span>)</span>
<span id="cb59-153"><a href="#cb59-153" aria-hidden="true" tabindex="-1"></a>datasource <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"source"</span>)</span>
<span id="cb59-154"><a href="#cb59-154" aria-hidden="true" tabindex="-1"></a>references <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"references"</span>)</span>
<span id="cb59-155"><a href="#cb59-155" aria-hidden="true" tabindex="-1"></a>history <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"history"</span>)</span>
<span id="cb59-156"><a href="#cb59-156" aria-hidden="true" tabindex="-1"></a>Conventions <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"Conventions"</span>)</span>
<span id="cb59-157"><a href="#cb59-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-158"><a href="#cb59-158" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert time: split the time units string into fields</span></span>
<span id="cb59-159"><a href="#cb59-159" aria-hidden="true" tabindex="-1"></a>tustr <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(tunits<span class="sc">$</span>value, <span class="st">" "</span>)</span>
<span id="cb59-160"><a href="#cb59-160" aria-hidden="true" tabindex="-1"></a>tdstr <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(<span class="fu">unlist</span>(tustr)[<span class="dv">3</span>], <span class="st">"-"</span>)</span>
<span id="cb59-161"><a href="#cb59-161" aria-hidden="true" tabindex="-1"></a>tmonth <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">unlist</span>(tdstr)[<span class="dv">2</span>])</span>
<span id="cb59-162"><a href="#cb59-162" aria-hidden="true" tabindex="-1"></a>tday <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">unlist</span>(tdstr)[<span class="dv">3</span>])</span>
<span id="cb59-163"><a href="#cb59-163" aria-hidden="true" tabindex="-1"></a>tyear <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">unlist</span>(tdstr)[<span class="dv">1</span>])</span>
<span id="cb59-164"><a href="#cb59-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-165"><a href="#cb59-165" aria-hidden="true" tabindex="-1"></a><span class="co"># Here I deviate from the guide a little bit. Save this info:</span></span>
<span id="cb59-166"><a href="#cb59-166" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">&lt;-</span> <span class="fu">chron</span>(time, <span class="at">origin =</span> <span class="fu">c</span>(tmonth, tday, tyear))</span>
<span id="cb59-167"><a href="#cb59-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-168"><a href="#cb59-168" aria-hidden="true" tabindex="-1"></a><span class="co"># Crop the date variable</span></span>
<span id="cb59-169"><a href="#cb59-169" aria-hidden="true" tabindex="-1"></a>months <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(dates, <span class="dv">2</span>, <span class="dv">3</span>))</span>
<span id="cb59-170"><a href="#cb59-170" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(dates, <span class="dv">8</span>, <span class="dv">9</span>))</span>
<span id="cb59-171"><a href="#cb59-171" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(years <span class="sc">&gt;</span> <span class="dv">90</span>, <span class="dv">1900</span> <span class="sc">+</span> years, <span class="dv">2000</span> <span class="sc">+</span> years)</span>
<span id="cb59-172"><a href="#cb59-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-173"><a href="#cb59-173" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace netCDF fill values with NA's</span></span>
<span id="cb59-174"><a href="#cb59-174" aria-hidden="true" tabindex="-1"></a>oxy_array[oxy_array <span class="sc">==</span> fillvalue<span class="sc">$</span>value] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb59-175"><a href="#cb59-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-176"><a href="#cb59-176" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(oxy_array)</span>
<span id="cb59-177"><a href="#cb59-177" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 383 523 336</span></span>
<span id="cb59-178"><a href="#cb59-178" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">dim</span>(oxy_array))</span>
<span id="cb59-179"><a href="#cb59-179" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  int [1:3] 383 523 336</span></span>
<span id="cb59-180"><a href="#cb59-180" aria-hidden="true" tabindex="-1"></a><span class="co"># The third slot is the date index</span></span>
<span id="cb59-181"><a href="#cb59-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-182"><a href="#cb59-182" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through all "dates", put into a list </span></span>
<span id="cb59-183"><a href="#cb59-183" aria-hidden="true" tabindex="-1"></a>dlist <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb59-184"><a href="#cb59-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-185"><a href="#cb59-185" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(months)) {</span>
<span id="cb59-186"><a href="#cb59-186" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb59-187"><a href="#cb59-187" aria-hidden="true" tabindex="-1"></a>  oxy_sub <span class="ot">&lt;-</span> oxy_array[, , i]</span>
<span id="cb59-188"><a href="#cb59-188" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-189"><a href="#cb59-189" aria-hidden="true" tabindex="-1"></a>  dlist[[i]] <span class="ot">&lt;-</span> oxy_sub</span>
<span id="cb59-190"><a href="#cb59-190" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb59-191"><a href="#cb59-191" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb59-192"><a href="#cb59-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-193"><a href="#cb59-193" aria-hidden="true" tabindex="-1"></a><span class="co"># Name the list</span></span>
<span id="cb59-194"><a href="#cb59-194" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dlist) <span class="ot">&lt;-</span> <span class="fu">paste</span>(months, years, <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb59-195"><a href="#cb59-195" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dlist)</span>
<span id="cb59-196"><a href="#cb59-196" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 336</span></span>
<span id="cb59-197"><a href="#cb59-197" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-198"><a href="#cb59-198" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-199"><a href="#cb59-199" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-200"><a href="#cb59-200" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-201"><a href="#cb59-201" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-202"><a href="#cb59-202" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-203"><a href="#cb59-203" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-204"><a href="#cb59-204" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-205"><a href="#cb59-205" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-206"><a href="#cb59-206" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1993: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-207"><a href="#cb59-207" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1993: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-208"><a href="#cb59-208" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1993: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-209"><a href="#cb59-209" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-210"><a href="#cb59-210" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-211"><a href="#cb59-211" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-212"><a href="#cb59-212" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-213"><a href="#cb59-213" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-214"><a href="#cb59-214" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-215"><a href="#cb59-215" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-216"><a href="#cb59-216" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-217"><a href="#cb59-217" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-218"><a href="#cb59-218" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1994: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-219"><a href="#cb59-219" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1994: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-220"><a href="#cb59-220" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1994: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-221"><a href="#cb59-221" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-222"><a href="#cb59-222" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-223"><a href="#cb59-223" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-224"><a href="#cb59-224" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-225"><a href="#cb59-225" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-226"><a href="#cb59-226" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-227"><a href="#cb59-227" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-228"><a href="#cb59-228" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-229"><a href="#cb59-229" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-230"><a href="#cb59-230" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1995: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-231"><a href="#cb59-231" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1995: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-232"><a href="#cb59-232" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1995: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-233"><a href="#cb59-233" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-234"><a href="#cb59-234" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-235"><a href="#cb59-235" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-236"><a href="#cb59-236" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-237"><a href="#cb59-237" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-238"><a href="#cb59-238" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-239"><a href="#cb59-239" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-240"><a href="#cb59-240" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-241"><a href="#cb59-241" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-242"><a href="#cb59-242" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1996: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-243"><a href="#cb59-243" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1996: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-244"><a href="#cb59-244" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1996: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-245"><a href="#cb59-245" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-246"><a href="#cb59-246" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-247"><a href="#cb59-247" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-248"><a href="#cb59-248" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-249"><a href="#cb59-249" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-250"><a href="#cb59-250" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-251"><a href="#cb59-251" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-252"><a href="#cb59-252" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-253"><a href="#cb59-253" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-254"><a href="#cb59-254" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1997: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-255"><a href="#cb59-255" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1997: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-256"><a href="#cb59-256" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1997: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-257"><a href="#cb59-257" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-258"><a href="#cb59-258" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-259"><a href="#cb59-259" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-260"><a href="#cb59-260" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-261"><a href="#cb59-261" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-262"><a href="#cb59-262" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-263"><a href="#cb59-263" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-264"><a href="#cb59-264" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-265"><a href="#cb59-265" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-266"><a href="#cb59-266" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1998: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-267"><a href="#cb59-267" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1998: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-268"><a href="#cb59-268" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1998: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-269"><a href="#cb59-269" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-270"><a href="#cb59-270" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-271"><a href="#cb59-271" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-272"><a href="#cb59-272" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-273"><a href="#cb59-273" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-274"><a href="#cb59-274" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-275"><a href="#cb59-275" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-276"><a href="#cb59-276" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-277"><a href="#cb59-277" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-278"><a href="#cb59-278" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1999: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-279"><a href="#cb59-279" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1999: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-280"><a href="#cb59-280" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1999: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-281"><a href="#cb59-281" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-282"><a href="#cb59-282" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-283"><a href="#cb59-283" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-284"><a href="#cb59-284" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-285"><a href="#cb59-285" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-286"><a href="#cb59-286" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-287"><a href="#cb59-287" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-288"><a href="#cb59-288" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-289"><a href="#cb59-289" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-290"><a href="#cb59-290" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_2000: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-291"><a href="#cb59-291" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_2000: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-292"><a href="#cb59-292" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_2000: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-293"><a href="#cb59-293" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_2001 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-294"><a href="#cb59-294" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_2001 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-295"><a href="#cb59-295" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_2001 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb59-296"><a href="#cb59-296" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [list output truncated]</span></span>
<span id="cb59-297"><a href="#cb59-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-298"><a href="#cb59-298" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data holding object</span></span>
<span id="cb59-299"><a href="#cb59-299" aria-hidden="true" tabindex="-1"></a>oxy_data_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb59-300"><a href="#cb59-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-301"><a href="#cb59-301" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each month_year and extract raster values for the cpue data points</span></span>
<span id="cb59-302"><a href="#cb59-302" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">unique</span>(dat_haul<span class="sc">$</span>month_year)) { <span class="co"># We can use q1 as looping index, doesn't matter!</span></span>
<span id="cb59-303"><a href="#cb59-303" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb59-304"><a href="#cb59-304" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set plot limits</span></span>
<span id="cb59-305"><a href="#cb59-305" aria-hidden="true" tabindex="-1"></a>  ymin <span class="ot">=</span> <span class="dv">54</span>; ymax <span class="ot">=</span> <span class="dv">58</span>; xmin <span class="ot">=</span> <span class="dv">12</span>; xmax <span class="ot">=</span> <span class="dv">22</span></span>
<span id="cb59-306"><a href="#cb59-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-307"><a href="#cb59-307" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Subset a month-year combination</span></span>
<span id="cb59-308"><a href="#cb59-308" aria-hidden="true" tabindex="-1"></a>  oxy_slice <span class="ot">&lt;-</span> dlist[[i]]</span>
<span id="cb59-309"><a href="#cb59-309" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb59-310"><a href="#cb59-310" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create raster for that year (i)</span></span>
<span id="cb59-311"><a href="#cb59-311" aria-hidden="true" tabindex="-1"></a>  r <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="fu">t</span>(oxy_slice), <span class="at">xmn =</span> <span class="fu">min</span>(lon), <span class="at">xmx =</span> <span class="fu">max</span>(lon), <span class="at">ymn =</span> <span class="fu">min</span>(lat), <span class="at">ymx =</span> <span class="fu">max</span>(lat),</span>
<span id="cb59-312"><a href="#cb59-312" aria-hidden="true" tabindex="-1"></a>              <span class="at">crs =</span> <span class="fu">CRS</span>(<span class="st">"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs+ towgs84=0,0,0"</span>))</span>
<span id="cb59-313"><a href="#cb59-313" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb59-314"><a href="#cb59-314" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Flip...</span></span>
<span id="cb59-315"><a href="#cb59-315" aria-hidden="true" tabindex="-1"></a>  r <span class="ot">&lt;-</span> <span class="fu">flip</span>(r, <span class="at">direction =</span> <span class="st">'y'</span>)</span>
<span id="cb59-316"><a href="#cb59-316" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb59-317"><a href="#cb59-317" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(r, <span class="at">main =</span> <span class="fu">paste</span>(i), <span class="at">ylim =</span> <span class="fu">c</span>(ymin, ymax), <span class="at">xlim =</span> <span class="fu">c</span>(xmin, xmax))</span>
<span id="cb59-318"><a href="#cb59-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-319"><a href="#cb59-319" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter the same year (i) in the cpue data and select only coordinates</span></span>
<span id="cb59-320"><a href="#cb59-320" aria-hidden="true" tabindex="-1"></a>  d_slice <span class="ot">&lt;-</span> dat_haul <span class="sc">%&gt;%</span> <span class="fu">filter</span>(month_year <span class="sc">==</span> i) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(lon, lat)</span>
<span id="cb59-321"><a href="#cb59-321" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb59-322"><a href="#cb59-322" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make into a SpatialPoints object</span></span>
<span id="cb59-323"><a href="#cb59-323" aria-hidden="true" tabindex="-1"></a>  data_sp <span class="ot">&lt;-</span> <span class="fu">SpatialPoints</span>(d_slice)</span>
<span id="cb59-324"><a href="#cb59-324" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb59-325"><a href="#cb59-325" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract raster value (oxygen)</span></span>
<span id="cb59-326"><a href="#cb59-326" aria-hidden="true" tabindex="-1"></a>  rasValue <span class="ot">&lt;-</span> raster<span class="sc">::</span><span class="fu">extract</span>(r, data_sp)</span>
<span id="cb59-327"><a href="#cb59-327" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb59-328"><a href="#cb59-328" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now we want to plot the results of the raster extractions by plotting the cpue data points over a raster and saving it for each year.</span></span>
<span id="cb59-329"><a href="#cb59-329" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make the SpatialPoints object into a raster again (for plot)</span></span>
<span id="cb59-330"><a href="#cb59-330" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(data_sp)</span>
<span id="cb59-331"><a href="#cb59-331" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb59-332"><a href="#cb59-332" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add in the raster value in the df holding the coordinates for the cpue data</span></span>
<span id="cb59-333"><a href="#cb59-333" aria-hidden="true" tabindex="-1"></a>  d_slice<span class="sc">$</span>oxy <span class="ot">&lt;-</span> rasValue</span>
<span id="cb59-334"><a href="#cb59-334" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb59-335"><a href="#cb59-335" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add in which year</span></span>
<span id="cb59-336"><a href="#cb59-336" aria-hidden="true" tabindex="-1"></a>  d_slice<span class="sc">$</span>month_year <span class="ot">&lt;-</span> i</span>
<span id="cb59-337"><a href="#cb59-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-338"><a href="#cb59-338" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now the unit of oxygen is mmol/m3. I want it to be ml/L. The original model is in unit ml/L</span></span>
<span id="cb59-339"><a href="#cb59-339" aria-hidden="true" tabindex="-1"></a>  <span class="co"># and it's been converted by the data host. Since it was converted without accounting for</span></span>
<span id="cb59-340"><a href="#cb59-340" aria-hidden="true" tabindex="-1"></a>  <span class="co"># pressure or temperature, I can simply use the following conversion factor:</span></span>
<span id="cb59-341"><a href="#cb59-341" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 1 ml/l = 103/22.391 = 44.661 μmol/l -&gt; 1 ml/l = 0.044661 mmol/l = 44.661 mmol/m^3 -&gt; 0.0223909 ml/l = 1mmol/m^3</span></span>
<span id="cb59-342"><a href="#cb59-342" aria-hidden="true" tabindex="-1"></a>  <span class="co"># https://ocean.ices.dk/tools/unitconversion.aspx</span></span>
<span id="cb59-343"><a href="#cb59-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-344"><a href="#cb59-344" aria-hidden="true" tabindex="-1"></a>  d_slice<span class="sc">$</span>oxy <span class="ot">&lt;-</span> d_slice<span class="sc">$</span>oxy <span class="sc">*</span> <span class="fl">0.0223909</span></span>
<span id="cb59-345"><a href="#cb59-345" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-346"><a href="#cb59-346" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add each years' data in the list</span></span>
<span id="cb59-347"><a href="#cb59-347" aria-hidden="true" tabindex="-1"></a>  oxy_data_list[[i]] <span class="ot">&lt;-</span> d_slice</span>
<span id="cb59-348"><a href="#cb59-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-349"><a href="#cb59-349" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb59-350"><a href="#cb59-350" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter: removed 9,315 rows (99%), 61 rows remaining</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,336 rows (&gt;99%), 40 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,358 rows (&gt;99%), 18 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,360 rows (&gt;99%), 16 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,331 rows (&gt;99%), 45 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,313 rows (99%), 63 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,344 rows (&gt;99%), 32 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,296 rows (99%), 80 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,365 rows (&gt;99%), 11 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,314 rows (99%), 62 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,259 rows (99%), 117 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,339 rows (&gt;99%), 37 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,355 rows (&gt;99%), 21 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,351 rows (&gt;99%), 25 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,348 rows (&gt;99%), 28 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,295 rows (99%), 81 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,328 rows (99%), 48 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,322 rows (99%), 54 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,357 rows (&gt;99%), 19 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,331 rows (&gt;99%), 45 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,360 rows (&gt;99%), 16 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,321 rows (99%), 55 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,306 rows (99%), 70 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,287 rows (99%), 89 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,361 rows (&gt;99%), 15 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,306 rows (99%), 70 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,371 rows (&gt;99%), 5 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,309 rows (99%), 67 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,268 rows (99%), 108 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,323 rows (99%), 53 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,360 rows (&gt;99%), 16 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-31.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,327 rows (99%), 49 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-32.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,357 rows (&gt;99%), 19 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-33.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,267 rows (99%), 109 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-34.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,295 rows (99%), 81 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-35.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,364 rows (&gt;99%), 12 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-36.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,287 rows (99%), 89 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-37.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,371 rows (&gt;99%), 5 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-38.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,312 rows (99%), 64 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-39.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,330 rows (&gt;99%), 46 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-40.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,287 rows (99%), 89 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-41.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,250 rows (99%), 126 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-42.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,294 rows (99%), 82 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-43.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,260 rows (99%), 116 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-44.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,283 rows (99%), 93 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-45.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,324 rows (99%), 52 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-46.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,270 rows (99%), 106 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-47.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,365 rows (&gt;99%), 11 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-48.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,271 rows (99%), 105 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-49.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,320 rows (99%), 56 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-50.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,259 rows (99%), 117 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-51.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,365 rows (&gt;99%), 11 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-52.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,242 rows (99%), 134 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-53.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,303 rows (99%), 73 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-54.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,300 rows (99%), 76 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-55.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,343 rows (&gt;99%), 33 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-56.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,235 rows (98%), 141 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-57.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,299 rows (99%), 77 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-58.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,250 rows (99%), 126 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-59.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,353 rows (&gt;99%), 23 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-60.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,374 rows (&gt;99%), 2 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-61.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,261 rows (99%), 115 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-62.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,303 rows (99%), 73 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-63.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,265 rows (99%), 111 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-64.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,351 rows (&gt;99%), 25 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-65.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,362 rows (&gt;99%), 14 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-66.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,246 rows (99%), 130 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-67.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,271 rows (99%), 105 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-68.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,237 rows (99%), 139 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-69.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,357 rows (&gt;99%), 19 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-70.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,365 rows (&gt;99%), 11 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-71.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,256 rows (99%), 120 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-72.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,274 rows (99%), 102 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-73.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,247 rows (99%), 129 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-74.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,359 rows (&gt;99%), 17 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-75.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,346 rows (&gt;99%), 30 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-76.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,228 rows (98%), 148 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-77.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,265 rows (99%), 111 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-78.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,233 rows (98%), 143 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-79.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,368 rows (&gt;99%), 8 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-80.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,347 rows (&gt;99%), 29 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-81.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,235 rows (98%), 141 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-82.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,276 rows (99%), 100 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-83.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,239 rows (99%), 137 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-84.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,351 rows (&gt;99%), 25 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-85.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,214 rows (98%), 162 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-86.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,295 rows (99%), 81 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-87.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,247 rows (99%), 129 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-88.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,344 rows (&gt;99%), 32 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-89.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,357 rows (&gt;99%), 19 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-90.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,294 rows (99%), 82 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-91.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,234 rows (98%), 142 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-92.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,361 rows (&gt;99%), 15 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-93.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,283 rows (99%), 93 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-94.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,351 rows (&gt;99%), 25 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-95.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,238 rows (99%), 138 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-96.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,246 rows (99%), 130 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-97.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,256 rows (99%), 120 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-98.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,363 rows (&gt;99%), 13 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-99.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,361 rows (&gt;99%), 15 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-100.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,224 rows (98%), 152 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-101.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,320 rows (99%), 56 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-102.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,250 rows (99%), 126 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-103.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,342 rows (&gt;99%), 34 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-104.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,360 rows (&gt;99%), 16 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-105.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,217 rows (98%), 159 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-106.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,298 rows (99%), 78 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-107.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,227 rows (98%), 149 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-108.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,359 rows (&gt;99%), 17 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-109.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,284 rows (99%), 92 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-110.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,236 rows (99%), 140 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-111.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,192 rows (98%), 184 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-112.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,362 rows (&gt;99%), 14 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-113.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,361 rows (&gt;99%), 15 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-114.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,245 rows (99%), 131 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-115.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,261 rows (99%), 115 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-116.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,191 rows (98%), 185 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-117.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,351 rows (&gt;99%), 25 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-118.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,361 rows (&gt;99%), 15 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-119.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,223 rows (98%), 153 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-120.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,273 rows (99%), 103 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-121.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,196 rows (98%), 180 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-122.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,345 rows (&gt;99%), 31 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-123.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,317 rows (99%), 59 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-124.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,317 rows (99%), 59 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-125.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,284 rows (99%), 92 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-126.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,325 rows (99%), 51 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-127.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,301 rows (99%), 75 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-128.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,356 rows (&gt;99%), 20 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-129.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,294 rows (99%), 82 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-17-130.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now create a data frame from the list of all annual values</span></span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>big_dat_oxy <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(oxy_data_list)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="temperature" class="level4">
<h4 class="anchored" data-anchor-id="temperature">Temperature</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the netCDF file</span></span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>ncin <span class="ot">&lt;-</span> <span class="fu">nc_open</span>(<span class="st">"data/NEMO_Nordic_SCOBI/dataset-reanalysis-nemo-monthlymeans_1664183191233.nc"</span>)</span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>                                        </span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ncin)</span>
<span id="cb190-5"><a href="#cb190-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; File data/NEMO_Nordic_SCOBI/dataset-reanalysis-nemo-monthlymeans_1664183191233.nc (NC_FORMAT_CLASSIC):</span></span>
<span id="cb190-6"><a href="#cb190-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb190-7"><a href="#cb190-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      1 variables (excluding dimension variables):</span></span>
<span id="cb190-8"><a href="#cb190-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         float bottomT[longitude,latitude,time]   </span></span>
<span id="cb190-9"><a href="#cb190-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             standard_name: sea_water_potential_temperature_at_sea_floor</span></span>
<span id="cb190-10"><a href="#cb190-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             units: degrees_C</span></span>
<span id="cb190-11"><a href="#cb190-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             long_name: Sea floor potential temperature</span></span>
<span id="cb190-12"><a href="#cb190-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             missing_value: NaN</span></span>
<span id="cb190-13"><a href="#cb190-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _FillValue: NaN</span></span>
<span id="cb190-14"><a href="#cb190-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _ChunkSizes: 1</span></span>
<span id="cb190-15"><a href="#cb190-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              _ChunkSizes: 523</span></span>
<span id="cb190-16"><a href="#cb190-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              _ChunkSizes: 383</span></span>
<span id="cb190-17"><a href="#cb190-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb190-18"><a href="#cb190-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      3 dimensions:</span></span>
<span id="cb190-19"><a href="#cb190-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         time  Size:336 </span></span>
<span id="cb190-20"><a href="#cb190-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             axis: T</span></span>
<span id="cb190-21"><a href="#cb190-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             long_name: Validity time</span></span>
<span id="cb190-22"><a href="#cb190-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             standard_name: time</span></span>
<span id="cb190-23"><a href="#cb190-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             units: days since 1950-01-01 00:00:00</span></span>
<span id="cb190-24"><a href="#cb190-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             calendar: gregorian</span></span>
<span id="cb190-25"><a href="#cb190-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _ChunkSizes: 512</span></span>
<span id="cb190-26"><a href="#cb190-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _CoordinateAxisType: Time</span></span>
<span id="cb190-27"><a href="#cb190-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_min: 15721.5</span></span>
<span id="cb190-28"><a href="#cb190-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_max: 25917.5</span></span>
<span id="cb190-29"><a href="#cb190-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         latitude  Size:523 </span></span>
<span id="cb190-30"><a href="#cb190-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             axis: Y</span></span>
<span id="cb190-31"><a href="#cb190-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             standard_name: latitude</span></span>
<span id="cb190-32"><a href="#cb190-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             long_name: latitude</span></span>
<span id="cb190-33"><a href="#cb190-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             units: degrees_north</span></span>
<span id="cb190-34"><a href="#cb190-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _CoordinateAxisType: Lat</span></span>
<span id="cb190-35"><a href="#cb190-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_min: 48.49169921875</span></span>
<span id="cb190-36"><a href="#cb190-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_max: 65.8914184570312</span></span>
<span id="cb190-37"><a href="#cb190-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         longitude  Size:383 </span></span>
<span id="cb190-38"><a href="#cb190-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             standard_name: longitude</span></span>
<span id="cb190-39"><a href="#cb190-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             long_name: longitude</span></span>
<span id="cb190-40"><a href="#cb190-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             units: degrees_east</span></span>
<span id="cb190-41"><a href="#cb190-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             axis: X</span></span>
<span id="cb190-42"><a href="#cb190-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _CoordinateAxisType: Lon</span></span>
<span id="cb190-43"><a href="#cb190-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_min: 9.01375484466553</span></span>
<span id="cb190-44"><a href="#cb190-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_max: 30.2357654571533</span></span>
<span id="cb190-45"><a href="#cb190-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb190-46"><a href="#cb190-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     24 global attributes:</span></span>
<span id="cb190-47"><a href="#cb190-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         references: http://www.smhi.se</span></span>
<span id="cb190-48"><a href="#cb190-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         institution: Swedish Meterological and Hydrological Institute</span></span>
<span id="cb190-49"><a href="#cb190-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         history: See source and creation_date attributees</span></span>
<span id="cb190-50"><a href="#cb190-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Conventions: CF-1.5</span></span>
<span id="cb190-51"><a href="#cb190-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         contact: servicedesk_cmems@mercator-ocean.eu</span></span>
<span id="cb190-52"><a href="#cb190-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         comment: Provided by SMHI as a Copernicus Marine Environment Monitoring Service production unit</span></span>
<span id="cb190-53"><a href="#cb190-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         bullentin_type: reanalysis</span></span>
<span id="cb190-54"><a href="#cb190-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         cmems_product_id: BALTICSEA_REANALYSIS_PHY_003_011</span></span>
<span id="cb190-55"><a href="#cb190-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         title: CMEMS V4 Reanalysis: NEMO model 3D fields (monthly means)</span></span>
<span id="cb190-56"><a href="#cb190-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         FROM_ORIGINAL_FILE__easternmost_longitude: 30.2357654571533</span></span>
<span id="cb190-57"><a href="#cb190-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         FROM_ORIGINAL_FILE__northernmost_latitude: 65.8914184570312</span></span>
<span id="cb190-58"><a href="#cb190-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         FROM_ORIGINAL_FILE__westernmost_longitude: 9.01375484466553</span></span>
<span id="cb190-59"><a href="#cb190-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         FROM_ORIGINAL_FILE__southernmost_latitude: 48.49169921875</span></span>
<span id="cb190-60"><a href="#cb190-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         shallowest_depth: 1.50136542320251</span></span>
<span id="cb190-61"><a href="#cb190-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         deepest_depth: 711.059204101562</span></span>
<span id="cb190-62"><a href="#cb190-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         source: SMHI reanalysis run NORDIC-NS2_1d_20201201_20201201</span></span>
<span id="cb190-63"><a href="#cb190-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         file_quality_index: 1</span></span>
<span id="cb190-64"><a href="#cb190-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         creation_date: 2021-11-09 UTC</span></span>
<span id="cb190-65"><a href="#cb190-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         bullentin_date: 20201201</span></span>
<span id="cb190-66"><a href="#cb190-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         start_date: 2020-12-01 UTC</span></span>
<span id="cb190-67"><a href="#cb190-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         stop_date: 2020-12-01 UTC</span></span>
<span id="cb190-68"><a href="#cb190-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         start_time: 00:00 UTC</span></span>
<span id="cb190-69"><a href="#cb190-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         stop_time: 00:00 UTC</span></span>
<span id="cb190-70"><a href="#cb190-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         _CoordSysBuilder: ucar.nc2.dataset.conv.CF1Convention</span></span>
<span id="cb190-71"><a href="#cb190-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-72"><a href="#cb190-72" aria-hidden="true" tabindex="-1"></a><span class="co"># Get longitude and latitude</span></span>
<span id="cb190-73"><a href="#cb190-73" aria-hidden="true" tabindex="-1"></a>lon <span class="ot">&lt;-</span> <span class="fu">ncvar_get</span>(ncin,<span class="st">"longitude"</span>)</span>
<span id="cb190-74"><a href="#cb190-74" aria-hidden="true" tabindex="-1"></a>nlon <span class="ot">&lt;-</span> <span class="fu">dim</span>(lon)</span>
<span id="cb190-75"><a href="#cb190-75" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lon)</span>
<span id="cb190-76"><a href="#cb190-76" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 9.013755 9.069310 9.124865 9.180420 9.235975 9.291530</span></span>
<span id="cb190-77"><a href="#cb190-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-78"><a href="#cb190-78" aria-hidden="true" tabindex="-1"></a>lat <span class="ot">&lt;-</span> <span class="fu">ncvar_get</span>(ncin,<span class="st">"latitude"</span>)</span>
<span id="cb190-79"><a href="#cb190-79" aria-hidden="true" tabindex="-1"></a>nlat <span class="ot">&lt;-</span> <span class="fu">dim</span>(lat)</span>
<span id="cb190-80"><a href="#cb190-80" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lat)</span>
<span id="cb190-81"><a href="#cb190-81" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 48.49170 48.52503 48.55836 48.59170 48.62503 48.65836</span></span>
<span id="cb190-82"><a href="#cb190-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-83"><a href="#cb190-83" aria-hidden="true" tabindex="-1"></a><span class="co"># Get time</span></span>
<span id="cb190-84"><a href="#cb190-84" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">ncvar_get</span>(ncin,<span class="st">"time"</span>)</span>
<span id="cb190-85"><a href="#cb190-85" aria-hidden="true" tabindex="-1"></a>time</span>
<span id="cb190-86"><a href="#cb190-86" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [1] 15721.5 15751.0 15780.5 15811.0 15841.5 15872.0 15902.5 15933.5 15964.0</span></span>
<span id="cb190-87"><a href="#cb190-87" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [10] 15994.5 16025.0 16055.5 16086.5 16116.0 16145.5 16176.0 16206.5 16237.0</span></span>
<span id="cb190-88"><a href="#cb190-88" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [19] 16267.5 16298.5 16329.0 16359.5 16390.0 16420.5 16451.5 16481.0 16510.5</span></span>
<span id="cb190-89"><a href="#cb190-89" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [28] 16541.0 16571.5 16602.0 16632.5 16663.5 16694.0 16724.5 16755.0 16785.5</span></span>
<span id="cb190-90"><a href="#cb190-90" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [37] 16816.5 16846.5 16876.5 16907.0 16937.5 16968.0 16998.5 17029.5 17060.0</span></span>
<span id="cb190-91"><a href="#cb190-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [46] 17090.5 17121.0 17151.5 17182.5 17212.0 17241.5 17272.0 17302.5 17333.0</span></span>
<span id="cb190-92"><a href="#cb190-92" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [55] 17363.5 17394.5 17425.0 17455.5 17486.0 17516.5 17547.5 17577.0 17606.5</span></span>
<span id="cb190-93"><a href="#cb190-93" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [64] 17637.0 17667.5 17698.0 17728.5 17759.5 17790.0 17820.5 17851.0 17881.5</span></span>
<span id="cb190-94"><a href="#cb190-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [73] 17912.5 17942.0 17971.5 18002.0 18032.5 18063.0 18093.5 18124.5 18155.0</span></span>
<span id="cb190-95"><a href="#cb190-95" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [82] 18185.5 18216.0 18246.5 18277.5 18307.5 18337.5 18368.0 18398.5 18429.0</span></span>
<span id="cb190-96"><a href="#cb190-96" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [91] 18459.5 18490.5 18521.0 18551.5 18582.0 18612.5 18643.5 18673.0 18702.5</span></span>
<span id="cb190-97"><a href="#cb190-97" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [100] 18733.0 18763.5 18794.0 18824.5 18855.5 18886.0 18916.5 18947.0 18977.5</span></span>
<span id="cb190-98"><a href="#cb190-98" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [109] 19008.5 19038.0 19067.5 19098.0 19128.5 19159.0 19189.5 19220.5 19251.0</span></span>
<span id="cb190-99"><a href="#cb190-99" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [118] 19281.5 19312.0 19342.5 19373.5 19403.0 19432.5 19463.0 19493.5 19524.0</span></span>
<span id="cb190-100"><a href="#cb190-100" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [127] 19554.5 19585.5 19616.0 19646.5 19677.0 19707.5 19738.5 19768.5 19798.5</span></span>
<span id="cb190-101"><a href="#cb190-101" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [136] 19829.0 19859.5 19890.0 19920.5 19951.5 19982.0 20012.5 20043.0 20073.5</span></span>
<span id="cb190-102"><a href="#cb190-102" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [145] 20104.5 20134.0 20163.5 20194.0 20224.5 20255.0 20285.5 20316.5 20347.0</span></span>
<span id="cb190-103"><a href="#cb190-103" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [154] 20377.5 20408.0 20438.5 20469.5 20499.0 20528.5 20559.0 20589.5 20620.0</span></span>
<span id="cb190-104"><a href="#cb190-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [163] 20650.5 20681.5 20712.0 20742.5 20773.0 20803.5 20834.5 20864.0 20893.5</span></span>
<span id="cb190-105"><a href="#cb190-105" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [172] 20924.0 20954.5 20985.0 21015.5 21046.5 21077.0 21107.5 21138.0 21168.5</span></span>
<span id="cb190-106"><a href="#cb190-106" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [181] 21199.5 21229.5 21259.5 21290.0 21320.5 21351.0 21381.5 21412.5 21443.0</span></span>
<span id="cb190-107"><a href="#cb190-107" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [190] 21473.5 21504.0 21534.5 21565.5 21595.0 21624.5 21655.0 21685.5 21716.0</span></span>
<span id="cb190-108"><a href="#cb190-108" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [199] 21746.5 21777.5 21808.0 21838.5 21869.0 21899.5 21930.5 21960.0 21989.5</span></span>
<span id="cb190-109"><a href="#cb190-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [208] 22020.0 22050.5 22081.0 22111.5 22142.5 22173.0 22203.5 22234.0 22264.5</span></span>
<span id="cb190-110"><a href="#cb190-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [217] 22295.5 22325.0 22354.5 22385.0 22415.5 22446.0 22476.5 22507.5 22538.0</span></span>
<span id="cb190-111"><a href="#cb190-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [226] 22568.5 22599.0 22629.5 22660.5 22690.5 22720.5 22751.0 22781.5 22812.0</span></span>
<span id="cb190-112"><a href="#cb190-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [235] 22842.5 22873.5 22904.0 22934.5 22965.0 22995.5 23026.5 23056.0 23085.5</span></span>
<span id="cb190-113"><a href="#cb190-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [244] 23116.0 23146.5 23177.0 23207.5 23238.5 23269.0 23299.5 23330.0 23360.5</span></span>
<span id="cb190-114"><a href="#cb190-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [253] 23391.5 23421.0 23450.5 23481.0 23511.5 23542.0 23572.5 23603.5 23634.0</span></span>
<span id="cb190-115"><a href="#cb190-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [262] 23664.5 23695.0 23725.5 23756.5 23786.0 23815.5 23846.0 23876.5 23907.0</span></span>
<span id="cb190-116"><a href="#cb190-116" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [271] 23937.5 23968.5 23999.0 24029.5 24060.0 24090.5 24121.5 24151.5 24181.5</span></span>
<span id="cb190-117"><a href="#cb190-117" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [280] 24212.0 24242.5 24273.0 24303.5 24334.5 24365.0 24395.5 24426.0 24456.5</span></span>
<span id="cb190-118"><a href="#cb190-118" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [289] 24487.5 24517.0 24546.5 24577.0 24607.5 24638.0 24668.5 24699.5 24730.0</span></span>
<span id="cb190-119"><a href="#cb190-119" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [298] 24760.5 24791.0 24821.5 24852.5 24882.0 24911.5 24942.0 24972.5 25003.0</span></span>
<span id="cb190-120"><a href="#cb190-120" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [307] 25033.5 25064.5 25095.0 25125.5 25156.0 25186.5 25217.5 25247.0 25276.5</span></span>
<span id="cb190-121"><a href="#cb190-121" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [316] 25307.0 25337.5 25368.0 25398.5 25429.5 25460.0 25490.5 25521.0 25551.5</span></span>
<span id="cb190-122"><a href="#cb190-122" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [325] 25582.5 25612.5 25642.5 25673.0 25703.5 25734.0 25764.5 25795.5 25826.0</span></span>
<span id="cb190-123"><a href="#cb190-123" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [334] 25856.5 25887.0 25917.5</span></span>
<span id="cb190-124"><a href="#cb190-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-125"><a href="#cb190-125" aria-hidden="true" tabindex="-1"></a>tunits <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="st">"time"</span>,<span class="st">"units"</span>)</span>
<span id="cb190-126"><a href="#cb190-126" aria-hidden="true" tabindex="-1"></a>nt <span class="ot">&lt;-</span> <span class="fu">dim</span>(time)</span>
<span id="cb190-127"><a href="#cb190-127" aria-hidden="true" tabindex="-1"></a>nt</span>
<span id="cb190-128"><a href="#cb190-128" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 336</span></span>
<span id="cb190-129"><a href="#cb190-129" aria-hidden="true" tabindex="-1"></a>tunits</span>
<span id="cb190-130"><a href="#cb190-130" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $hasatt</span></span>
<span id="cb190-131"><a href="#cb190-131" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb190-132"><a href="#cb190-132" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb190-133"><a href="#cb190-133" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $value</span></span>
<span id="cb190-134"><a href="#cb190-134" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "days since 1950-01-01 00:00:00"</span></span>
<span id="cb190-135"><a href="#cb190-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-136"><a href="#cb190-136" aria-hidden="true" tabindex="-1"></a><span class="co"># Get temperature</span></span>
<span id="cb190-137"><a href="#cb190-137" aria-hidden="true" tabindex="-1"></a>dname <span class="ot">&lt;-</span> <span class="st">"bottomT"</span></span>
<span id="cb190-138"><a href="#cb190-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-139"><a href="#cb190-139" aria-hidden="true" tabindex="-1"></a>temp_array <span class="ot">&lt;-</span> <span class="fu">ncvar_get</span>(ncin,dname)</span>
<span id="cb190-140"><a href="#cb190-140" aria-hidden="true" tabindex="-1"></a>dlname <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,dname,<span class="st">"long_name"</span>)</span>
<span id="cb190-141"><a href="#cb190-141" aria-hidden="true" tabindex="-1"></a>dunits <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,dname,<span class="st">"units"</span>)</span>
<span id="cb190-142"><a href="#cb190-142" aria-hidden="true" tabindex="-1"></a>fillvalue <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,dname,<span class="st">"_FillValue"</span>)</span>
<span id="cb190-143"><a href="#cb190-143" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(temp_array)</span>
<span id="cb190-144"><a href="#cb190-144" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 383 523 336</span></span>
<span id="cb190-145"><a href="#cb190-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-146"><a href="#cb190-146" aria-hidden="true" tabindex="-1"></a><span class="co"># Get global attributes</span></span>
<span id="cb190-147"><a href="#cb190-147" aria-hidden="true" tabindex="-1"></a>title <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"title"</span>)</span>
<span id="cb190-148"><a href="#cb190-148" aria-hidden="true" tabindex="-1"></a>institution <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"institution"</span>)</span>
<span id="cb190-149"><a href="#cb190-149" aria-hidden="true" tabindex="-1"></a>datasource <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"source"</span>)</span>
<span id="cb190-150"><a href="#cb190-150" aria-hidden="true" tabindex="-1"></a>references <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"references"</span>)</span>
<span id="cb190-151"><a href="#cb190-151" aria-hidden="true" tabindex="-1"></a>history <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"history"</span>)</span>
<span id="cb190-152"><a href="#cb190-152" aria-hidden="true" tabindex="-1"></a>Conventions <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"Conventions"</span>)</span>
<span id="cb190-153"><a href="#cb190-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-154"><a href="#cb190-154" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert time: split the time units string into fields</span></span>
<span id="cb190-155"><a href="#cb190-155" aria-hidden="true" tabindex="-1"></a>tustr <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(tunits<span class="sc">$</span>value, <span class="st">" "</span>)</span>
<span id="cb190-156"><a href="#cb190-156" aria-hidden="true" tabindex="-1"></a>tdstr <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(<span class="fu">unlist</span>(tustr)[<span class="dv">3</span>], <span class="st">"-"</span>)</span>
<span id="cb190-157"><a href="#cb190-157" aria-hidden="true" tabindex="-1"></a>tmonth <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">unlist</span>(tdstr)[<span class="dv">2</span>])</span>
<span id="cb190-158"><a href="#cb190-158" aria-hidden="true" tabindex="-1"></a>tday <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">unlist</span>(tdstr)[<span class="dv">3</span>])</span>
<span id="cb190-159"><a href="#cb190-159" aria-hidden="true" tabindex="-1"></a>tyear <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">unlist</span>(tdstr)[<span class="dv">1</span>])</span>
<span id="cb190-160"><a href="#cb190-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-161"><a href="#cb190-161" aria-hidden="true" tabindex="-1"></a><span class="co"># Here I deviate from the guide a little bit. Save this info:</span></span>
<span id="cb190-162"><a href="#cb190-162" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">&lt;-</span> <span class="fu">chron</span>(time, <span class="at">origin =</span> <span class="fu">c</span>(tmonth, tday, tyear))</span>
<span id="cb190-163"><a href="#cb190-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-164"><a href="#cb190-164" aria-hidden="true" tabindex="-1"></a><span class="co"># Crop the date variable</span></span>
<span id="cb190-165"><a href="#cb190-165" aria-hidden="true" tabindex="-1"></a>months <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(dates, <span class="dv">2</span>, <span class="dv">3</span>))</span>
<span id="cb190-166"><a href="#cb190-166" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(dates, <span class="dv">8</span>, <span class="dv">9</span>))</span>
<span id="cb190-167"><a href="#cb190-167" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(years <span class="sc">&gt;</span> <span class="dv">90</span>, <span class="dv">1900</span> <span class="sc">+</span> years, <span class="dv">2000</span> <span class="sc">+</span> years)</span>
<span id="cb190-168"><a href="#cb190-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-169"><a href="#cb190-169" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace netCDF fill values with NA's</span></span>
<span id="cb190-170"><a href="#cb190-170" aria-hidden="true" tabindex="-1"></a>temp_array[temp_array <span class="sc">==</span> fillvalue<span class="sc">$</span>value] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb190-171"><a href="#cb190-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-172"><a href="#cb190-172" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through all "dates", put into a list </span></span>
<span id="cb190-173"><a href="#cb190-173" aria-hidden="true" tabindex="-1"></a>dlist <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb190-174"><a href="#cb190-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-175"><a href="#cb190-175" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(months)) {</span>
<span id="cb190-176"><a href="#cb190-176" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-177"><a href="#cb190-177" aria-hidden="true" tabindex="-1"></a>  temp_sub <span class="ot">&lt;-</span> temp_array[, , i]</span>
<span id="cb190-178"><a href="#cb190-178" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-179"><a href="#cb190-179" aria-hidden="true" tabindex="-1"></a>  dlist[[i]] <span class="ot">&lt;-</span> temp_sub</span>
<span id="cb190-180"><a href="#cb190-180" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-181"><a href="#cb190-181" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb190-182"><a href="#cb190-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-183"><a href="#cb190-183" aria-hidden="true" tabindex="-1"></a><span class="co"># Name the list</span></span>
<span id="cb190-184"><a href="#cb190-184" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dlist) <span class="ot">&lt;-</span> <span class="fu">paste</span>(months, years, <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb190-185"><a href="#cb190-185" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dlist)</span>
<span id="cb190-186"><a href="#cb190-186" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 336</span></span>
<span id="cb190-187"><a href="#cb190-187" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-188"><a href="#cb190-188" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-189"><a href="#cb190-189" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-190"><a href="#cb190-190" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-191"><a href="#cb190-191" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-192"><a href="#cb190-192" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-193"><a href="#cb190-193" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-194"><a href="#cb190-194" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-195"><a href="#cb190-195" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1993 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-196"><a href="#cb190-196" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1993: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-197"><a href="#cb190-197" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1993: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-198"><a href="#cb190-198" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1993: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-199"><a href="#cb190-199" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-200"><a href="#cb190-200" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-201"><a href="#cb190-201" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-202"><a href="#cb190-202" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-203"><a href="#cb190-203" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-204"><a href="#cb190-204" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-205"><a href="#cb190-205" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-206"><a href="#cb190-206" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-207"><a href="#cb190-207" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1994 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-208"><a href="#cb190-208" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1994: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-209"><a href="#cb190-209" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1994: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-210"><a href="#cb190-210" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1994: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-211"><a href="#cb190-211" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-212"><a href="#cb190-212" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-213"><a href="#cb190-213" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-214"><a href="#cb190-214" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-215"><a href="#cb190-215" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-216"><a href="#cb190-216" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-217"><a href="#cb190-217" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-218"><a href="#cb190-218" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-219"><a href="#cb190-219" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1995 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-220"><a href="#cb190-220" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1995: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-221"><a href="#cb190-221" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1995: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-222"><a href="#cb190-222" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1995: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-223"><a href="#cb190-223" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-224"><a href="#cb190-224" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-225"><a href="#cb190-225" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-226"><a href="#cb190-226" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-227"><a href="#cb190-227" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-228"><a href="#cb190-228" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-229"><a href="#cb190-229" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-230"><a href="#cb190-230" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-231"><a href="#cb190-231" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1996 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-232"><a href="#cb190-232" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1996: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-233"><a href="#cb190-233" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1996: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-234"><a href="#cb190-234" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1996: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-235"><a href="#cb190-235" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-236"><a href="#cb190-236" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-237"><a href="#cb190-237" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-238"><a href="#cb190-238" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-239"><a href="#cb190-239" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-240"><a href="#cb190-240" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-241"><a href="#cb190-241" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-242"><a href="#cb190-242" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-243"><a href="#cb190-243" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1997 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-244"><a href="#cb190-244" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1997: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-245"><a href="#cb190-245" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1997: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-246"><a href="#cb190-246" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1997: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-247"><a href="#cb190-247" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-248"><a href="#cb190-248" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-249"><a href="#cb190-249" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-250"><a href="#cb190-250" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-251"><a href="#cb190-251" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-252"><a href="#cb190-252" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-253"><a href="#cb190-253" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-254"><a href="#cb190-254" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-255"><a href="#cb190-255" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1998 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-256"><a href="#cb190-256" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1998: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-257"><a href="#cb190-257" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1998: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-258"><a href="#cb190-258" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1998: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-259"><a href="#cb190-259" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-260"><a href="#cb190-260" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-261"><a href="#cb190-261" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-262"><a href="#cb190-262" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-263"><a href="#cb190-263" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-264"><a href="#cb190-264" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-265"><a href="#cb190-265" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-266"><a href="#cb190-266" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-267"><a href="#cb190-267" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1999 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-268"><a href="#cb190-268" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1999: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-269"><a href="#cb190-269" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1999: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-270"><a href="#cb190-270" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1999: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-271"><a href="#cb190-271" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-272"><a href="#cb190-272" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-273"><a href="#cb190-273" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-274"><a href="#cb190-274" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-275"><a href="#cb190-275" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-276"><a href="#cb190-276" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-277"><a href="#cb190-277" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-278"><a href="#cb190-278" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-279"><a href="#cb190-279" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_2000 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-280"><a href="#cb190-280" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_2000: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-281"><a href="#cb190-281" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_2000: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-282"><a href="#cb190-282" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_2000: num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-283"><a href="#cb190-283" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_2001 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-284"><a href="#cb190-284" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_2001 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-285"><a href="#cb190-285" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_2001 : num [1:383, 1:523] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb190-286"><a href="#cb190-286" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [list output truncated]</span></span>
<span id="cb190-287"><a href="#cb190-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-288"><a href="#cb190-288" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data holding object</span></span>
<span id="cb190-289"><a href="#cb190-289" aria-hidden="true" tabindex="-1"></a>temp_data_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb190-290"><a href="#cb190-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-291"><a href="#cb190-291" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each month_year and extract raster values for the cpue data points</span></span>
<span id="cb190-292"><a href="#cb190-292" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">unique</span>(dat_haul<span class="sc">$</span>month_year)) { <span class="co"># We can use q1 as looping index, doesn't matter!</span></span>
<span id="cb190-293"><a href="#cb190-293" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-294"><a href="#cb190-294" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set plot limits</span></span>
<span id="cb190-295"><a href="#cb190-295" aria-hidden="true" tabindex="-1"></a>  ymin <span class="ot">=</span> <span class="dv">54</span>; ymax <span class="ot">=</span> <span class="dv">58</span>; xmin <span class="ot">=</span> <span class="dv">12</span>; xmax <span class="ot">=</span> <span class="dv">22</span></span>
<span id="cb190-296"><a href="#cb190-296" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-297"><a href="#cb190-297" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Subset a month-year combination</span></span>
<span id="cb190-298"><a href="#cb190-298" aria-hidden="true" tabindex="-1"></a>  temp_slice <span class="ot">&lt;-</span> dlist[[i]]</span>
<span id="cb190-299"><a href="#cb190-299" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-300"><a href="#cb190-300" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create raster for that year (i)</span></span>
<span id="cb190-301"><a href="#cb190-301" aria-hidden="true" tabindex="-1"></a>  r <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="fu">t</span>(temp_slice), <span class="at">xmn =</span> <span class="fu">min</span>(lon), <span class="at">xmx =</span> <span class="fu">max</span>(lon), <span class="at">ymn =</span> <span class="fu">min</span>(lat), <span class="at">ymx =</span> <span class="fu">max</span>(lat),</span>
<span id="cb190-302"><a href="#cb190-302" aria-hidden="true" tabindex="-1"></a>              <span class="at">crs =</span> <span class="fu">CRS</span>(<span class="st">"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs+ towgs84=0,0,0"</span>))</span>
<span id="cb190-303"><a href="#cb190-303" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-304"><a href="#cb190-304" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Flip...</span></span>
<span id="cb190-305"><a href="#cb190-305" aria-hidden="true" tabindex="-1"></a>  r <span class="ot">&lt;-</span> <span class="fu">flip</span>(r, <span class="at">direction =</span> <span class="st">'y'</span>)</span>
<span id="cb190-306"><a href="#cb190-306" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-307"><a href="#cb190-307" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(r, <span class="at">main =</span> <span class="fu">paste</span>(i), <span class="at">ylim =</span> <span class="fu">c</span>(ymin, ymax), <span class="at">xlim =</span> <span class="fu">c</span>(xmin, xmax))</span>
<span id="cb190-308"><a href="#cb190-308" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-309"><a href="#cb190-309" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter the same year (i) in the cpue data and select only coordinates</span></span>
<span id="cb190-310"><a href="#cb190-310" aria-hidden="true" tabindex="-1"></a>  d_slice <span class="ot">&lt;-</span> dat_haul <span class="sc">%&gt;%</span> <span class="fu">filter</span>(month_year <span class="sc">==</span> i) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(lon, lat)</span>
<span id="cb190-311"><a href="#cb190-311" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-312"><a href="#cb190-312" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make into a SpatialPoints object</span></span>
<span id="cb190-313"><a href="#cb190-313" aria-hidden="true" tabindex="-1"></a>  data_sp <span class="ot">&lt;-</span> <span class="fu">SpatialPoints</span>(d_slice)</span>
<span id="cb190-314"><a href="#cb190-314" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-315"><a href="#cb190-315" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract raster value (oxygen)</span></span>
<span id="cb190-316"><a href="#cb190-316" aria-hidden="true" tabindex="-1"></a>  rasValue <span class="ot">&lt;-</span> raster<span class="sc">::</span><span class="fu">extract</span>(r, data_sp)</span>
<span id="cb190-317"><a href="#cb190-317" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-318"><a href="#cb190-318" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now we want to plot the results of the raster extractions by plotting the cpue data points over a raster and saving it for each year.</span></span>
<span id="cb190-319"><a href="#cb190-319" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make the SpatialPoints object into a raster again (for plot)</span></span>
<span id="cb190-320"><a href="#cb190-320" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(data_sp)</span>
<span id="cb190-321"><a href="#cb190-321" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-322"><a href="#cb190-322" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add in the raster value in the df holding the coordinates for the cpue data</span></span>
<span id="cb190-323"><a href="#cb190-323" aria-hidden="true" tabindex="-1"></a>  d_slice<span class="sc">$</span>temp <span class="ot">&lt;-</span> rasValue</span>
<span id="cb190-324"><a href="#cb190-324" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-325"><a href="#cb190-325" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add in which year</span></span>
<span id="cb190-326"><a href="#cb190-326" aria-hidden="true" tabindex="-1"></a>  d_slice<span class="sc">$</span>month_year <span class="ot">&lt;-</span> i</span>
<span id="cb190-327"><a href="#cb190-327" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-328"><a href="#cb190-328" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add each years' data in the list</span></span>
<span id="cb190-329"><a href="#cb190-329" aria-hidden="true" tabindex="-1"></a>  temp_data_list[[i]] <span class="ot">&lt;-</span> d_slice</span>
<span id="cb190-330"><a href="#cb190-330" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb190-331"><a href="#cb190-331" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb190-332"><a href="#cb190-332" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter: removed 9,315 rows (99%), 61 rows remaining</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,336 rows (&gt;99%), 40 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,358 rows (&gt;99%), 18 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,360 rows (&gt;99%), 16 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,331 rows (&gt;99%), 45 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,313 rows (99%), 63 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,344 rows (&gt;99%), 32 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,296 rows (99%), 80 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,365 rows (&gt;99%), 11 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,314 rows (99%), 62 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,259 rows (99%), 117 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,339 rows (&gt;99%), 37 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,355 rows (&gt;99%), 21 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,351 rows (&gt;99%), 25 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,348 rows (&gt;99%), 28 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,295 rows (99%), 81 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,328 rows (99%), 48 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,322 rows (99%), 54 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,357 rows (&gt;99%), 19 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,331 rows (&gt;99%), 45 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,360 rows (&gt;99%), 16 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,321 rows (99%), 55 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,306 rows (99%), 70 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,287 rows (99%), 89 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,361 rows (&gt;99%), 15 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,306 rows (99%), 70 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,371 rows (&gt;99%), 5 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,309 rows (99%), 67 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,268 rows (99%), 108 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,323 rows (99%), 53 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,360 rows (&gt;99%), 16 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-31.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,327 rows (99%), 49 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-32.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,357 rows (&gt;99%), 19 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-33.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,267 rows (99%), 109 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-34.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,295 rows (99%), 81 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-35.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,364 rows (&gt;99%), 12 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-36.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,287 rows (99%), 89 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-37.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,371 rows (&gt;99%), 5 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-38.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,312 rows (99%), 64 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-39.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,330 rows (&gt;99%), 46 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-40.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,287 rows (99%), 89 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-41.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,250 rows (99%), 126 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-42.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,294 rows (99%), 82 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-43.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,260 rows (99%), 116 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-44.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,283 rows (99%), 93 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-45.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,324 rows (99%), 52 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-46.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,270 rows (99%), 106 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-47.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,365 rows (&gt;99%), 11 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-48.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,271 rows (99%), 105 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-49.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,320 rows (99%), 56 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-50.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,259 rows (99%), 117 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-51.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,365 rows (&gt;99%), 11 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-52.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,242 rows (99%), 134 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-53.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,303 rows (99%), 73 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-54.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,300 rows (99%), 76 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-55.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,343 rows (&gt;99%), 33 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-56.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,235 rows (98%), 141 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-57.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,299 rows (99%), 77 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-58.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,250 rows (99%), 126 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-59.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,353 rows (&gt;99%), 23 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-60.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,374 rows (&gt;99%), 2 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-61.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,261 rows (99%), 115 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-62.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,303 rows (99%), 73 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-63.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,265 rows (99%), 111 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-64.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,351 rows (&gt;99%), 25 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-65.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,362 rows (&gt;99%), 14 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-66.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,246 rows (99%), 130 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-67.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,271 rows (99%), 105 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-68.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,237 rows (99%), 139 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-69.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,357 rows (&gt;99%), 19 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-70.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,365 rows (&gt;99%), 11 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-71.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,256 rows (99%), 120 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-72.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,274 rows (99%), 102 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-73.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,247 rows (99%), 129 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-74.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,359 rows (&gt;99%), 17 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-75.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,346 rows (&gt;99%), 30 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-76.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,228 rows (98%), 148 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-77.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,265 rows (99%), 111 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-78.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,233 rows (98%), 143 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-79.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,368 rows (&gt;99%), 8 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-80.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,347 rows (&gt;99%), 29 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-81.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,235 rows (98%), 141 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-82.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,276 rows (99%), 100 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-83.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,239 rows (99%), 137 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-84.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,351 rows (&gt;99%), 25 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-85.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,214 rows (98%), 162 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-86.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,295 rows (99%), 81 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-87.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,247 rows (99%), 129 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-88.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,344 rows (&gt;99%), 32 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-89.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,357 rows (&gt;99%), 19 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-90.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,294 rows (99%), 82 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-91.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,234 rows (98%), 142 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-92.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,361 rows (&gt;99%), 15 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-93.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,283 rows (99%), 93 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-94.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,351 rows (&gt;99%), 25 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-95.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,238 rows (99%), 138 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-96.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,246 rows (99%), 130 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-97.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,256 rows (99%), 120 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-98.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,363 rows (&gt;99%), 13 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-99.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,361 rows (&gt;99%), 15 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-100.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,224 rows (98%), 152 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-101.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,320 rows (99%), 56 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-102.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,250 rows (99%), 126 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-103.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,342 rows (&gt;99%), 34 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-104.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,360 rows (&gt;99%), 16 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-105.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,217 rows (98%), 159 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-106.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,298 rows (99%), 78 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-107.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,227 rows (98%), 149 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-108.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,359 rows (&gt;99%), 17 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-109.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,284 rows (99%), 92 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-110.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,236 rows (99%), 140 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-111.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,192 rows (98%), 184 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-112.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,362 rows (&gt;99%), 14 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-113.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,361 rows (&gt;99%), 15 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-114.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,245 rows (99%), 131 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-115.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,261 rows (99%), 115 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-116.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,191 rows (98%), 185 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-117.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,351 rows (&gt;99%), 25 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-118.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,361 rows (&gt;99%), 15 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-119.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,223 rows (98%), 153 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-120.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,273 rows (99%), 103 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-121.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,196 rows (98%), 180 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-122.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,345 rows (&gt;99%), 31 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-123.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,317 rows (99%), 59 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-124.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,317 rows (99%), 59 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-125.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,284 rows (99%), 92 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-126.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,325 rows (99%), 51 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-127.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,301 rows (99%), 75 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-128.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,356 rows (&gt;99%), 20 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-129.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,294 rows (99%), 82 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-18-130.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb320"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb320-1"><a href="#cb320-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb320-2"><a href="#cb320-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now create a data frame from the list of all annual values</span></span>
<span id="cb320-3"><a href="#cb320-3" aria-hidden="true" tabindex="-1"></a>big_dat_temp <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(temp_data_list)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bottom-salinity" class="level4">
<h4 class="anchored" data-anchor-id="bottom-salinity">Bottom salinity</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb321"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="co"># https://data.marine.copernicus.eu/product/BALTICSEA_REANALYSIS_PHY_003_011/download?dataset=dataset-reanalysis-nemo-monthlymeans</span></span>
<span id="cb321-2"><a href="#cb321-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-3"><a href="#cb321-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the netCDF file</span></span>
<span id="cb321-4"><a href="#cb321-4" aria-hidden="true" tabindex="-1"></a>ncin <span class="ot">&lt;-</span> <span class="fu">nc_open</span>(<span class="st">"data/NEMO_Nordic_SCOBI/dataset-reanalysis-nemo-monthlymeans_1668587452211.nc"</span>)</span>
<span id="cb321-5"><a href="#cb321-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-6"><a href="#cb321-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ncin)</span>
<span id="cb321-7"><a href="#cb321-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; File data/NEMO_Nordic_SCOBI/dataset-reanalysis-nemo-monthlymeans_1668587452211.nc (NC_FORMAT_CLASSIC):</span></span>
<span id="cb321-8"><a href="#cb321-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb321-9"><a href="#cb321-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      1 variables (excluding dimension variables):</span></span>
<span id="cb321-10"><a href="#cb321-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         float sob[longitude,latitude,time]   </span></span>
<span id="cb321-11"><a href="#cb321-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             long_name: Sea water salinity at sea floor</span></span>
<span id="cb321-12"><a href="#cb321-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             missing_value: NaN</span></span>
<span id="cb321-13"><a href="#cb321-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             standard_name: sea_water_salinity</span></span>
<span id="cb321-14"><a href="#cb321-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             units: 0.001</span></span>
<span id="cb321-15"><a href="#cb321-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _FillValue: NaN</span></span>
<span id="cb321-16"><a href="#cb321-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _ChunkSizes: 1</span></span>
<span id="cb321-17"><a href="#cb321-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              _ChunkSizes: 523</span></span>
<span id="cb321-18"><a href="#cb321-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;              _ChunkSizes: 383</span></span>
<span id="cb321-19"><a href="#cb321-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb321-20"><a href="#cb321-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      3 dimensions:</span></span>
<span id="cb321-21"><a href="#cb321-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         time  Size:335 </span></span>
<span id="cb321-22"><a href="#cb321-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             axis: T</span></span>
<span id="cb321-23"><a href="#cb321-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             long_name: Validity time</span></span>
<span id="cb321-24"><a href="#cb321-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             standard_name: time</span></span>
<span id="cb321-25"><a href="#cb321-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             units: days since 1950-01-01 00:00:00</span></span>
<span id="cb321-26"><a href="#cb321-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             calendar: gregorian</span></span>
<span id="cb321-27"><a href="#cb321-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _ChunkSizes: 512</span></span>
<span id="cb321-28"><a href="#cb321-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _CoordinateAxisType: Time</span></span>
<span id="cb321-29"><a href="#cb321-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_min: 15751</span></span>
<span id="cb321-30"><a href="#cb321-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_max: 25917.5</span></span>
<span id="cb321-31"><a href="#cb321-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         latitude  Size:187 </span></span>
<span id="cb321-32"><a href="#cb321-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             axis: Y</span></span>
<span id="cb321-33"><a href="#cb321-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             standard_name: latitude</span></span>
<span id="cb321-34"><a href="#cb321-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             long_name: latitude</span></span>
<span id="cb321-35"><a href="#cb321-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             units: degrees_north</span></span>
<span id="cb321-36"><a href="#cb321-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _CoordinateAxisType: Lat</span></span>
<span id="cb321-37"><a href="#cb321-37" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_min: 53.1249580383301</span></span>
<span id="cb321-38"><a href="#cb321-38" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_max: 59.3248596191406</span></span>
<span id="cb321-39"><a href="#cb321-39" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         longitude  Size:199 </span></span>
<span id="cb321-40"><a href="#cb321-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             standard_name: longitude</span></span>
<span id="cb321-41"><a href="#cb321-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             long_name: longitude</span></span>
<span id="cb321-42"><a href="#cb321-42" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             units: degrees_east</span></span>
<span id="cb321-43"><a href="#cb321-43" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             axis: X</span></span>
<span id="cb321-44"><a href="#cb321-44" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             _CoordinateAxisType: Lon</span></span>
<span id="cb321-45"><a href="#cb321-45" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_min: 11.1248445510864</span></span>
<span id="cb321-46"><a href="#cb321-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;             valid_max: 22.12473487854</span></span>
<span id="cb321-47"><a href="#cb321-47" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb321-48"><a href="#cb321-48" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     24 global attributes:</span></span>
<span id="cb321-49"><a href="#cb321-49" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         references: http://www.smhi.se</span></span>
<span id="cb321-50"><a href="#cb321-50" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         institution: Swedish Meterological and Hydrological Institute</span></span>
<span id="cb321-51"><a href="#cb321-51" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         history: See source and creation_date attributees</span></span>
<span id="cb321-52"><a href="#cb321-52" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         Conventions: CF-1.5</span></span>
<span id="cb321-53"><a href="#cb321-53" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         contact: servicedesk_cmems@mercator-ocean.eu</span></span>
<span id="cb321-54"><a href="#cb321-54" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         comment: Provided by SMHI as a Copernicus Marine Environment Monitoring Service production unit</span></span>
<span id="cb321-55"><a href="#cb321-55" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         bullentin_type: reanalysis</span></span>
<span id="cb321-56"><a href="#cb321-56" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         cmems_product_id: BALTICSEA_REANALYSIS_PHY_003_011</span></span>
<span id="cb321-57"><a href="#cb321-57" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         title: CMEMS V4 Reanalysis: NEMO model 3D fields (monthly means)</span></span>
<span id="cb321-58"><a href="#cb321-58" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         FROM_ORIGINAL_FILE__easternmost_longitude: 30.2357654571533</span></span>
<span id="cb321-59"><a href="#cb321-59" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         FROM_ORIGINAL_FILE__northernmost_latitude: 65.8914184570312</span></span>
<span id="cb321-60"><a href="#cb321-60" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         FROM_ORIGINAL_FILE__westernmost_longitude: 9.01375484466553</span></span>
<span id="cb321-61"><a href="#cb321-61" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         FROM_ORIGINAL_FILE__southernmost_latitude: 48.49169921875</span></span>
<span id="cb321-62"><a href="#cb321-62" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         shallowest_depth: 1.50136542320251</span></span>
<span id="cb321-63"><a href="#cb321-63" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         deepest_depth: 711.059204101562</span></span>
<span id="cb321-64"><a href="#cb321-64" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         source: SMHI reanalysis run NORDIC-NS2_1d_20201201_20201201</span></span>
<span id="cb321-65"><a href="#cb321-65" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         file_quality_index: 1</span></span>
<span id="cb321-66"><a href="#cb321-66" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         creation_date: 2021-11-09 UTC</span></span>
<span id="cb321-67"><a href="#cb321-67" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         bullentin_date: 20201201</span></span>
<span id="cb321-68"><a href="#cb321-68" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         start_date: 2020-12-01 UTC</span></span>
<span id="cb321-69"><a href="#cb321-69" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         stop_date: 2020-12-01 UTC</span></span>
<span id="cb321-70"><a href="#cb321-70" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         start_time: 00:00 UTC</span></span>
<span id="cb321-71"><a href="#cb321-71" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         stop_time: 00:00 UTC</span></span>
<span id="cb321-72"><a href="#cb321-72" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;         _CoordSysBuilder: ucar.nc2.dataset.conv.CF1Convention</span></span>
<span id="cb321-73"><a href="#cb321-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-74"><a href="#cb321-74" aria-hidden="true" tabindex="-1"></a><span class="co"># Get longitude and latitude</span></span>
<span id="cb321-75"><a href="#cb321-75" aria-hidden="true" tabindex="-1"></a>lon <span class="ot">&lt;-</span> <span class="fu">ncvar_get</span>(ncin,<span class="st">"longitude"</span>)</span>
<span id="cb321-76"><a href="#cb321-76" aria-hidden="true" tabindex="-1"></a>nlon <span class="ot">&lt;-</span> <span class="fu">dim</span>(lon)</span>
<span id="cb321-77"><a href="#cb321-77" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lon)</span>
<span id="cb321-78"><a href="#cb321-78" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 11.12484 11.18040 11.23596 11.29151 11.34706 11.40262</span></span>
<span id="cb321-79"><a href="#cb321-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-80"><a href="#cb321-80" aria-hidden="true" tabindex="-1"></a>lat <span class="ot">&lt;-</span> <span class="fu">ncvar_get</span>(ncin,<span class="st">"latitude"</span>)</span>
<span id="cb321-81"><a href="#cb321-81" aria-hidden="true" tabindex="-1"></a>nlat <span class="ot">&lt;-</span> <span class="fu">dim</span>(lat)</span>
<span id="cb321-82"><a href="#cb321-82" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lat)</span>
<span id="cb321-83"><a href="#cb321-83" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 53.12496 53.15829 53.19162 53.22496 53.25829 53.29162</span></span>
<span id="cb321-84"><a href="#cb321-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-85"><a href="#cb321-85" aria-hidden="true" tabindex="-1"></a><span class="co"># Get time</span></span>
<span id="cb321-86"><a href="#cb321-86" aria-hidden="true" tabindex="-1"></a>time <span class="ot">&lt;-</span> <span class="fu">ncvar_get</span>(ncin,<span class="st">"time"</span>)</span>
<span id="cb321-87"><a href="#cb321-87" aria-hidden="true" tabindex="-1"></a>time</span>
<span id="cb321-88"><a href="#cb321-88" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [1] 15751.0 15780.5 15811.0 15841.5 15872.0 15902.5 15933.5 15964.0 15994.5</span></span>
<span id="cb321-89"><a href="#cb321-89" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [10] 16025.0 16055.5 16086.5 16116.0 16145.5 16176.0 16206.5 16237.0 16267.5</span></span>
<span id="cb321-90"><a href="#cb321-90" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [19] 16298.5 16329.0 16359.5 16390.0 16420.5 16451.5 16481.0 16510.5 16541.0</span></span>
<span id="cb321-91"><a href="#cb321-91" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [28] 16571.5 16602.0 16632.5 16663.5 16694.0 16724.5 16755.0 16785.5 16816.5</span></span>
<span id="cb321-92"><a href="#cb321-92" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [37] 16846.5 16876.5 16907.0 16937.5 16968.0 16998.5 17029.5 17060.0 17090.5</span></span>
<span id="cb321-93"><a href="#cb321-93" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [46] 17121.0 17151.5 17182.5 17212.0 17241.5 17272.0 17302.5 17333.0 17363.5</span></span>
<span id="cb321-94"><a href="#cb321-94" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [55] 17394.5 17425.0 17455.5 17486.0 17516.5 17547.5 17577.0 17606.5 17637.0</span></span>
<span id="cb321-95"><a href="#cb321-95" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [64] 17667.5 17698.0 17728.5 17759.5 17790.0 17820.5 17851.0 17881.5 17912.5</span></span>
<span id="cb321-96"><a href="#cb321-96" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [73] 17942.0 17971.5 18002.0 18032.5 18063.0 18093.5 18124.5 18155.0 18185.5</span></span>
<span id="cb321-97"><a href="#cb321-97" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [82] 18216.0 18246.5 18277.5 18307.5 18337.5 18368.0 18398.5 18429.0 18459.5</span></span>
<span id="cb321-98"><a href="#cb321-98" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [91] 18490.5 18521.0 18551.5 18582.0 18612.5 18643.5 18673.0 18702.5 18733.0</span></span>
<span id="cb321-99"><a href="#cb321-99" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [100] 18763.5 18794.0 18824.5 18855.5 18886.0 18916.5 18947.0 18977.5 19008.5</span></span>
<span id="cb321-100"><a href="#cb321-100" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [109] 19038.0 19067.5 19098.0 19128.5 19159.0 19189.5 19220.5 19251.0 19281.5</span></span>
<span id="cb321-101"><a href="#cb321-101" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [118] 19312.0 19342.5 19373.5 19403.0 19432.5 19463.0 19493.5 19524.0 19554.5</span></span>
<span id="cb321-102"><a href="#cb321-102" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [127] 19585.5 19616.0 19646.5 19677.0 19707.5 19738.5 19768.5 19798.5 19829.0</span></span>
<span id="cb321-103"><a href="#cb321-103" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [136] 19859.5 19890.0 19920.5 19951.5 19982.0 20012.5 20043.0 20073.5 20104.5</span></span>
<span id="cb321-104"><a href="#cb321-104" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [145] 20134.0 20163.5 20194.0 20224.5 20255.0 20285.5 20316.5 20347.0 20377.5</span></span>
<span id="cb321-105"><a href="#cb321-105" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [154] 20408.0 20438.5 20469.5 20499.0 20528.5 20559.0 20589.5 20620.0 20650.5</span></span>
<span id="cb321-106"><a href="#cb321-106" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [163] 20681.5 20712.0 20742.5 20773.0 20803.5 20834.5 20864.0 20893.5 20924.0</span></span>
<span id="cb321-107"><a href="#cb321-107" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [172] 20954.5 20985.0 21015.5 21046.5 21077.0 21107.5 21138.0 21168.5 21199.5</span></span>
<span id="cb321-108"><a href="#cb321-108" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [181] 21229.5 21259.5 21290.0 21320.5 21351.0 21381.5 21412.5 21443.0 21473.5</span></span>
<span id="cb321-109"><a href="#cb321-109" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [190] 21504.0 21534.5 21565.5 21595.0 21624.5 21655.0 21685.5 21716.0 21746.5</span></span>
<span id="cb321-110"><a href="#cb321-110" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [199] 21777.5 21808.0 21838.5 21869.0 21899.5 21930.5 21960.0 21989.5 22020.0</span></span>
<span id="cb321-111"><a href="#cb321-111" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [208] 22050.5 22081.0 22111.5 22142.5 22173.0 22203.5 22234.0 22264.5 22295.5</span></span>
<span id="cb321-112"><a href="#cb321-112" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [217] 22325.0 22354.5 22385.0 22415.5 22446.0 22476.5 22507.5 22538.0 22568.5</span></span>
<span id="cb321-113"><a href="#cb321-113" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [226] 22599.0 22629.5 22660.5 22690.5 22720.5 22751.0 22781.5 22812.0 22842.5</span></span>
<span id="cb321-114"><a href="#cb321-114" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [235] 22873.5 22904.0 22934.5 22965.0 22995.5 23026.5 23056.0 23085.5 23116.0</span></span>
<span id="cb321-115"><a href="#cb321-115" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [244] 23146.5 23177.0 23207.5 23238.5 23269.0 23299.5 23330.0 23360.5 23391.5</span></span>
<span id="cb321-116"><a href="#cb321-116" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [253] 23421.0 23450.5 23481.0 23511.5 23542.0 23572.5 23603.5 23634.0 23664.5</span></span>
<span id="cb321-117"><a href="#cb321-117" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [262] 23695.0 23725.5 23756.5 23786.0 23815.5 23846.0 23876.5 23907.0 23937.5</span></span>
<span id="cb321-118"><a href="#cb321-118" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [271] 23968.5 23999.0 24029.5 24060.0 24090.5 24121.5 24151.5 24181.5 24212.0</span></span>
<span id="cb321-119"><a href="#cb321-119" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [280] 24242.5 24273.0 24303.5 24334.5 24365.0 24395.5 24426.0 24456.5 24487.5</span></span>
<span id="cb321-120"><a href="#cb321-120" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [289] 24517.0 24546.5 24577.0 24607.5 24638.0 24668.5 24699.5 24730.0 24760.5</span></span>
<span id="cb321-121"><a href="#cb321-121" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [298] 24791.0 24821.5 24852.5 24882.0 24911.5 24942.0 24972.5 25003.0 25033.5</span></span>
<span id="cb321-122"><a href="#cb321-122" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [307] 25064.5 25095.0 25125.5 25156.0 25186.5 25217.5 25247.0 25276.5 25307.0</span></span>
<span id="cb321-123"><a href="#cb321-123" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [316] 25337.5 25368.0 25398.5 25429.5 25460.0 25490.5 25521.0 25551.5 25582.5</span></span>
<span id="cb321-124"><a href="#cb321-124" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [325] 25612.5 25642.5 25673.0 25703.5 25734.0 25764.5 25795.5 25826.0 25856.5</span></span>
<span id="cb321-125"><a href="#cb321-125" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [334] 25887.0 25917.5</span></span>
<span id="cb321-126"><a href="#cb321-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-127"><a href="#cb321-127" aria-hidden="true" tabindex="-1"></a>tunits <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="st">"time"</span>,<span class="st">"units"</span>)</span>
<span id="cb321-128"><a href="#cb321-128" aria-hidden="true" tabindex="-1"></a>nt <span class="ot">&lt;-</span> <span class="fu">dim</span>(time)</span>
<span id="cb321-129"><a href="#cb321-129" aria-hidden="true" tabindex="-1"></a>nt</span>
<span id="cb321-130"><a href="#cb321-130" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 335</span></span>
<span id="cb321-131"><a href="#cb321-131" aria-hidden="true" tabindex="-1"></a>tunits</span>
<span id="cb321-132"><a href="#cb321-132" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $hasatt</span></span>
<span id="cb321-133"><a href="#cb321-133" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb321-134"><a href="#cb321-134" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb321-135"><a href="#cb321-135" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $value</span></span>
<span id="cb321-136"><a href="#cb321-136" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "days since 1950-01-01 00:00:00"</span></span>
<span id="cb321-137"><a href="#cb321-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-138"><a href="#cb321-138" aria-hidden="true" tabindex="-1"></a><span class="co"># Get Salinity</span></span>
<span id="cb321-139"><a href="#cb321-139" aria-hidden="true" tabindex="-1"></a>dname <span class="ot">&lt;-</span> <span class="st">"sob"</span></span>
<span id="cb321-140"><a href="#cb321-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-141"><a href="#cb321-141" aria-hidden="true" tabindex="-1"></a>sal_array <span class="ot">&lt;-</span> <span class="fu">ncvar_get</span>(ncin,dname)</span>
<span id="cb321-142"><a href="#cb321-142" aria-hidden="true" tabindex="-1"></a>dlname <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,dname,<span class="st">"long_name"</span>)</span>
<span id="cb321-143"><a href="#cb321-143" aria-hidden="true" tabindex="-1"></a>dunits <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,dname,<span class="st">"units"</span>)</span>
<span id="cb321-144"><a href="#cb321-144" aria-hidden="true" tabindex="-1"></a>fillvalue <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,dname,<span class="st">"_FillValue"</span>)</span>
<span id="cb321-145"><a href="#cb321-145" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(sal_array)</span>
<span id="cb321-146"><a href="#cb321-146" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 199 187 335</span></span>
<span id="cb321-147"><a href="#cb321-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-148"><a href="#cb321-148" aria-hidden="true" tabindex="-1"></a><span class="co"># Get global attributes</span></span>
<span id="cb321-149"><a href="#cb321-149" aria-hidden="true" tabindex="-1"></a>title <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"title"</span>)</span>
<span id="cb321-150"><a href="#cb321-150" aria-hidden="true" tabindex="-1"></a>institution <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"institution"</span>)</span>
<span id="cb321-151"><a href="#cb321-151" aria-hidden="true" tabindex="-1"></a>datasource <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"source"</span>)</span>
<span id="cb321-152"><a href="#cb321-152" aria-hidden="true" tabindex="-1"></a>references <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"references"</span>)</span>
<span id="cb321-153"><a href="#cb321-153" aria-hidden="true" tabindex="-1"></a>history <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"history"</span>)</span>
<span id="cb321-154"><a href="#cb321-154" aria-hidden="true" tabindex="-1"></a>Conventions <span class="ot">&lt;-</span> <span class="fu">ncatt_get</span>(ncin,<span class="dv">0</span>,<span class="st">"Conventions"</span>)</span>
<span id="cb321-155"><a href="#cb321-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-156"><a href="#cb321-156" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert time: split the time units string into fields</span></span>
<span id="cb321-157"><a href="#cb321-157" aria-hidden="true" tabindex="-1"></a>tustr <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(tunits<span class="sc">$</span>value, <span class="st">" "</span>)</span>
<span id="cb321-158"><a href="#cb321-158" aria-hidden="true" tabindex="-1"></a>tdstr <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(<span class="fu">unlist</span>(tustr)[<span class="dv">3</span>], <span class="st">"-"</span>)</span>
<span id="cb321-159"><a href="#cb321-159" aria-hidden="true" tabindex="-1"></a>tmonth <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">unlist</span>(tdstr)[<span class="dv">2</span>])</span>
<span id="cb321-160"><a href="#cb321-160" aria-hidden="true" tabindex="-1"></a>tday <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">unlist</span>(tdstr)[<span class="dv">3</span>])</span>
<span id="cb321-161"><a href="#cb321-161" aria-hidden="true" tabindex="-1"></a>tyear <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">unlist</span>(tdstr)[<span class="dv">1</span>])</span>
<span id="cb321-162"><a href="#cb321-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-163"><a href="#cb321-163" aria-hidden="true" tabindex="-1"></a><span class="co"># Here I deviate from the guide a little bit. Save this info:</span></span>
<span id="cb321-164"><a href="#cb321-164" aria-hidden="true" tabindex="-1"></a>dates <span class="ot">&lt;-</span> <span class="fu">chron</span>(time, <span class="at">origin =</span> <span class="fu">c</span>(tmonth, tday, tyear))</span>
<span id="cb321-165"><a href="#cb321-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-166"><a href="#cb321-166" aria-hidden="true" tabindex="-1"></a><span class="co"># Crop the date variable</span></span>
<span id="cb321-167"><a href="#cb321-167" aria-hidden="true" tabindex="-1"></a>months <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(dates, <span class="dv">2</span>, <span class="dv">3</span>))</span>
<span id="cb321-168"><a href="#cb321-168" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(dates, <span class="dv">8</span>, <span class="dv">9</span>))</span>
<span id="cb321-169"><a href="#cb321-169" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(years <span class="sc">&gt;</span> <span class="dv">90</span>, <span class="dv">1900</span> <span class="sc">+</span> years, <span class="dv">2000</span> <span class="sc">+</span> years)</span>
<span id="cb321-170"><a href="#cb321-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-171"><a href="#cb321-171" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace netCDF fill values with NA's</span></span>
<span id="cb321-172"><a href="#cb321-172" aria-hidden="true" tabindex="-1"></a>sal_array[sal_array <span class="sc">==</span> fillvalue<span class="sc">$</span>value] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb321-173"><a href="#cb321-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-174"><a href="#cb321-174" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through all "dates", put into a list </span></span>
<span id="cb321-175"><a href="#cb321-175" aria-hidden="true" tabindex="-1"></a>dlist <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb321-176"><a href="#cb321-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-177"><a href="#cb321-177" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(months)) {</span>
<span id="cb321-178"><a href="#cb321-178" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-179"><a href="#cb321-179" aria-hidden="true" tabindex="-1"></a>  sal_sub <span class="ot">&lt;-</span> sal_array[, , i]</span>
<span id="cb321-180"><a href="#cb321-180" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-181"><a href="#cb321-181" aria-hidden="true" tabindex="-1"></a>  dlist[[i]] <span class="ot">&lt;-</span> sal_sub</span>
<span id="cb321-182"><a href="#cb321-182" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-183"><a href="#cb321-183" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb321-184"><a href="#cb321-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-185"><a href="#cb321-185" aria-hidden="true" tabindex="-1"></a><span class="co"># Name the list</span></span>
<span id="cb321-186"><a href="#cb321-186" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dlist) <span class="ot">&lt;-</span> <span class="fu">paste</span>(months, years, <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb321-187"><a href="#cb321-187" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dlist)</span>
<span id="cb321-188"><a href="#cb321-188" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 335</span></span>
<span id="cb321-189"><a href="#cb321-189" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1993 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-190"><a href="#cb321-190" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1993 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-191"><a href="#cb321-191" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1993 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-192"><a href="#cb321-192" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1993 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-193"><a href="#cb321-193" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1993 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-194"><a href="#cb321-194" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1993 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-195"><a href="#cb321-195" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1993 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-196"><a href="#cb321-196" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1993 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-197"><a href="#cb321-197" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1993: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-198"><a href="#cb321-198" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1993: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-199"><a href="#cb321-199" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1993: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-200"><a href="#cb321-200" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1994 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-201"><a href="#cb321-201" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1994 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-202"><a href="#cb321-202" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1994 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-203"><a href="#cb321-203" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1994 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-204"><a href="#cb321-204" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1994 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-205"><a href="#cb321-205" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1994 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-206"><a href="#cb321-206" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1994 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-207"><a href="#cb321-207" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1994 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-208"><a href="#cb321-208" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1994 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-209"><a href="#cb321-209" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1994: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-210"><a href="#cb321-210" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1994: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-211"><a href="#cb321-211" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1994: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-212"><a href="#cb321-212" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1995 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-213"><a href="#cb321-213" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1995 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-214"><a href="#cb321-214" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1995 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-215"><a href="#cb321-215" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1995 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-216"><a href="#cb321-216" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1995 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-217"><a href="#cb321-217" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1995 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-218"><a href="#cb321-218" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1995 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-219"><a href="#cb321-219" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1995 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-220"><a href="#cb321-220" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1995 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-221"><a href="#cb321-221" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1995: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-222"><a href="#cb321-222" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1995: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-223"><a href="#cb321-223" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1995: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-224"><a href="#cb321-224" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1996 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-225"><a href="#cb321-225" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1996 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-226"><a href="#cb321-226" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1996 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-227"><a href="#cb321-227" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1996 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-228"><a href="#cb321-228" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1996 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-229"><a href="#cb321-229" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1996 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-230"><a href="#cb321-230" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1996 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-231"><a href="#cb321-231" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1996 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-232"><a href="#cb321-232" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1996 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-233"><a href="#cb321-233" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1996: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-234"><a href="#cb321-234" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1996: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-235"><a href="#cb321-235" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1996: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-236"><a href="#cb321-236" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1997 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-237"><a href="#cb321-237" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1997 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-238"><a href="#cb321-238" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1997 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-239"><a href="#cb321-239" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1997 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-240"><a href="#cb321-240" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1997 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-241"><a href="#cb321-241" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1997 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-242"><a href="#cb321-242" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1997 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-243"><a href="#cb321-243" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1997 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-244"><a href="#cb321-244" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1997 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-245"><a href="#cb321-245" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1997: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-246"><a href="#cb321-246" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1997: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-247"><a href="#cb321-247" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1997: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-248"><a href="#cb321-248" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1998 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-249"><a href="#cb321-249" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1998 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-250"><a href="#cb321-250" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1998 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-251"><a href="#cb321-251" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1998 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-252"><a href="#cb321-252" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1998 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-253"><a href="#cb321-253" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1998 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-254"><a href="#cb321-254" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1998 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-255"><a href="#cb321-255" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1998 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-256"><a href="#cb321-256" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1998 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-257"><a href="#cb321-257" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1998: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-258"><a href="#cb321-258" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1998: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-259"><a href="#cb321-259" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1998: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-260"><a href="#cb321-260" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_1999 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-261"><a href="#cb321-261" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_1999 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-262"><a href="#cb321-262" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_1999 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-263"><a href="#cb321-263" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_1999 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-264"><a href="#cb321-264" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_1999 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-265"><a href="#cb321-265" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_1999 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-266"><a href="#cb321-266" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_1999 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-267"><a href="#cb321-267" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_1999 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-268"><a href="#cb321-268" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_1999 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-269"><a href="#cb321-269" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_1999: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-270"><a href="#cb321-270" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_1999: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-271"><a href="#cb321-271" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_1999: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-272"><a href="#cb321-272" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_2000 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-273"><a href="#cb321-273" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_2000 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-274"><a href="#cb321-274" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_2000 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-275"><a href="#cb321-275" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_2000 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-276"><a href="#cb321-276" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 5_2000 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-277"><a href="#cb321-277" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 6_2000 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-278"><a href="#cb321-278" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 7_2000 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-279"><a href="#cb321-279" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 8_2000 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-280"><a href="#cb321-280" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 9_2000 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-281"><a href="#cb321-281" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 10_2000: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-282"><a href="#cb321-282" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 11_2000: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-283"><a href="#cb321-283" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 12_2000: num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-284"><a href="#cb321-284" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 1_2001 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-285"><a href="#cb321-285" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 2_2001 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-286"><a href="#cb321-286" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 3_2001 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-287"><a href="#cb321-287" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ 4_2001 : num [1:199, 1:187] NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN ...</span></span>
<span id="cb321-288"><a href="#cb321-288" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [list output truncated]</span></span>
<span id="cb321-289"><a href="#cb321-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-290"><a href="#cb321-290" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data holding object</span></span>
<span id="cb321-291"><a href="#cb321-291" aria-hidden="true" tabindex="-1"></a>sal_data_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb321-292"><a href="#cb321-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb321-293"><a href="#cb321-293" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each month_year and extract raster values for the cpue data points</span></span>
<span id="cb321-294"><a href="#cb321-294" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">unique</span>(dat_haul<span class="sc">$</span>month_year)) { <span class="co"># We can use q1 as looping index, doesn't matter!</span></span>
<span id="cb321-295"><a href="#cb321-295" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-296"><a href="#cb321-296" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set plot limits</span></span>
<span id="cb321-297"><a href="#cb321-297" aria-hidden="true" tabindex="-1"></a>  ymin <span class="ot">=</span> <span class="dv">54</span>; ymax <span class="ot">=</span> <span class="dv">58</span>; xmin <span class="ot">=</span> <span class="dv">12</span>; xmax <span class="ot">=</span> <span class="dv">22</span></span>
<span id="cb321-298"><a href="#cb321-298" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-299"><a href="#cb321-299" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Subset a month-year combination</span></span>
<span id="cb321-300"><a href="#cb321-300" aria-hidden="true" tabindex="-1"></a>  sal_slice <span class="ot">&lt;-</span> dlist[[i]]</span>
<span id="cb321-301"><a href="#cb321-301" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-302"><a href="#cb321-302" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create raster for that year (i)</span></span>
<span id="cb321-303"><a href="#cb321-303" aria-hidden="true" tabindex="-1"></a>  r <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="fu">t</span>(sal_slice), <span class="at">xmn =</span> <span class="fu">min</span>(lon), <span class="at">xmx =</span> <span class="fu">max</span>(lon), <span class="at">ymn =</span> <span class="fu">min</span>(lat), <span class="at">ymx =</span> <span class="fu">max</span>(lat),</span>
<span id="cb321-304"><a href="#cb321-304" aria-hidden="true" tabindex="-1"></a>              <span class="at">crs =</span> <span class="fu">CRS</span>(<span class="st">"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs+ towgs84=0,0,0"</span>))</span>
<span id="cb321-305"><a href="#cb321-305" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-306"><a href="#cb321-306" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Flip...</span></span>
<span id="cb321-307"><a href="#cb321-307" aria-hidden="true" tabindex="-1"></a>  r <span class="ot">&lt;-</span> <span class="fu">flip</span>(r, <span class="at">direction =</span> <span class="st">'y'</span>)</span>
<span id="cb321-308"><a href="#cb321-308" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-309"><a href="#cb321-309" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(r, <span class="at">main =</span> <span class="fu">paste</span>(i), <span class="at">ylim =</span> <span class="fu">c</span>(ymin, ymax), <span class="at">xlim =</span> <span class="fu">c</span>(xmin, xmax))</span>
<span id="cb321-310"><a href="#cb321-310" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-311"><a href="#cb321-311" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter the same year (i) in the cpue data and select only coordinates</span></span>
<span id="cb321-312"><a href="#cb321-312" aria-hidden="true" tabindex="-1"></a>  d_slice <span class="ot">&lt;-</span> dat_haul <span class="sc">%&gt;%</span> <span class="fu">filter</span>(month_year <span class="sc">==</span> i) <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(lon, lat)</span>
<span id="cb321-313"><a href="#cb321-313" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-314"><a href="#cb321-314" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make into a SpatialPoints object</span></span>
<span id="cb321-315"><a href="#cb321-315" aria-hidden="true" tabindex="-1"></a>  data_sp <span class="ot">&lt;-</span> <span class="fu">SpatialPoints</span>(d_slice)</span>
<span id="cb321-316"><a href="#cb321-316" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-317"><a href="#cb321-317" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract raster value (oxygen)</span></span>
<span id="cb321-318"><a href="#cb321-318" aria-hidden="true" tabindex="-1"></a>  rasValue <span class="ot">&lt;-</span> raster<span class="sc">::</span><span class="fu">extract</span>(r, data_sp)</span>
<span id="cb321-319"><a href="#cb321-319" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-320"><a href="#cb321-320" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now we want to plot the results of the raster extractions by plotting the cpue data points over a raster and saving it for each year.</span></span>
<span id="cb321-321"><a href="#cb321-321" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make the SpatialPoints object into a raster again (for plot)</span></span>
<span id="cb321-322"><a href="#cb321-322" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(data_sp)</span>
<span id="cb321-323"><a href="#cb321-323" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-324"><a href="#cb321-324" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add in the raster value in the df holding the coordinates for the cpue data</span></span>
<span id="cb321-325"><a href="#cb321-325" aria-hidden="true" tabindex="-1"></a>  d_slice<span class="sc">$</span>sal <span class="ot">&lt;-</span> rasValue</span>
<span id="cb321-326"><a href="#cb321-326" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-327"><a href="#cb321-327" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add in which year</span></span>
<span id="cb321-328"><a href="#cb321-328" aria-hidden="true" tabindex="-1"></a>  d_slice<span class="sc">$</span>month_year <span class="ot">&lt;-</span> i</span>
<span id="cb321-329"><a href="#cb321-329" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-330"><a href="#cb321-330" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add each years' data in the list</span></span>
<span id="cb321-331"><a href="#cb321-331" aria-hidden="true" tabindex="-1"></a>  sal_data_list[[i]] <span class="ot">&lt;-</span> d_slice</span>
<span id="cb321-332"><a href="#cb321-332" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb321-333"><a href="#cb321-333" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb321-334"><a href="#cb321-334" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; filter: removed 9,315 rows (99%), 61 rows remaining</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,336 rows (&gt;99%), 40 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,358 rows (&gt;99%), 18 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,360 rows (&gt;99%), 16 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,331 rows (&gt;99%), 45 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,313 rows (99%), 63 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,344 rows (&gt;99%), 32 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,296 rows (99%), 80 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,365 rows (&gt;99%), 11 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,314 rows (99%), 62 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,259 rows (99%), 117 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,339 rows (&gt;99%), 37 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,355 rows (&gt;99%), 21 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,351 rows (&gt;99%), 25 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,348 rows (&gt;99%), 28 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,295 rows (99%), 81 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,328 rows (99%), 48 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,322 rows (99%), 54 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,357 rows (&gt;99%), 19 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,331 rows (&gt;99%), 45 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,360 rows (&gt;99%), 16 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,321 rows (99%), 55 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,306 rows (99%), 70 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,287 rows (99%), 89 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,361 rows (&gt;99%), 15 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,306 rows (99%), 70 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,371 rows (&gt;99%), 5 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,309 rows (99%), 67 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,268 rows (99%), 108 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,323 rows (99%), 53 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,360 rows (&gt;99%), 16 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-31.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,327 rows (99%), 49 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-32.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,357 rows (&gt;99%), 19 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-33.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,267 rows (99%), 109 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-34.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,295 rows (99%), 81 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-35.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,364 rows (&gt;99%), 12 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-36.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,287 rows (99%), 89 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-37.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,371 rows (&gt;99%), 5 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-38.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,312 rows (99%), 64 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-39.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,330 rows (&gt;99%), 46 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-40.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,287 rows (99%), 89 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-41.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,250 rows (99%), 126 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-42.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,294 rows (99%), 82 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-43.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,260 rows (99%), 116 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-44.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,283 rows (99%), 93 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-45.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,324 rows (99%), 52 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-46.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,270 rows (99%), 106 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-47.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,365 rows (&gt;99%), 11 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-48.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,271 rows (99%), 105 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-49.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,320 rows (99%), 56 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-50.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,259 rows (99%), 117 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-51.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,365 rows (&gt;99%), 11 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-52.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,242 rows (99%), 134 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-53.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,303 rows (99%), 73 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-54.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,300 rows (99%), 76 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-55.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,343 rows (&gt;99%), 33 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-56.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,235 rows (98%), 141 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-57.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,299 rows (99%), 77 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-58.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,250 rows (99%), 126 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-59.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,353 rows (&gt;99%), 23 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-60.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,374 rows (&gt;99%), 2 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-61.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,261 rows (99%), 115 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-62.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,303 rows (99%), 73 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-63.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,265 rows (99%), 111 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-64.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,351 rows (&gt;99%), 25 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-65.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,362 rows (&gt;99%), 14 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-66.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,246 rows (99%), 130 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-67.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,271 rows (99%), 105 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-68.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,237 rows (99%), 139 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-69.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,357 rows (&gt;99%), 19 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-70.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,365 rows (&gt;99%), 11 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-71.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,256 rows (99%), 120 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-72.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,274 rows (99%), 102 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-73.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,247 rows (99%), 129 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-74.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,359 rows (&gt;99%), 17 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-75.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,346 rows (&gt;99%), 30 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-76.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,228 rows (98%), 148 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-77.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,265 rows (99%), 111 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-78.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,233 rows (98%), 143 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-79.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,368 rows (&gt;99%), 8 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-80.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,347 rows (&gt;99%), 29 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-81.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,235 rows (98%), 141 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-82.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,276 rows (99%), 100 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-83.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,239 rows (99%), 137 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-84.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,351 rows (&gt;99%), 25 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-85.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,214 rows (98%), 162 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-86.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,295 rows (99%), 81 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-87.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,247 rows (99%), 129 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-88.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,344 rows (&gt;99%), 32 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-89.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,357 rows (&gt;99%), 19 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-90.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,294 rows (99%), 82 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-91.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,234 rows (98%), 142 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-92.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,361 rows (&gt;99%), 15 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-93.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,283 rows (99%), 93 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-94.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,351 rows (&gt;99%), 25 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-95.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,238 rows (99%), 138 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-96.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,246 rows (99%), 130 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-97.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,256 rows (99%), 120 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-98.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,363 rows (&gt;99%), 13 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-99.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,361 rows (&gt;99%), 15 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-100.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,224 rows (98%), 152 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-101.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,320 rows (99%), 56 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-102.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,250 rows (99%), 126 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-103.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,342 rows (&gt;99%), 34 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-104.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,360 rows (&gt;99%), 16 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-105.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,217 rows (98%), 159 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-106.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,298 rows (99%), 78 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-107.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,227 rows (98%), 149 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-108.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,359 rows (&gt;99%), 17 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-109.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,284 rows (99%), 92 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-110.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,236 rows (99%), 140 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-111.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,192 rows (98%), 184 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-112.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,362 rows (&gt;99%), 14 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-113.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,361 rows (&gt;99%), 15 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-114.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,245 rows (99%), 131 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-115.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,261 rows (99%), 115 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-116.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,191 rows (98%), 185 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-117.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,351 rows (&gt;99%), 25 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-118.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,361 rows (&gt;99%), 15 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-119.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,223 rows (98%), 153 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-120.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,273 rows (99%), 103 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-121.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,196 rows (98%), 180 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-122.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,345 rows (&gt;99%), 31 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-123.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,317 rows (99%), 59 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-124.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,317 rows (99%), 59 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-125.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,284 rows (99%), 92 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-126.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,325 rows (99%), 51 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-127.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,301 rows (99%), 75 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-128.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,356 rows (&gt;99%), 20 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-129.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<pre><code>#&gt; filter: removed 9,294 rows (99%), 82 rows remaining</code></pre>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-19-130.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb451"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb451-1"><a href="#cb451-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb451-2"><a href="#cb451-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now create a data frame from the list of all annual values</span></span>
<span id="cb451-3"><a href="#cb451-3" aria-hidden="true" tabindex="-1"></a>big_dat_sal <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(sal_data_list)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb452"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb452-1"><a href="#cb452-1" aria-hidden="true" tabindex="-1"></a>env_dat <span class="ot">&lt;-</span> <span class="fu">left_join</span>(big_dat_oxy, big_dat_temp, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"month_year"</span>, <span class="st">"lon"</span>, <span class="st">"lat"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb452-2"><a href="#cb452-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(big_dat_sal, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"month_year"</span>, <span class="st">"lon"</span>, <span class="st">"lat"</span>))</span>
<span id="cb452-3"><a href="#cb452-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; left_join: added one column (temp)</span></span>
<span id="cb452-4"><a href="#cb452-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows only in x       0</span></span>
<span id="cb452-5"><a href="#cb452-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows only in y  (    0)</span></span>
<span id="cb452-6"><a href="#cb452-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; matched rows     9,440    (includes duplicates)</span></span>
<span id="cb452-7"><a href="#cb452-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt;                 =======</span></span>
<span id="cb452-8"><a href="#cb452-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows total       9,440</span></span>
<span id="cb452-9"><a href="#cb452-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; left_join: added one column (sal)</span></span>
<span id="cb452-10"><a href="#cb452-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows only in x       0</span></span>
<span id="cb452-11"><a href="#cb452-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows only in y  (    0)</span></span>
<span id="cb452-12"><a href="#cb452-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; matched rows     9,604    (includes duplicates)</span></span>
<span id="cb452-13"><a href="#cb452-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt;                 =======</span></span>
<span id="cb452-14"><a href="#cb452-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows total       9,604</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="depth" class="level4">
<h4 class="anchored" data-anchor-id="depth">Depth</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb453"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb453-1"><a href="#cb453-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Only use unique locations and then left_join else it will take forever</span></span>
<span id="cb453-2"><a href="#cb453-2" aria-hidden="true" tabindex="-1"></a><span class="co"># https://gis.stackexchange.com/questions/411261/read-multiple-layers-raster-from-ncdf-file-using-terra-package</span></span>
<span id="cb453-3"><a href="#cb453-3" aria-hidden="true" tabindex="-1"></a><span class="co"># https://emodnet.ec.europa.eu/geoviewer/</span></span>
<span id="cb453-4"><a href="#cb453-4" aria-hidden="true" tabindex="-1"></a>dep_raster <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>(<span class="st">"data/Mean depth natural colour (with land).nc"</span>)</span>
<span id="cb453-5"><a href="#cb453-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb453-6"><a href="#cb453-6" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(dep_raster)</span>
<span id="cb453-7"><a href="#cb453-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "SpatRaster"</span></span>
<span id="cb453-8"><a href="#cb453-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; attr(,"package")</span></span>
<span id="cb453-9"><a href="#cb453-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] "terra"</span></span>
<span id="cb453-10"><a href="#cb453-10" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dep_raster)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb454"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb454-1"><a href="#cb454-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb454-2"><a href="#cb454-2" aria-hidden="true" tabindex="-1"></a>env_dat<span class="sc">$</span>depth <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">extract</span>(dep_raster, env_dat <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(lon, lat))<span class="sc">$</span>elevation</span>
<span id="cb454-3"><a href="#cb454-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb454-4"><a href="#cb454-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(env_dat, <span class="fu">aes</span>(lon, lat, <span class="at">color =</span> depth<span class="sc">*-</span><span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb454-5"><a href="#cb454-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb454-6"><a href="#cb454-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis</span>(<span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-20-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb455"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb455-1"><a href="#cb455-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb455-2"><a href="#cb455-2" aria-hidden="true" tabindex="-1"></a>env_dat<span class="sc">$</span>depth <span class="ot">&lt;-</span> env_dat<span class="sc">$</span>depth<span class="sc">*-</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="substrate" class="level4">
<h4 class="anchored" data-anchor-id="substrate">Substrate</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb456"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb456-1"><a href="#cb456-1" aria-hidden="true" tabindex="-1"></a>substrate <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>(<span class="st">"data/substrate_tif/BALANCE_SEABED_SEDIMENT.tif"</span>)</span>
<span id="cb456-2"><a href="#cb456-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb456-3"><a href="#cb456-3" aria-hidden="true" tabindex="-1"></a>newcrs <span class="ot">&lt;-</span> <span class="st">"+proj=longlat +datum=WGS84"</span></span>
<span id="cb456-4"><a href="#cb456-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb456-5"><a href="#cb456-5" aria-hidden="true" tabindex="-1"></a>substrate_longlat <span class="ot">=</span> terra<span class="sc">::</span><span class="fu">project</span>(substrate, newcrs)</span>
<span id="cb456-6"><a href="#cb456-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb456-7"><a href="#cb456-7" aria-hidden="true" tabindex="-1"></a><span class="sc">|---------</span><span class="er">|</span><span class="sc">---------</span><span class="er">|</span><span class="sc">---------</span><span class="er">|</span><span class="sc">---------</span><span class="er">|</span></span>
<span id="cb456-8"><a href="#cb456-8" aria-hidden="true" tabindex="-1"></a><span class="er">=========================================</span></span>
<span id="cb456-9"><a href="#cb456-9" aria-hidden="true" tabindex="-1"></a>                                          </span>
<span id="cb456-10"><a href="#cb456-10" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb456-11"><a href="#cb456-11" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(substrate_longlat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb457"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb457-1"><a href="#cb457-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb457-2"><a href="#cb457-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Now extract the values from the saduria raster to dat</span></span>
<span id="cb457-3"><a href="#cb457-3" aria-hidden="true" tabindex="-1"></a>env_dat<span class="sc">$</span>substrate <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">extract</span>(substrate_longlat, env_dat <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">select</span>(lon, lat))<span class="sc">$</span>BALANCE_SEABED_SEDIMENT</span>
<span id="cb457-4"><a href="#cb457-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb457-5"><a href="#cb457-5" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(env_dat<span class="sc">$</span>substrate)</span>
<span id="cb457-6"><a href="#cb457-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [1] 3.000000 5.000000 4.607636 4.000000 4.779311 4.359070 1.110878 4.728520</span></span>
<span id="cb457-7"><a href="#cb457-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   [9] 2.000000 2.470703 4.351443 4.864107 3.000000 3.000000 3.894708 5.000000</span></span>
<span id="cb457-8"><a href="#cb457-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [17] 3.214905 5.000000 4.000000 4.707845 4.976288 4.872211 2.723600 3.053204</span></span>
<span id="cb457-9"><a href="#cb457-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [25] 2.000000 4.976247 4.023339 4.944880 1.853638 3.557861 3.641602 1.742188</span></span>
<span id="cb457-10"><a href="#cb457-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [33] 4.934251 3.504555 4.148682 2.459351 3.491294 4.043431 4.264687 2.022461</span></span>
<span id="cb457-11"><a href="#cb457-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [41] 4.526637 3.518188 4.215216 3.563724 4.019485 4.148223 4.796224 4.092285</span></span>
<span id="cb457-12"><a href="#cb457-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [49] 4.233887 4.034148 4.524918 3.006954 1.000000 3.984532 4.779660 3.556641</span></span>
<span id="cb457-13"><a href="#cb457-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [57] 3.883789 3.368164 4.366760 3.789307 2.204068 4.218385 4.764853 3.910774</span></span>
<span id="cb457-14"><a href="#cb457-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [65] 4.375366 3.954736 4.810412 3.248259 3.001027 3.828052 4.145152 3.181943</span></span>
<span id="cb457-15"><a href="#cb457-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [73] 4.372962 4.393387 4.510804 4.407255 4.060577 4.591309 4.515137 2.012702</span></span>
<span id="cb457-16"><a href="#cb457-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [81] 4.804206 4.486376 2.143023 4.662720 4.989409 3.129318 3.905518 4.866291</span></span>
<span id="cb457-17"><a href="#cb457-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [89] 2.066101 4.994213 4.700178 3.146973 3.767395 4.574670 2.643799 3.198730</span></span>
<span id="cb457-18"><a href="#cb457-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [97] 3.056846 4.027684 2.301880 3.068066 3.824422 3.394202 4.254395 3.237824</span></span>
<span id="cb457-19"><a href="#cb457-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [105] 3.459106 3.871704 4.610733 2.901885 3.250488 3.200195 4.122253 4.936279</span></span>
<span id="cb457-20"><a href="#cb457-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [113] 4.024551 4.425781 3.823486 3.871973 3.275051 4.015574 2.624084 4.437500</span></span>
<span id="cb457-21"><a href="#cb457-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [121] 3.615677 2.860229 4.183366 3.651196 4.161257 2.682129 3.646171 4.273810</span></span>
<span id="cb457-22"><a href="#cb457-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [129] 4.752747 3.509888 2.802612 2.922119 3.007472 2.654419 4.850040 4.795102</span></span>
<span id="cb457-23"><a href="#cb457-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [137] 3.044122 3.306519 3.204886 3.724289 2.485703 3.905762 4.006656 3.715088</span></span>
<span id="cb457-24"><a href="#cb457-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [145] 4.724897 2.797852 4.000622 4.405457 3.577386 2.957503 3.102914 4.783569</span></span>
<span id="cb457-25"><a href="#cb457-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [153] 4.237061 4.263208 4.981248 2.809082 3.253296 2.681559 4.828800 2.000210</span></span>
<span id="cb457-26"><a href="#cb457-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [161] 2.161987 3.538526 3.427787 3.894775 4.102916 4.715175 4.379732 4.792236</span></span>
<span id="cb457-27"><a href="#cb457-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [169] 3.262914 3.963135 3.423243 3.989373 2.520423 4.522619 3.367528 4.985679</span></span>
<span id="cb457-28"><a href="#cb457-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [177] 3.662964 4.024536 4.541504 3.825715 2.859985 4.154485 2.933125 2.376878</span></span>
<span id="cb457-29"><a href="#cb457-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [185] 4.817139 2.986707 2.224887 3.089746 3.643951 4.754215 4.354980 4.196102</span></span>
<span id="cb457-30"><a href="#cb457-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [193] 3.126221 4.084546 4.636841 3.747553 4.144173 4.733932 4.726685 4.707332</span></span>
<span id="cb457-31"><a href="#cb457-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [201] 4.076108 3.766113 2.564980 4.755586 3.564939 3.974121 4.763381 2.087940</span></span>
<span id="cb457-32"><a href="#cb457-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [209] 4.995117 3.902588 3.892326 3.376036 3.117357</span></span>
<span id="cb457-33"><a href="#cb457-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb457-34"><a href="#cb457-34" aria-hidden="true" tabindex="-1"></a><span class="fu">factor</span>(<span class="fu">sort</span>(<span class="fu">unique</span>(<span class="fu">round</span>(env_dat<span class="sc">$</span>substrate))))</span>
<span id="cb457-35"><a href="#cb457-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 5</span></span>
<span id="cb457-36"><a href="#cb457-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Levels: 1 2 3 4 5</span></span>
<span id="cb457-37"><a href="#cb457-37" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb457-38"><a href="#cb457-38" aria-hidden="true" tabindex="-1"></a>env_dat<span class="sc">$</span>substrate <span class="ot">&lt;-</span> <span class="fu">round</span>(env_dat<span class="sc">$</span>substrate)</span>
<span id="cb457-39"><a href="#cb457-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb457-40"><a href="#cb457-40" aria-hidden="true" tabindex="-1"></a>env_dat <span class="ot">&lt;-</span> env_dat <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">substrate =</span> <span class="fu">ifelse</span>(substrate <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"bedrock"</span>, substrate),</span>
<span id="cb457-41"><a href="#cb457-41" aria-hidden="true" tabindex="-1"></a>                              <span class="at">substrate =</span> <span class="fu">ifelse</span>(substrate <span class="sc">==</span> <span class="dv">2</span>, <span class="st">"hard-bottom complex"</span>,</span>
<span id="cb457-42"><a href="#cb457-42" aria-hidden="true" tabindex="-1"></a>                                                 substrate),</span>
<span id="cb457-43"><a href="#cb457-43" aria-hidden="true" tabindex="-1"></a>                              <span class="at">substrate =</span> <span class="fu">ifelse</span>(substrate <span class="sc">==</span> <span class="dv">3</span>, <span class="st">"sand"</span>, substrate),</span>
<span id="cb457-44"><a href="#cb457-44" aria-hidden="true" tabindex="-1"></a>                              <span class="at">substrate =</span> <span class="fu">ifelse</span>(substrate <span class="sc">==</span> <span class="dv">4</span>, <span class="st">"hard clay"</span>, substrate),</span>
<span id="cb457-45"><a href="#cb457-45" aria-hidden="true" tabindex="-1"></a>                              <span class="at">substrate =</span> <span class="fu">ifelse</span>(substrate <span class="sc">==</span> <span class="dv">5</span>, <span class="st">"mud"</span>, substrate))</span>
<span id="cb457-46"><a href="#cb457-46" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; mutate: converted 'substrate' from double to character (0 new NA)</span></span>
<span id="cb457-47"><a href="#cb457-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb457-48"><a href="#cb457-48" aria-hidden="true" tabindex="-1"></a><span class="co"># I. Bedrock.</span></span>
<span id="cb457-49"><a href="#cb457-49" aria-hidden="true" tabindex="-1"></a><span class="co"># II. Hard bottom complex, includes patchy hard surfaces and coarse sand (sometimes also clay) to boulders.</span></span>
<span id="cb457-50"><a href="#cb457-50" aria-hidden="true" tabindex="-1"></a><span class="co"># III. Sand including fine to coarse sand (with gravel exposures).</span></span>
<span id="cb457-51"><a href="#cb457-51" aria-hidden="true" tabindex="-1"></a><span class="co"># IV. Hard clay sometimes/often/possibly exposed or covered with a thin layer of sand/gravel.</span></span>
<span id="cb457-52"><a href="#cb457-52" aria-hidden="true" tabindex="-1"></a><span class="co"># V. Mud including gyttja-clay to gyttja-silt.</span></span>
<span id="cb457-53"><a href="#cb457-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb457-54"><a href="#cb457-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb457-55"><a href="#cb457-55" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(env_dat, <span class="fu">aes</span>(lon, lat, <span class="at">color =</span> substrate)) <span class="sc">+</span></span>
<span id="cb457-56"><a href="#cb457-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_collate_cpue_data_exchange_files/figure-html/unnamed-chunk-21-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb458"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb458-1"><a href="#cb458-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now join these data with the full_dat</span></span>
<span id="cb458-2"><a href="#cb458-2" aria-hidden="true" tabindex="-1"></a>dat_full <span class="ot">&lt;-</span> <span class="fu">left_join</span>(dat, env_dat, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"month_year"</span>, <span class="st">"lon"</span>, <span class="st">"lat"</span>))</span>
<span id="cb458-3"><a href="#cb458-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; left_join: added 5 columns (oxy, temp, sal, depth, substrate)</span></span>
<span id="cb458-4"><a href="#cb458-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows only in x           0</span></span>
<span id="cb458-5"><a href="#cb458-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows only in y  (        0)</span></span>
<span id="cb458-6"><a href="#cb458-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; matched rows     2,855,505    (includes duplicates)</span></span>
<span id="cb458-7"><a href="#cb458-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt;                 ===========</span></span>
<span id="cb458-8"><a href="#cb458-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;            &gt; rows total       2,855,505</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="add-utm-coords" class="level2">
<h2 class="anchored" data-anchor-id="add-utm-coords">Add UTM coords</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb459"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb459-1"><a href="#cb459-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First add UTM coords</span></span>
<span id="cb459-2"><a href="#cb459-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Add UTM coords</span></span>
<span id="cb459-3"><a href="#cb459-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb459-4"><a href="#cb459-4" aria-hidden="true" tabindex="-1"></a>utm_coords <span class="ot">&lt;-</span> <span class="fu">LongLatToUTM</span>(dat_full<span class="sc">$</span>lon, dat_full<span class="sc">$</span>lat, <span class="at">zone =</span> <span class="dv">33</span>)</span>
<span id="cb459-5"><a href="#cb459-5" aria-hidden="true" tabindex="-1"></a>dat_full<span class="sc">$</span>X <span class="ot">&lt;-</span> utm_coords<span class="sc">$</span>X<span class="sc">/</span><span class="dv">1000</span> <span class="co"># for computational reasons</span></span>
<span id="cb459-6"><a href="#cb459-6" aria-hidden="true" tabindex="-1"></a>dat_full<span class="sc">$</span>Y <span class="ot">&lt;-</span> utm_coords<span class="sc">$</span>Y<span class="sc">/</span><span class="dv">1000</span> <span class="co"># for computational reasons</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="save-data" class="level2">
<h2 class="anchored" data-anchor-id="save-data">Save data</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb460"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb460-1"><a href="#cb460-1" aria-hidden="true" tabindex="-1"></a>dat_full_save <span class="ot">&lt;-</span> dat_full <span class="sc">|&gt;</span></span>
<span id="cb460-2"><a href="#cb460-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>IDx, <span class="sc">-</span>haul.id.size) <span class="sc">|&gt;</span> </span>
<span id="cb460-3"><a href="#cb460-3" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb460-4"><a href="#cb460-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-5"><a href="#cb460-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(dat_full_save, <span class="at">file =</span> <span class="st">"data/clean/catch_by_length.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>